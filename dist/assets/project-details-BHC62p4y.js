import{I as de}from"./index-BcFOD9Ey.js";/* empty css                                              */import{B as I}from"./index-DCMPjbua.js";import{T as we}from"./Table-CxPcO8df.js";import{q as i,u as W,b as ie,H as fe,G as Y,c as D,o as v,d as x,e as o,h as d,f as a,w as q,j as l,p as w,l as J,J as P,t as j,F as ce,m as re,n as he,a as De,K as ye,z as $e,A as Te,I as Be}from"./index-BLl1OigC.js";import{F as h}from"./index-I9bOp0dW.js";import{I as X}from"./index-DCC49QXr.js";import{C as ue}from"./index-Hsd0Z0_R.js";import{M as _e}from"./index-MSlXG-Ka.js";import{V as be}from"./VueSelect-DI5dOEtm.js";import{T as xe}from"./index-CwPxZwdQ.js";import{T as z}from"./index-BTHsGrD3.js";import{u as pe}from"./project-DZP6XSnf.js";import"./index.esm-C9Fad0dp.js";import{S as Q}from"./index-DPFbVGd7.js";import"./VueSelect.vue_vue_type_style_index_0_lang-B1s-zvio.js";import{D as Se}from"./index-DFq5MbAK.js";import{P as Me}from"./index-vl95iEIB.js";import{P as Ve}from"./index-C66Q9vME.js";import{a as Pe}from"./basic-tablle-data-AN7MRnVF.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as ke}from"./menu-CM83wd2-.js";import"./vue-cleave.min-DAvglPmz.js";import"./transition-CNElC_4N.js";import"./focus-management-Dc3XsveG.js";import"./keyboard-9WePWYgZ.js";import"./use-outside-click-CPWvQZIF.js";import"./hidden-BR_kr5_G.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-0CPOhxDd.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./tslib.es6-loakx6tV.js";import"./user-1-Dmhlt7-s.js";import"./user-4-_9lLfOE2.js";import"./user-6-Bk4CTUVR.js";import"./use-resolve-button-type-BwPomRAb.js";const Ue={class:"grid lg:grid-cols-3 gap-4"},Fe={class:"grid lg:grid-cols-3 gap-4"},Ne={class:"flex items-center"},Ae=a("span",{id:"type-document-error",class:"text-red-500",style:{display:"none"}},"Debe seleccionar un tipo de documento",-1),Le={key:0,class:"ml-auto text-red-500"},Oe=a("span",{id:"input-value-error",class:"text-red-500",style:{display:"none"}},"El número de documento es requerido",-1),Re={class:"space-y-4"},qe={class:"flex justify-end space-x-2"},ze=a("span",{id:"client-fullname-error",class:"text-red-500",style:{display:"none"}},"El nombre del empleado es requerido",-1),Je={class:"grid lg:grid-cols-3 gap-4 grid-cols-1"},Ge={class:"form-group col-lg-12 form__footerBtn mt-4"},Ye={class:"text-right"},Ee={__name:"AddProject",emits:["createEmployeeList"],setup(b,{emit:f}){const _=i(""),$=i(""),p=f;let E=pe();const S=i([]),g=()=>{if(e.value.inputValue.length!==8){y.value=!0;return}P.get(`https://thtbackend-production.up.railway.app/api/v1/apidni/${e.value.inputValue}`).then(c=>{console.log("Respuesta de la API DNI:",c.data),e.value.clientFullname=`${c.data.nombres} ${c.data.apellidoPaterno} ${c.data.apellidoMaterno}`}).catch(c=>{console.error("Error al obtener datos del DNI:",c)})},u=()=>{P.get("https://thtbackend-production.up.railway.app/api/v1/jobs/list",T).then(c=>{const t=c.data.data;S.value=t.map(s=>({id:s.id,label:s.description}))}).catch(c=>{console.error("Error al obtener la lista de trabajos:",c)})},V=()=>{E.closeModal()},y=i(!1),C=i(""),T=W().headersMultipart();W().headers();const B=ie(),F=[{id:1,label:"DNI"},{id:2,label:"RUC"}],m=i("DNI"),e=i({jobSelected:"",typeDocumentSelected:"",inputValue:"",description:"",clientFullname:"",clientAddress:"",clientCellphone:"",clientTelephone:"",clientEmail:"",dateBirthday:"",statusSelected:"",sexSelected:""});e.value.typeDocumentSelected=m;const G=i(null);i(null);const ee=i(null),me=i(null),te=()=>{const c=new FormData,t=(k,U,ve,A)=>{if(k){const L=k.textContent.trim(),O=U.find(R=>R.label===L);O?(ve.value=O.id,A==="sexSelected"?_.value=O.label:A==="statusSelected"&&($.value=O.label),console.log(`Valor seleccionado para ${A}:`,O),c.append(A,O.id)):console.log(`No se ha seleccionado ningún ${A.toLowerCase()}.`)}else console.log(`No se ha encontrado ningún elemento para el ${A.toLowerCase()}.`)},s=document.querySelector(".job-select .vs__selected-options");t(s,S.value,G,"jobSelected");const n=document.querySelector(".sexo-select .vs__selected-options");t(n,ne,ee,"sexSelected");const r=document.querySelector(".estado-select .vs__selected-options");t(r,se,me,"statusSelected");const M=F.find(k=>k.label===m.value);M&&(e.value.typeDocumentSelected=M.id),e.value.jobSelected=G.value,e.value.sexSelected=_.value,e.value.statusSelected=$.value,console.log(e.value.typeDocumentSelected);let K=!1;e.value.inputValue?document.getElementById("input-value-error").style.display="none":(document.getElementById("input-value-error").style.display="block",K=!0),e.value.clientFullname?document.getElementById("client-fullname-error").style.display="none":(document.getElementById("client-fullname-error").style.display="block",K=!0),!K&&(console.log(e.value.typeDocumentSelected),c.append("companyjob_id",e.value.jobSelected),c.append("typedocument_id",e.value.typeDocumentSelected),c.append("fullname",e.value.clientFullname),c.append("document",e.value.inputValue),c.append("address",e.value.clientAddress),c.append("email",e.value.clientEmail),c.append("telephone",e.value.clientTelephone),c.append("cellphone",e.value.clientCellphone),c.append("date_birthday",e.value.dateBirthday),c.append("sex",e.value.sexSelected),c.append("status",e.value.statusSelected),P.post("https://thtbackend-production.up.railway.app/api/v1/employees/create",c,{...T}).then(k=>{console.log("Success:",k.data),p("createEmployeeList"),V(),B.success(k.data.message)}).catch(k=>{console.error("Error:",k)}))},le=()=>{P.post("https://thtbackend-production.up.railway.app/api/v1/jobs/create",{description:C.value},{...T}).then(c=>{console.log("Success:",c.data),B.success(c.data.message),u()}).catch(c=>{console.error("Error:",c),B.error("Error al crear el trabajo.")})},oe=()=>{e.value.inputValue&&(document.getElementById("input-value-error").style.display="none"),e.value.clientFullname&&(document.getElementById("client-fullname-error").style.display="none")},ae=()=>{N.value=!1},se=[{id:1,label:"Seleccione"},{id:2,label:"Soltero"},{id:3,label:"Casado"}],N=i(!1),H=()=>{N.value=!0},ne=[{id:1,label:"Seleccione"},{id:2,label:"Masculino"},{id:3,label:"Femenino"}];return fe(()=>{u(),console.log(e.value.typeDocumentSelected)}),Y(m,(c,t)=>{console.log("selected changed:",c)}),(c,t)=>{const s=D("flat-pickr");return v(),x("div",null,[o(l(_e),{activeModal:l(E).addmodal,onClose:l(E).closeModal,title:"Registrar nuevo empleado",sizeClass:"max-w-4xl",centered:""},{default:d(()=>[a("div",Ue,[a("form",{onSubmit:q(te,["prevent"]),class:"space-y-4 col-span-3"},[a("div",Fe,[a("div",Ne,[o(l(h),{label:"Puesto de trabajo",class:"flex-1"},{default:d(()=>[o(l(be),{options:S.value,modelValue:e.value.jobSelected,"onUpdate:modelValue":t[0]||(t[0]=n=>e.value.jobSelected=n),class:"w-full job-select"},null,8,["options","modelValue"])]),_:1}),a("button",{onClick:q(H,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),o(l(h),{label:"Tipo documento"},{default:d(()=>[o(l(Q),{options:F,modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),disabled:"",class:"type-document-select"},null,8,["modelValue"]),Ae]),_:1}),a("div",null,[o(l(h),{label:"N° Documento"},{default:d(()=>[o(l(X),{type:"text",placeholder:"DNI",modelValue:e.value.inputValue,"onUpdate:modelValue":t[2]||(t[2]=n=>e.value.inputValue=n),onInput:oe},{append:d(()=>[o(l(I),{text:"RENIEC",btnClass:"btn-outline-dark",onClick:q(g,["prevent"])})]),_:1},8,["modelValue"])]),_:1}),y.value?(v(),x("span",Le,"* Debe tener 8 dígitos")):w("",!0),Oe])]),N.value?(v(),J(l(ue),{key:0,title:"Nuevo Registro",class:"bg-slate-800",titleClass:"text-white",noborder:""},{default:d(()=>[a("div",Re,[o(l(X),{label:"Descripcion",name:"hi_Fullname",type:"text",placeholder:"Puesto de Trabajo",horizontal:"",prependIcon:"heroicons-outline:user",merged:"",modelValue:C.value,"onUpdate:modelValue":t[3]||(t[3]=n=>C.value=n)},null,8,["modelValue"]),a("div",qe,[o(l(I),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:ae}),o(l(I),{text:"Guardar",btnClass:"btn-dark",onClick:q(le,["prevent"])})])])]),_:1})):w("",!0),o(l(h),{label:"Nombre del empleado"},{default:d(()=>[o(l(z),{modelValue:e.value.clientFullname,"onUpdate:modelValue":t[4]||(t[4]=n=>e.value.clientFullname=n),placeholder:"Ingrese nombre del empleado",onInput:oe},null,8,["modelValue"]),ze]),_:1}),o(l(h),{label:"Dirección"},{default:d(()=>[o(l(xe),{modelValue:e.value.clientAddress,"onUpdate:modelValue":t[5]||(t[5]=n=>e.value.clientAddress=n),placeholder:"Ingrese direción"},null,8,["modelValue"])]),_:1}),a("div",Je,[o(l(h),{label:"Celular"},{default:d(()=>[o(l(z),{modelValue:e.value.clientCellphone,"onUpdate:modelValue":t[6]||(t[6]=n=>e.value.clientCellphone=n),placeholder:"Ingrese celular"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Teléfono fijo"},{default:d(()=>[o(l(z),{modelValue:e.value.clientTelephone,"onUpdate:modelValue":t[7]||(t[7]=n=>e.value.clientTelephone=n),placeholder:"Ingrese telefóno fijo"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Correo electrónico"},{default:d(()=>[o(l(z),{modelValue:e.value.clientEmail,"onUpdate:modelValue":t[8]||(t[8]=n=>e.value.clientEmail=n),placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Fecha de nacimiento"},{default:d(()=>[o(s,{modelValue:e.value.dateBirthday,"onUpdate:modelValue":t[9]||(t[9]=n=>e.value.dateBirthday=n),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Estado"},{default:d(()=>[o(l(be),{options:se,modelValue:e.value.statusSelected,"onUpdate:modelValue":t[10]||(t[10]=n=>e.value.statusSelected=n),class:"estado-select"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Sexo"},{default:d(()=>[o(l(be),{options:ne,modelValue:e.value.sexSelected,"onUpdate:modelValue":t[11]||(t[11]=n=>e.value.sexSelected=n),class:"sexo-select"},null,8,["modelValue"])]),_:1})])],32)]),a("div",Ge,[a("div",Ye,[o(l(I),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:V}),o(l(I),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:te})])])]),_:1},8,["activeModal","onClose"])])}}},He={class:"grid lg:grid-cols-3 gap-4"},Ke={class:"grid lg:grid-cols-3 gap-4"},Qe={class:"flex items-center"},We=a("span",{id:"type-document-error",class:"text-red-500",style:{display:"none"}},"Debe seleccionar un tipo de documento",-1),Xe={key:0,class:"ml-auto text-red-500"},Ze=a("span",{id:"input-value-error",class:"text-red-500",style:{display:"none"}},"El número de documento es requerido",-1),et={class:"space-y-4"},tt={class:"flex justify-end space-x-2"},lt=a("span",{id:"client-fullname-error",class:"text-red-500",style:{display:"none"}},"El nombre del empleado es requerido",-1),ot={class:"grid lg:grid-cols-3 gap-4 grid-cols-1"},at={class:"form-group col-lg-12 form__footerBtn mt-4"},st={class:"text-right"},je={__name:"EditProject",props:{activeModal:Boolean,employeeData:Object},emits:["close","updateEmployeeList"],setup(b,{emit:f}){const _=b,$=f,p=()=>{$("close")},E=i(""),S=i("");pe();const g=i([]),u=()=>{if(e.value.inputValue.length!==8){y.value=!0;return}P.get(`https://thtbackend-production.up.railway.app/api/v1/apidni/${e.value.inputValue}`).then(t=>{console.log("Respuesta de la API DNI:",t.data),e.value.clientFullname=`${t.data.nombres} ${t.data.apellidoPaterno} ${t.data.apellidoMaterno}`}).catch(t=>{console.error("Error al obtener datos del DNI:",t)})},V=()=>{P.get("https://thtbackend-production.up.railway.app/api/v1/jobs/list",T).then(t=>{const s=t.data.data;g.value=s.map(n=>({id:n.id,label:n.description}))}).catch(t=>{console.error("Error al obtener la lista de trabajos:",t)})},y=i(!1),C=i(""),T=W().headersMultipart();W().headers();const B=ie(),F=[{id:1,label:"DNI"},{id:2,label:"RUC"}],m=i(F[0].label),e=i({idEmploye:"",jobSelected:"",jobSelectedId:"",typeDocumentSelected:"",inputValue:"",description:"",clientFullname:"",clientAddress:"",clientCellphone:"",clientTelephone:"",clientEmail:"",dateBirthday:"",statusSelected:"",sexSelected:""});e.value.typeDocumentSelected=m;const G=i(null),ee=i(null),me=i(null),te=i(null),le=()=>{const t=new FormData,s=(U,ve,A,L)=>{if(U){const O=U.textContent.trim(),R=ve.find(Ie=>Ie.label===O);R?(A.value=R.id,L==="sexSelected"?E.value=R.label:L==="statusSelected"&&(S.value=R.label),console.log(`Valor seleccionado para ${L}:`,R),t.append(L,R.id)):console.log(`No se ha seleccionado ningún ${L.toLowerCase()}.`)}else console.log(`No se ha encontrado ningún elemento para el ${L.toLowerCase()}.`)},n=document.querySelector(".job-select .vs__selected-options");s(n,g.value,G,"jobSelected");const r=document.querySelector(".type-document-select .vs__selected-options");s(r,F,ee,"typeDocumentSelected");const M=document.querySelector(".sexo-select .vs__selected-options");s(M,c,me,"sexSelected");const K=document.querySelector(".estado-select .vs__selected-options");s(K,N,te,"statusSelected"),e.value.jobSelected=G.value,console.log(e.value.sexSelected);let k=!1;e.value.typeDocumentSelected?document.getElementById("type-document-error").style.display="none":(document.getElementById("type-document-error").style.display="block",k=!0),e.value.inputValue?document.getElementById("input-value-error").style.display="none":(document.getElementById("input-value-error").style.display="block",k=!0),e.value.clientFullname?document.getElementById("client-fullname-error").style.display="none":(document.getElementById("client-fullname-error").style.display="block",k=!0),!k&&(t.append("companyjob_id",e.value.jobSelectedId),t.append("fullname",e.value.clientFullname),t.append("document",e.value.inputValue),t.append("address",e.value.clientAddress),t.append("email",e.value.clientEmail),t.append("telephone",e.value.clientTelephone),t.append("cellphone",e.value.clientCellphone),t.append("date_birthday",e.value.dateBirthday),t.append("sex",e.value.sexSelected),t.append("status",e.value.statusSelected),console.log(e.value.dateBirthday),P.post(`https://thtbackend-production.up.railway.app/api/v1/employees/edit/${e.value.idEmploye}`,t,T).then(U=>{console.log("Success:",U.data),$("updateEmployeeList"),p(),B.success(U.data.message)}).catch(U=>{console.error("Error:",U),B.error("Error al actualizar el empleado.")}))},oe=()=>{P.post("https://thtbackend-production.up.railway.app/api/v1/jobs/create",{description:C.value},{...T}).then(t=>{console.log("Success:",t.data),B.success(t.data.message),V()}).catch(t=>{console.error("Error:",t),B.error("Error al crear el trabajo.")})},ae=()=>{e.value.typeDocumentSelected&&(document.getElementById("type-document-error").style.display="none"),e.value.inputValue&&(document.getElementById("input-value-error").style.display="none"),e.value.clientFullname&&(document.getElementById("client-fullname-error").style.display="none")},se=()=>{H.value=!1},N=[{id:1,label:"Seleccione"},{id:2,label:"Soltero"},{id:3,label:"Casado"}],H=i(!1),ne=()=>{H.value=!0},c=[{id:1,label:"Seleccione"},{id:2,label:"Masculino"},{id:3,label:"Femenino"}];return fe(()=>{console.log(_),V(),console.log(e.value.typeDocumentSelected)}),Y(()=>_.employeeData,t=>{if(t){e.value.idEmploye=t.id,e.value.inputValue=t.document,e.value.clientFullname=t.fullname,e.value.clientAddress=t.address,e.value.clientCellphone=t.cellphone,e.value.clientTelephone=t.telephone,e.value.clientEmail=t.email,e.value.dateBirthday=t.date_birthday;const s=c.find(M=>M.label===t.sex),n=N.find(M=>M.label===t.status);s&&(e.value.sexSelected=s.label),n&&(e.value.statusSelected=n.label);const r=g.value.find(M=>M.id===t.companyjob_id);r?(e.value.jobSelected=r.label,e.value.jobSelectedId=r.id):(e.value.jobSelected="",e.value.jobSelectedId="")}}),Y(()=>e.value.jobSelected,t=>{const s=g.value.find(n=>n.label===t);s&&(e.value.jobSelectedId=s.id,console.log(e.value.jobSelectedId))}),Y(()=>e.value.sexSelected,t=>{const s=c.find(n=>n.label===t);s&&(e.value.sexSelected=s.label,console.log(e.value.sexSelected))}),Y(()=>e.value.statusSelected,t=>{const s=N.find(n=>n.label===t);s&&(e.value.statusSelected=s.label,console.log(e.value.statusSelected))}),(t,s)=>{const n=D("flat-pickr");return v(),x("div",null,[o(l(_e),{activeModal:_.activeModal,onClose:p,title:"Actualizar Datos Empleado",sizeClass:"max-w-4xl",centered:""},{default:d(()=>[a("div",He,[a("form",{onSubmit:q(le,["prevent"]),class:"space-y-4 col-span-3"},[a("div",Ke,[a("div",Qe,[o(l(h),{label:"Puesto de trabajo",class:"flex-1"},{default:d(()=>[o(l(Q),{options:g.value,modelValue:e.value.jobSelected,"onUpdate:modelValue":s[0]||(s[0]=r=>e.value.jobSelected=r),class:"w-full job-select"},null,8,["options","modelValue"])]),_:1}),a("button",{onClick:q(ne,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),o(l(h),{label:"Tipo documento",class:"type-document-select"},{default:d(()=>[o(l(Q),{options:F,modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=r=>m.value=r),disabled:""},null,8,["modelValue"]),We]),_:1}),a("div",null,[o(l(h),{label:"N° Documento"},{default:d(()=>[o(l(X),{type:"text",placeholder:"DNI",modelValue:e.value.inputValue,"onUpdate:modelValue":s[2]||(s[2]=r=>e.value.inputValue=r),onInput:ae},{append:d(()=>[o(l(I),{text:"RENIEC",btnClass:"btn-outline-dark",onClick:q(u,["prevent"])})]),_:1},8,["modelValue"])]),_:1}),y.value?(v(),x("span",Xe,"* Debe tener 8 dígitos")):w("",!0),Ze])]),H.value?(v(),J(l(ue),{key:0,title:"Nuevo Registro",class:"bg-slate-800",titleClass:"text-white",noborder:""},{default:d(()=>[a("div",et,[o(l(X),{label:"Descripcion",name:"hi_Fullname",type:"text",placeholder:"Puesto de Trabajo",horizontal:"",prependIcon:"heroicons-outline:user",merged:"",modelValue:C.value,"onUpdate:modelValue":s[3]||(s[3]=r=>C.value=r)},null,8,["modelValue"]),a("div",tt,[o(l(I),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:se}),o(l(I),{text:"Guardar",btnClass:"btn-dark",onClick:q(oe,["prevent"])})])])]),_:1})):w("",!0),o(l(h),{label:"Nombre del empleado"},{default:d(()=>[o(l(z),{modelValue:e.value.clientFullname,"onUpdate:modelValue":s[4]||(s[4]=r=>e.value.clientFullname=r),placeholder:"Ingrese nombre del empleado",onInput:ae},null,8,["modelValue"]),lt]),_:1}),o(l(h),{label:"Dirección"},{default:d(()=>[o(l(xe),{modelValue:e.value.clientAddress,"onUpdate:modelValue":s[5]||(s[5]=r=>e.value.clientAddress=r),placeholder:"Ingrese direción"},null,8,["modelValue"])]),_:1}),a("div",ot,[o(l(h),{label:"Celular"},{default:d(()=>[o(l(z),{modelValue:e.value.clientCellphone,"onUpdate:modelValue":s[6]||(s[6]=r=>e.value.clientCellphone=r),placeholder:"Ingrese celular"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Teléfono fijo"},{default:d(()=>[o(l(z),{modelValue:e.value.clientTelephone,"onUpdate:modelValue":s[7]||(s[7]=r=>e.value.clientTelephone=r),placeholder:"Ingrese telefóno fijo"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Correo electrónico"},{default:d(()=>[o(l(z),{modelValue:e.value.clientEmail,"onUpdate:modelValue":s[8]||(s[8]=r=>e.value.clientEmail=r),placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Fecha de nacimiento"},{default:d(()=>[o(n,{modelValue:e.value.dateBirthday,"onUpdate:modelValue":s[9]||(s[9]=r=>e.value.dateBirthday=r),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Estado"},{default:d(()=>[o(l(Q),{options:N,modelValue:e.value.statusSelected,"onUpdate:modelValue":s[10]||(s[10]=r=>e.value.statusSelected=r),class:"estado-select"},null,8,["modelValue"])]),_:1}),o(l(h),{label:"Sexo"},{default:d(()=>[o(l(Q),{options:c,modelValue:e.value.sexSelected,"onUpdate:modelValue":s[11]||(s[11]=r=>e.value.sexSelected=r),class:"sexo-select"},null,8,["modelValue"])]),_:1})])],32)]),a("div",at,[a("div",st,[o(l(I),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:p}),o(l(I),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:le})])])]),_:1},8,["activeModal"])])}}},ge=W().headers(),nt={components:{InputGroup:X,Button:I,Pagination:Me,EditProject:je,AddProject:Ee,Dropdown:Se,Icon:de,MenuItem:ke,Card:ue,ProgressBar:Ve},data(){return{searchTerm:"",advancedTable:Pe,current:1,perpage:6,employeeData:{},pageRange:10,showEditModal:!1,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:b=>{console.log(b),this.employeeData=b,this.showEditModal=!0}},{name:"delete",icon:"heroicons-outline:trash",doit:async b=>{try{await P.delete(`https://thtbackend-production.up.railway.app/api/v1/employees/delete/${b.id}`,ge),ie().success("Empleado eliminado correctamente",{timeout:1500}),this.listarEmpleados()}catch(f){console.error("Error al eliminar empleado:",f)}}}],columns:[{label:"Nombre completo",field:"fullname"},{label:"Documento",field:"document"},{label:"Puesto de Trabajo",field:"company_job.description"},{label:"Celular",field:"cellphone"},{label:"Action",field:"action"}],projects:[]}},methods:{async reloadCrmTable(){try{await this.listarEmpleados(),console.log("Empleados listado ga")}catch(b){console.error("Error al recargar la tabla de empleados:",b)}},async listarEmpleados(){try{const b=await P.get("https://thtbackend-production.up.railway.app/api/v1/employees/list",ge);this.projects=b.data.data,ie().success("Empleados listados correctamente",{timeout:1500}),console.log(this.projects)}catch(b){console.error("Error al obtener los datos de los empleados:",b)}}},async mounted(){try{await Promise.all([this.listarEmpleados()])}catch(b){console.error("Error al ejecutar operaciones asíncronas:",b)}}},dt={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},ct=a("h5",null,"Todos los Empleados",-1),rt={class:"flex items-center space-x-3"},it={key:0},ut={key:1},pt={key:2,class:"font-bold"},mt={key:3},vt={key:4,class:"action-btn text-end mr-3"},bt={class:"text-xl"},ft=["onClick"],ht={class:"text-base"},gt={class:"py-4 px-3"};function yt(b,f,_,$,p,E){const S=D("Button"),g=D("InputGroup"),u=D("Icon"),V=D("MenuItem"),y=D("Dropdown"),C=D("Pagination"),T=D("vue-good-table"),B=D("EditProject"),F=D("Card");return v(),x("div",null,[o(F,{noborder:""},{default:d(()=>[a("div",dt,[ct,a("div",rt,[o(S,{icon:"heroicons-outline:arrows-up-down",btnClass:"btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm",iconClass:"text-lg",onClick:E.reloadCrmTable},null,8,["onClick"]),o(g,{modelValue:p.searchTerm,"onUpdate:modelValue":f[0]||(f[0]=m=>p.searchTerm=m),placeholder:"Buscar Empleado",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])])]),o(T,{class:"-mx-6",columns:p.columns,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:p.projects,"pagination-options":{enabled:!0,perPage:p.perpage},"search-options":{enabled:!0,externalQuery:p.searchTerm},"sort-options":{enabled:!1}},{"table-row":d(m=>[m.column.field=="fullname"?(v(),x("span",it,j(m.row.fullname),1)):w("",!0),m.column.field=="document"?(v(),x("span",ut,j(m.row.document),1)):w("",!0),m.column.field=="company_job.description"?(v(),x("span",pt,j(m.row.company_job.description),1)):w("",!0),m.column.field=="cellphone"?(v(),x("span",mt,j(m.row.cellphone),1)):w("",!0),m.column.field=="action"?(v(),x("div",vt,[o(y,{classMenuItems:" w-[140px]"},{menus:d(()=>[(v(!0),x(ce,null,re(p.actions,(e,G)=>(v(),J(V,{key:G},{default:d(()=>[a("div",{onClick:ee=>e.doit(m.row),class:he(`
              
                ${e.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                 w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[a("span",ht,[o(u,{icon:e.icon},null,8,["icon"])]),a("span",null,j(e.name),1)],10,ft)]),_:2},1024))),128))]),default:d(()=>[a("div",bt,[o(u,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):w("",!0)]),"pagination-bottom":d(m=>[a("div",gt,[o(C,{total:p.projects.length,current:p.current,"per-page":p.perpage,pageRange:p.pageRange,onPageChanged:f[1]||(f[1]=e=>p.current=e),pageChanged:m.pageChanged,perPageChanged:m.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"]),o(B,{activeModal:p.showEditModal,onClose:f[2]||(f[2]=m=>p.showEditModal=!1),employeeData:p.employeeData,title:"Actualizar Datos Empleado",onUpdateEmployeeList:E.listarEmpleados},null,8,["activeModal","employeeData","onUpdateEmployeeList"])]),_:1})])}const _t=Ce(nt,[["render",yt]]),Z=b=>($e("data-v-34df6e87"),b=b(),Te(),b),xt={class:"grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},St={class:"flex justify-between items-end"},Vt={class:"flex space-x-4 items-center rtl:space-x-reverse"},Ct={class:"flex-none"},kt={class:"h-10 w-10 rounded-md text-lg bg-slate-100 text-slate-900 dark:bg-slate-600 dark:text-slate-200 flex flex-col items-center justify-center font-normal capitalize"},Et={class:"font-medium text-base leading-6"},jt={class:"dark:text-slate-200 text-slate-900 max-w-[160px] truncate"},It={class:"text-lg inline-flex flex-col items-center justify-center h-8 w-8 rounded-full bg-gray-500-f7 dark:bg-slate-900 dark:text-slate-400"},wt=["onClick"],Dt={class:"text-base"},$t={class:"text-slate-600 dark:text-slate-400 text-sm pt-4 pb-8"},Tt={class:"flex space-x-4 rtl:space-x-reverse"},Bt=Z(()=>a("span",{class:"block date-label"},"Start date",-1)),Mt={class:"block date-text"},Pt=Z(()=>a("span",{class:"block date-label"},"Start date",-1)),Ut={class:"block date-text"},Ft={class:"ltr:text-right rtl:text-left text-xs text-slate-600 dark:text-slate-300 mb-1 font-medium"},Nt={class:"grid grid-cols-2 gap-4 mt-6"},At=Z(()=>a("div",{class:"text-slate-400 dark:text-slate-400 text-sm font-normal mb-3"}," Assigned to ",-1)),Lt={class:"flex justify-start -space-x-1.5 rtl:space-x-reverse"},Ot=["src","alt"],Rt=Z(()=>a("div",{class:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-300 text-xs ring-2 ring-slate-100 dark:ring-slate-700 rounded-full h-6 w-6 flex flex-col justify-center items-center"}," +2 ",-1)),qt={class:"ltr:text-right rtl:text-left"},zt={class:"inline-flex items-center space-x-1 bg-danger-500 bg-opacity-[0.16] text-danger-500 text-xs font-normal px-2 py-1 rounded-full rtl:space-x-reverse"},Jt=Z(()=>a("span",null,"days left",-1)),Gt={__name:"Projects-grid",setup(b){const f=pe(),_=De(),$=ye(()=>f.projects),p=(S,g)=>{const u=new Date(S);return new Date(g).getDate()-u.getDate()},E=i([{name:"view",icon:"heroicons:eye",doit:()=>{_.push("/app/project-details")}},{name:"Edit",icon:"heroicons-outline:pencil-alt",doit:S=>{f.updateProject(S)}},{name:"Delete",icon:"heroicons-outline:trash",doit:S=>{f.removeProject(S)}}]);return(S,g)=>(v(),x("div",xt,[(v(!0),x(ce,null,re($.value,(u,V)=>(v(),J(l(ue),{bodyClass:"p-6",key:V},{default:d(()=>[a("header",St,[a("div",Vt,[a("div",Ct,[a("div",kt,j(u.name.charAt(0)+u.name.charAt(1)),1)]),a("div",Et,[a("div",jt,j(u.name),1)])]),a("div",null,[o(l(Se),{classMenuItems:" w-[130px]"},{menus:d(()=>[(v(!0),x(ce,null,re(E.value,(y,C)=>(v(),J(l(ke),{key:C},{default:d(()=>[a("div",{onClick:T=>y.doit(u),class:he(`
                
                  hover:bg-slate-900 dark:hover:bg-slate-600 dark:hover:bg-opacity-70 hover:text-white
                   w-full border-b border-b-gray-500 border-opacity-10   px-4 py-2 text-sm dark:text-slate-300  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center  capitalize rtl:space-x-reverse `)},[a("span",Dt,[o(l(de),{icon:y.icon},null,8,["icon"])]),a("span",null,j(y.name),1)],8,wt)]),_:2},1024))),128))]),default:d(()=>[a("span",It,[o(l(de),{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])]),a("div",$t,j(u.des),1),a("div",Tt,[a("div",null,[Bt,a("span",Mt,j(u.startDate),1)]),a("div",null,[Pt,a("span",Ut,j(u.endDate),1)])]),a("div",Ft,j(u.progress)+"% ",1),o(l(Ve),{value:u.progress,barColor:"bg-primary-500"},null,8,["value"]),a("div",Nt,[a("div",null,[At,a("div",Lt,[(v(!0),x(ce,null,re(u.assignto,(y,C)=>(v(),x("div",{class:"h-6 w-6 rounded-full ring-1 ring-slate-100",key:C},[a("img",{src:y.image,alt:y.title,class:"w-full h-full rounded-full"},null,8,Ot)]))),128)),Rt])]),a("div",qt,[a("span",zt,[a("span",null,[o(l(de),{icon:"heroicons-outline:clock"})]),a("span",null,j(p(u.startDate,u.endDate)),1),Jt])])])]),_:2},1024))),128))]))}},Yt=Ce(Gt,[["__scopeId","data-v-34df6e87"]]),Ht={class:"flex flex-wrap justify-between items-center mb-4"},Kt={class:"flex justify-end"},Bl={__name:"project-details",setup(b){const f=pe();let _=i("list");const $=()=>{f.openProject()},p=i(0),E=()=>{p.value=window.innerWidth};fe(()=>{window.addEventListener("resize",E),E()});const S=ye(()=>f.projects),g=i(!0),u=i(!1);return setTimeout(()=>{g.value=!1},1e3),Y(_,(V,y)=>{V!==y&&(V==="list"?(g.value=!0,u.value=!1):(g.value=!1,u.value=!0),setTimeout(()=>{g.value=!1,u.value=!1},1e3))}),(V,y)=>(v(),x("div",null,[a("div",Ht,[a("div",{class:he(["md:flex md:space-x-4 md:justify-end items-center rtl:space-x-reverse",p.value<768?"space-x-rb":""])},[o(l(I),{icon:"heroicons:list-bullet",text:"Vista de lista",btnClass:`${l(_)==="list"?"bg-slate-900 dark:bg-slate-700  text-white":" bg-white dark:bg-slate-800 dark:text-slate-300"}   h-min text-sm font-normal`,iconClass:" text-lg",onClick:y[0]||(y[0]=C=>Be(_)?_.value="list":_="list"),isLoading:g.value,isDisabled:g.value},null,8,["btnClass","isLoading","isDisabled"]),a("div",Kt,[o(l(I),{icon:"heroicons-outline:plus",text:"Agregar Empleado",btnClass:"btn-dark dark:bg-slate-800 h-min text-sm font-normal",iconClass:"text-lg",onClick:$,isLoading:l(f).isLoading},null,8,["isLoading"])])],2)]),g.value?(v(),J(l(we),{key:0,count:S.value.length},null,8,["count"])):w("",!0),l(_)==="grid"&&!u.value?(v(),J(l(Yt),{key:1})):w("",!0),l(_)==="list"&&!g.value?(v(),J(l(_t),{key:2})):w("",!0),o(l(Ee)),o(l(je))]))}};export{Bl as default};
