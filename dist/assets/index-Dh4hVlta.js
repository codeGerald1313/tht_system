import{b as O,u as h,s as u,z as T,d as i,e as r,g as b,k as s,B as f,o as n,f as t,a0 as y,q as _,F as x,m as V,l as j,w as C}from"./index-BFn_3Gdk.js";import{C as q}from"./index-COOwjdNO.js";import"./index-BffMpWx5.js";/* empty css                                              */import{T as c}from"./index-BL9tae9R.js";import{B as U}from"./index-CvW4wJPB.js";import{A as B}from"./index-CnTm6Nvn.js";import{u as $}from"./index.esm-DzE0gG6j.js";import{e as A}from"./data-gS5vGOMl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-cleave.min-ClV1fVcS.js";import"./tslib.es6-loakx6tV.js";import"./av-2-D6_jNZbn.js";const F={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},G={class:"lg:col-span-2 md:col-span-2 col-span-1"},M={class:"grid grid-cols-2 gap-4"},P={class:"flex gap-4"},Q={class:"w-1/2"},H={class:"w-1/2"},J={class:"lg:col-span-1 md:col-span-1 col-span-1"},K={key:0},W=["src"],X={key:1,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Y={key:2,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Z={class:"flex space-x-4"},ee={class:"h-[180px] w-[240px] mx-auto mt-6 rounded-md",key:"{i}"},ae=["src"],le={class:"mt-4"},oe=t("span",{class:"font-semibold"},"Se recomienda 280px * 230px .png",-1),se={class:"mt-5 flex justify-end"},_e={__name:"index",setup(te){const m=O(),g=h().headersMultipart(),k=h().headers(),v=u(null);u(0);const d=u([]),e=u({razonSocial:"",numeroRUC:"",nombreComercial:"",direccion:"",celular:"",telefono:"",correoElectronico:"",acercaDeLaEmpresa:"",queOfrecemos:"",image:v.value});async function w(){try{const l=new FormData;if(d.value.length>0){l.append("image",d.value[0]);const a=await f.post("https://thtsystemv2.tech/public/api/v1/company/5/update-image",l,g);m.success(a.data.message)}else{l.append("ruc",e.value.numeroRUC),l.append("social_reason",e.value.razonSocial),l.append("tradename",e.value.nombreComercial),l.append("address",e.value.direccion),l.append("email",e.value.correoElectronico),l.append("cellphone",e.value.celular),l.append("telephone",e.value.telefono),l.append("offers_description",e.value.queOfrecemos),l.append("activity_description",e.value.acercaDeLaEmpresa);const a=await f.post("https://thtsystemv2.tech/public/api/v1/company/5/update-fields",l,k);m.success(a.data.message)}}catch(l){console.error("Error al actualizar:",l),m.error("Error al actualizar")}}const E=u(!0),R=u(null);setTimeout(()=>{E.value=!1,R.value=!1},1e3);const D=async()=>{try{const l=await f.get("https://thtsystemv2.tech/public/api/v1/company/informacion",g);if(l.data.message){m.success(l.data.message,{timeout:3e3});const a=l.data.data[0];e.value.razonSocial=a.social_reason||"",e.value.numeroRUC=a.ruc||"",e.value.nombreComercial=a.tradename||"",e.value.direccion=a.address||"",e.value.celular=a.cellphone||"",e.value.telefono=a.telephone||"",e.value.correoElectronico=a.email||"",e.value.acercaDeLaEmpresa=a.activity_description||"",e.value.queOfrecemos=a.offers_description||"";const p=(a.url_image||"").split("/").pop();e.value.image=p||"";const N=await f.get(`https://thtsystemv2.tech/public/api/v1/company/image/${e.value.image}`,{responseType:"blob",...g});v.value=URL.createObjectURL(N.data)}}catch(l){console.error("Error fetching data:",l),m.error("Ocurrió un error al obtener los datos")}};function I(l){d.value=l.map(a=>Object.assign(a,{preview:URL.createObjectURL(a)}))}const{getRootProps:z,getInputProps:L,...re}=$({onDrop:I}),S=()=>{};return T(async()=>{D()}),(l,a)=>(n(),i("div",null,[r(s(q),{title:"Información Empresa - Guaros Group"},{default:b(()=>[t("form",{onSubmit:C(w,["prevent"])},[t("div",F,[t("div",G,[t("div",M,[r(s(c),{modelValue:e.value.razonSocial,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.razonSocial=o),label:"Razón social",placeholder:"Ingrese Razón social",disabled:""},null,8,["modelValue"]),r(s(c),{modelValue:e.value.numeroRUC,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.numeroRUC=o),label:"N° RUC",placeholder:"Ingrese N° RUC",disabled:""},null,8,["modelValue"]),r(s(c),{modelValue:e.value.nombreComercial,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.nombreComercial=o),label:"Nombre comercial",placeholder:"Ingrese nombre comercial"},null,8,["modelValue"]),r(s(c),{modelValue:e.value.direccion,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.direccion=o),label:"Dirección",placeholder:"Ingrese direción"},null,8,["modelValue"]),t("div",P,[t("div",Q,[r(s(c),{modelValue:e.value.celular,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.celular=o),label:"Celular",placeholder:"N° Celular"},null,8,["modelValue"])]),t("div",H,[r(s(c),{modelValue:e.value.telefono,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.telefono=o),label:"Teléfono",placeholder:"N° Teléfono"},null,8,["modelValue"])])]),r(s(c),{modelValue:e.value.correoElectronico,"onUpdate:modelValue":a[6]||(a[6]=o=>e.value.correoElectronico=o),label:"Correo electrónico",placeholder:"Ingrese correo electrónico"},null,8,["modelValue"]),r(s(c),{modelValue:e.value.acercaDeLaEmpresa,"onUpdate:modelValue":a[7]||(a[7]=o=>e.value.acercaDeLaEmpresa=o),label:"Acerca de la empresa",placeholder:"Ingrese detalle acerca la empresa"},null,8,["modelValue"]),r(s(c),{modelValue:e.value.queOfrecemos,"onUpdate:modelValue":a[8]||(a[8]=o=>e.value.queOfrecemos=o),label:"¿Qué ofrecemos?",placeholder:"Ingresar detalle de lo que se ofrecemos"},null,8,["modelValue"])])]),t("div",J,[t("div",y(s(z)(),{class:["w-full text-center border-dashed border border-secondary-500 rounded-md py-[52px] flex flex-col justify-center items-center",d.value.length===0?"cursor-pointer":" pointer-events-none"]}),[d.value.length===0?(n(),i("div",K,[t("input",y(s(L)(),{class:"hidden"}),null,16),v.value?(n(),i("img",{key:0,src:v.value,alt:"Imagen de la empresa",class:"mx-auto mb-4 object-cover h-[156px] w-[280px] rounded-md"},null,8,W)):_("",!0),l.isDragActive?(n(),i("p",X," Drop the files here ... ")):(n(),i("p",Y," Seleccionar Imagen "))])):_("",!0),t("div",Z,[(n(!0),i(x,null,V(d.value,(o,p)=>(n(),i("div",{key:p,class:"mb-4 flex-none"},[t("div",ee,[t("img",{src:o.preview,class:"object-cover h-full w-full block rounded-md"},null,8,ae)])]))),128))])],16),t("div",le,[(n(!0),i(x,null,V(s(A),(o,p)=>(n(),j(s(B),{type:o.type,key:p,dismissible:"",icon:o.icon,class:"mb-5 mt-3"},{default:b(()=>[oe]),_:2},1032,["type","icon"]))),128))]),t("div",se,[r(s(U),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:C(S,["prevent"])}),r(s(U),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark"})])])])],32)]),_:1})]))}};export{_e as default};
