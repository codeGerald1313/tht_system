import{_ as C,a as x,b as ye}from"./tslib.es6-loakx6tV.js";import{s as k,y as be,r as Ee,z as Fe,I as we,C as z,ag as Oe}from"./index-CyQKzwXM.js";var Ae=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function _(e,r){var n=Ce(e);if(typeof n.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof r=="string"?r:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Ce(e){var r=e.name,n=r&&r.lastIndexOf(".")!==-1;if(n&&!e.type){var o=r.split(".").pop().toLowerCase(),a=Ae.get(o);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}var xe=[".DS_Store","Thumbs.db"];function Ie(e){return C(this,void 0,void 0,function(){return x(this,function(r){return[2,Le(e)&&e.dataTransfer?je(e.dataTransfer,e.type):Pe(e)]})})}function Le(e){return!!e.dataTransfer}function Pe(e){var r=Te(e.target)?e.target.files?N(e.target.files):[]:[];return r.map(function(n){return _(n)})}function Te(e){return e!==null}function je(e,r){return C(this,void 0,void 0,function(){var n,o;return x(this,function(a){switch(a.label){case 0:return e.items?(n=N(e.items).filter(function(i){return i.kind==="file"}),r!=="drop"?[2,n]:[4,Promise.all(n.map(Re))]):[3,2];case 1:return o=a.sent(),[2,J(ee(o))];case 2:return[2,J(N(e.files).map(function(i){return _(i)}))]}})})}function J(e){return e.filter(function(r){return xe.indexOf(r.name)===-1})}function N(e){for(var r=[],n=0;n<e.length;n++){var o=e[n];r.push(o)}return r}function Re(e){if(typeof e.webkitGetAsEntry!="function")return U(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?re(r):U(e)}function ee(e){return e.reduce(function(r,n){return ye(r,Array.isArray(n)?ee(n):[n])},[])}function U(e){var r=e.getAsFile();if(!r)return Promise.reject(e+" is not a File");var n=_(r);return Promise.resolve(n)}function Se(e){return C(this,void 0,void 0,function(){return x(this,function(r){return[2,e.isDirectory?re(e):ke(e)]})})}function re(e){var r=e.createReader();return new Promise(function(n,o){var a=[];function i(){var c=this;r.readEntries(function(s){return C(c,void 0,void 0,function(){var D,u,f;return x(this,function(g){switch(g.label){case 0:if(s.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return D=g.sent(),n(D),[3,4];case 3:return u=g.sent(),o(u),[3,4];case 4:return[3,6];case 5:f=Promise.all(s.map(Se)),a.push(f),i(),g.label=6;case 6:return[2]}})})},function(s){o(s)})}i()})}function ke(e){return C(this,void 0,void 0,function(){return x(this,function(r){return[2,new Promise(function(n,o){e.file(function(a){var i=_(a,e.fullPath);n(i)},function(a){o(a)})})]})})}var ne=function(e,r){if(e&&r){var n=Array.isArray(r)?r:r.split(","),o=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return n.some(function(c){var s=c.trim().toLowerCase();return s.charAt(0)==="."?o.toLowerCase().endsWith(s):s.endsWith("/*")?i===s.replace(/\/.*$/,""):a===s})}return!0},p=function(){return p=Object.assign||function(r){for(var n,o=1,a=arguments.length;o<a;o++){n=arguments[o];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},p.apply(this,arguments)};function V(e,r){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)r.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n}function ze(e,r,n,o){function a(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function s(f){try{u(o.next(f))}catch(g){c(g)}}function D(f){try{u(o.throw(f))}catch(g){c(g)}}function u(f){f.done?i(f.value):a(f.value).then(s,D)}u((o=o.apply(e,r||[])).next())})}function Be(e,r){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,a,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(u){return function(f){return D([u,f])}}function D(u){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(n=0)),n;)try{if(o=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=r.call(e,n)}catch(f){u=[6,f],a=0}finally{o=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function $(e,r,n){if(n||arguments.length===2)for(var o=0,a=r.length,i;o<a;o++)(i||!(o in r))&&(i||(i=Array.prototype.slice.call(r,0,o)),i[o]=r[o]);return e.concat(i||Array.prototype.slice.call(r))}function Me(e){return e.includes("MSIE")||e.includes("Trident/")}function _e(e){return e.includes("Edge/")}function Ne(e){return e===void 0&&(e=window.navigator.userAgent),Me(e)||_e(e)}function Q(e){e.preventDefault()}function B(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function M(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}var $e="file-invalid-type",Ge="file-too-large",We="file-too-small",He="too-many-files",Ke={code:He,message:"Too many files"},Ye=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var r=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:$e,message:"File type must be ".concat(r)}};function A(e){return e!=null}var qe=ne.default,Je=qe||ne;function te(e,r){var n=e.type==="application/x-moz-file"||Je(e,r);return[n,n?null:Ye(r)]}var X=function(e){return{code:Ge,message:"File is larger than ".concat(e," bytes")}},Z=function(e){return{code:We,message:"File is smaller than ".concat(e," bytes")}};function ae(e,r,n){if(A(e.size)&&e.size)if(A(r)&&A(n)){if(e.size>n)return[!1,X(n)];if(e.size<r)return[!1,Z(r)]}else{if(A(r)&&e.size<r)return[!1,Z(r)];if(A(n)&&e.size>n)return[!1,X(n)]}return[!0,null]}function b(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(n){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return e.some(function(i){return!M(n)&&i&&i.apply(void 0,$([n],o,!1)),M(n)})}}function Ue(e){var r=e.files,n=e.accept,o=e.minSize,a=e.maxSize,i=e.multiple,c=e.maxFiles;return!i&&r.length>1||i&&c>=1&&r.length>c?!1:r.every(function(s){var D=te(s,n)[0],u=ae(s,o,a)[0];return D&&u})}var Ve={disabled:!1,getFilesFromEvent:Ie,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1};function Ze(e){e===void 0&&(e={});var r=k(p(p({},Ve),e));be(function(){return p({},e)},function(t){r.value=p(p({},r.value),t)});var n=k(),o=k(),a=Ee({isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]}),i=function(){o.value&&(a.isFileDialogActive=!0,o.value.value="",o.value.click())},c=function(){var t=r.value.onFileDialogCancel;a.isFileDialogActive&&setTimeout(function(){if(o.value){var l=o.value.files;l&&!l.length&&(a.isFileDialogActive=!1,typeof t=="function"&&t())}},300)};function s(){a.isFocused=!0}function D(){a.isFocused=!1}function u(){var t=r.value.noClick;t||(Ne()?setTimeout(i,0):i())}var f=k([]),g=function(t){if(n.value){var l=n.value.$el||n.value;l.contains(t.target)||(t.preventDefault(),f.value=[])}};Fe(function(){window.addEventListener("focus",c,!1);var t=r.value.preventDropOnDocument;t&&(document.addEventListener("dragover",Q,!1),document.addEventListener("drop",g,!1))}),we(function(){window.removeEventListener("focus",c,!1);var t=r.value.preventDropOnDocument;t&&(document.removeEventListener("dragover",Q),document.removeEventListener("drop",g))});function I(t){var l=r.value.noDragEventsBubbling;l&&t.stopPropagation()}function ie(t){return ze(this,void 0,void 0,function(){var l,v,d,m,h;return Be(this,function(E){switch(E.label){case 0:return l=r.value,v=l.getFilesFromEvent,d=l.noDragEventsBubbling,m=l.onDragEnter,t.preventDefault(),I(t),f.value=$($([],f.value,!0),[t.target],!1),B(t)?v?[4,v(t)]:[2]:[3,2];case 1:if(h=E.sent(),h||(h=[]),M(t)&&!d)return[2];a.draggedFiles=h,a.isDragActive=!0,m&&m(t),E.label=2;case 2:return[2]}})})}function oe(t){var l=r.value.onDragOver;if(t.preventDefault(),I(t),t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch{}return B(t)&&l&&l(t),!1}function ue(t){t.preventDefault(),I(t);var l=f.value.filter(function(m){if(!n.value)return!1;var h=n.value.$el||n.value;return h.contains(m)}),v=l.indexOf(t.target);if(v!==-1&&l.splice(v,1),f.value=l,!(l.length>0)){a.draggedFiles=[],a.isDragActive=!1;var d=r.value.onDragLeave;B(t)&&d&&d(t)}}function G(t){t.preventDefault(),I(t),f.value=[];var l=r.value,v=l.getFilesFromEvent,d=l.noDragEventsBubbling,m=l.accept,h=l.minSize,E=l.maxSize,P=l.multiple,T=l.maxFiles,j=l.onDrop,R=l.onDropRejected,S=l.onDropAccepted;if(B(t)){if(!v)return;Promise.resolve(v(t)).then(function(ve){if(!(M(t)&&!d)){var y=[],w=[];ve.forEach(function(O){var Y=te(O,m),ge=Y[0],pe=Y[1],q=ae(O,h,E),de=q[0],me=q[1];if(ge&&de)y.push(O);else{var De=[pe,me].filter(function(he){return he});w.push({file:O,errors:De})}}),(!P&&y.length>1||P&&T>=1&&y.length>T)&&(y.forEach(function(O){w.push({file:O,errors:[Ke]})}),y.splice(0)),a.acceptedFiles=y,a.fileRejections=w,j&&j(y,w,t),w.length>0&&R&&R(w,t),y.length>0&&S&&S(y,t)}})}a.isFileDialogActive=!1,a.isDragActive=!1,a.draggedFiles=[],a.acceptedFiles=[],a.fileRejections=[]}var F=function(t){return r.value.disabled?void 0:t},W=function(t){return r.value.noKeyboard?void 0:F(t)},L=function(t){return r.value.noDrag?void 0:F(t)},le=function(t){t===void 0&&(t={});var l=t.onFocus,v=t.onBlur,d=t.onClick,m=t.onDragEnter,h=t.onDragenter,E=t.onDragOver,P=t.onDragover,T=t.onDragLeave,j=t.onDragleave,R=t.onDrop,S=V(t,["onFocus","onBlur","onClick","onDragEnter","onDragenter","onDragOver","onDragover","onDragLeave","onDragleave","onDrop"]);return p(p({onFocus:W(b(l,s)),onBlur:W(b(v,D)),onClick:F(b(d,u)),onDragenter:L(b(m,h,ie)),onDragover:L(b(E,P,oe)),onDragleave:L(b(T,j,ue)),onDrop:L(b(R,G)),ref:n},!r.value.disabled&&!r.value.noKeyboard?{tabIndex:0}:{}),S)},se=function(t){t.stopPropagation()};function fe(t){t===void 0&&(t={});var l=t.onChange,v=t.onClick,d=V(t,["onChange","onClick"]),m={accept:r.value.accept,multiple:r.value.multiple,style:"display: none",type:"file",onChange:F(b(l,G)),onClick:F(b(v,se)),autoComplete:"off",tabIndex:-1,ref:o};return p(p({},m),d)}var H=z(function(){return a.draggedFiles?a.draggedFiles.length:0}),K=z(function(){return H.value>0&&Ue({files:a.draggedFiles,accept:r.value.accept,minSize:r.value.minSize,maxSize:r.value.maxSize,multiple:r.value.multiple,maxFiles:r.value.maxFiles})}),ce=z(function(){return H.value>0&&!K.value});return p(p({},Oe(a)),{isDragAccept:K,isDragReject:ce,isFocused:z(function(){return a.isFocused&&!r.value.disabled}),getRootProps:le,getInputProps:fe,rootRef:n,inputRef:o,open:F(i)})}export{Ze as u};
