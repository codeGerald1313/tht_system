import{B as O}from"./index-DCMPjbua.js";import{C as V}from"./index-Hsd0Z0_R.js";import{F as H}from"./index-I9bOp0dW.js";import{I as w}from"./index-DCC49QXr.js";import{a as B}from"./basic-tablle-data-AN7MRnVF.js";import{u as E}from"./project-DZP6XSnf.js";import{T as I}from"./index-CwPxZwdQ.js";import{T as R}from"./index-BTHsGrD3.js";import{_ as P}from"./repeater-CE5eZg-v.js";import{V as S}from"./VueSelect-DI5dOEtm.js";import{I as D}from"./index-BcFOD9Ey.js";import{C as L}from"./index-lgafHr2M.js";import{S as N}from"./index-DPFbVGd7.js";import{u as G,q as j,G as q,J as f,d as n,e as s,h as b,c,o as r,f as t,t as g,p as d}from"./index-BLl1OigC.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-cleave.min-DAvglPmz.js";import"./user-1-Dmhlt7-s.js";import"./user-4-_9lLfOE2.js";import"./user-6-Bk4CTUVR.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./vee-validate.esm-CEUTxmiF.js";import"./VueSelect.vue_vue_type_style_index_0_lang-B1s-zvio.js";const x=G().headers(),U={beforeRouteEnter(o,e,i){const _=o.params.id,l=JSON.parse(o.params.otherData),m=l.observations,p=l.origintransfer_id;console.log("Id",_),console.log("Data",p),i(u=>{u.booking.observations=m,u.booking.tour_id=p})},components:{Button:O,VueSelect:S,id:null,otherData:null,Card:V,Checkbox:L,Textinput:R,Select:N,InputGroup:w,FromGroup:H,Icon:D,Textarea:I,Repeater:P},data(){return{advancedTable:B,store:null,cellClient:null,tours:[],agencyOptions:[],booking:{type_booking:"",user_id:"",tour_id:"",bookingorigin_id:"",arrivalplace_id:"",client_id:"",agency_id:"",origintransfer_id:"",code:"",correlative:"",date_arrival:"",time_arrival:"",nro_pax:"",is_reference_pax:"",nro_pax_childs:"",nro_pax_adults:"",nro_pax_olds:"",reference_voucher:"",observations:"",arrival_place:"",contact_emergency:"",telephone_emergency:"",reference_location:"",is_igv:"",igv:"",is_detail_subtotaltour:"",subtotal_tour:"",subtotal_hotel:"",subtotal_flight:"",subtotal_catalog:"",discount:"",total:"",total_paid:"",total_billing:"",is_grouped:"",description_grouped:"",is_checkin:"",is_checkout:"",is_postponed:"",user_id_postponed:"",postponed_description:"",text_amount:"",register_flight:"",is_favorite:"",is_breakfast:"",nro_breakfast:"",start_breakfast:"",end_breakfast:"",pending_tours:"",origintransfer:"",program_transfer:""},current:1,basicTableData:[{codigo:"HRS2024-000231",nombreHotel:"HOTEL POSADA LODGE (TARAPOTO)",detallehotel:"HAB. TRIPLE (AC) (2 hab. x 6 noches)",contacto:"Cel: 963122673"}],client:{document:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:"",date_birthday:""},modelValue:!1,perpage:3,show:!1,showEdit:!1,show2:!1,realizado:"--",pageRange:10,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:o=>{this.openModalEdit(o)}},{name:"delete",icon:"heroicons-outline:trash",doit:o=>{this.removeProject(o)}}],vehiculos:[{value:1,label:"Compartido"},{value:1,label:"Privado"}],turnos:[{value:1,label:"Full Day"},{value:2,label:"Mañana"},{value:3,label:"Tarde"},{value:4,label:"Noche"}],columns:[{label:"¿Es Abierto?",field:"abierto"},{label:"Tours Turístico",field:"tour"},{label:"Vehículo",field:"vehiculo"},{label:"Turno",field:"turno"},{label:"N° pax",field:"pasajero"},{label:"Fecha",field:"fecha"},{label:"Observación",field:"observation"},{label:"Realizado",field:"realizado"},{label:"Action",field:"action"}],columnsTraspase:[{label:"",field:"abierto"},{label:"N° pax",field:"pasajero"},{label:"Tours Turístico",field:"tour"},{label:"Vehículo",field:"vehiculo"},{label:"Turno",field:"turno"},{label:"Fecha Asigsnada",field:"fecha"},{label:"Precio corporativo	",field:"preciocorporativo"}],columnsReservaHotelExpense:[{label:"Habitacion",field:"habitacion"},{label:"N° PAX	",field:"pasajeross"},{label:"Cant. HAB",field:"cantidad"},{label:"Check-In",field:"checkin"},{label:"Check-out",field:"checkout"},{label:"#Noches",field:"noches"},{label:"Precio",field:"precio"},{label:"Descuento",field:"descuento"},{label:"Adicional",field:"adicional"},{label:"Observación",field:"observacion"},{label:"Subtotal",field:"subtotal"},{label:"",field:"action"}],selectedBooking:null,searchTerm:"",filteredOptions:[],bookingsOptions:[],bedroomOptions:[{value:"simple",label:"HAB. SIMPLE"},{value:"simple_ac",label:"HAB. SIMPLE (AC)"},{value:"matrimonial",label:"HAB. MATRIMONIAL"},{value:"matrimonial_ac",label:"HAB. MATRIMONIAL (AC)"},{value:"doble",label:"HAB. DOBLE"},{value:"doble_ac",label:"HAB. DOBLE (AC)"},{value:"triple",label:"HAB. TRIPLE"},{value:"triple_ac",label:"HAB. TRIPLE (AC)"},{value:"grupal",label:"HAB. GRUPAL"},{value:"grupal_ac",label:"HAB. GRUPAL (AC)"}],rows:[{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"}],selectedTours:[],columnsReservasAlojamiento:[{label:"Código",field:"codigo"},{label:"Nombre Hotel",field:"nombreHotel"},{label:"Detalle Hab.	",field:"detallehotel"},{label:"Action",field:"action"}]}},setup(o){const e=j(null);return q(()=>e.value,(i,_)=>{console.log("El valor ha cambiado de",_,"a",i)}),{modelValue:e}},methods:{handleSelectionChange(o){console.log("Valor seleccionado:",o)},handleCheckboxChange(o){console.log("Se seleccionó el tour con ID:",o);const e=this.selectedTours.indexOf(o);e!==-1?(this.selectedTours.splice(e,1),console.log(this.selectedTours)):(this.selectedTours.push(o),console.log(this.selectedTours))},handleGuardarTraspaso(){console.log("Valor de booking:",this.booking);const o={agency_id:this.booking.agency_id,origintransfer_id:this.booking.tour_id,observations:this.booking.observations,tours:this.selectedTours};f.post("https://thtbackend-production.up.railway.app/api/v1/bookings/create-traspase",o,x).then(e=>{console.log(e.data)}).catch(e=>{console.error("Error al guardar el traspaso:",e)})},filterOptions(){const o=this.searchTerm.toLowerCase();this.bookingsOptions&&(this.filteredOptions=this.bookingsOptions.filter(e=>e.label.toLowerCase().includes(o)),console.log(this.filteredOptions))}},watch:{modelValue(o,e){console.log("Valor seleccionado:",o)},"booking.tour_id":function(o,e){console.log("ID:",o),f.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/record/${o}`,x).then(i=>{this.tours=i.data.data.tours,this.booking.nro_pax=i.data.data.book.nro_pax,this.cellClient=i.data.data.book.client.cellphone,this.booking.reference_location=i.data.data.book.reference_location,console.log("Registro cargado:",this.tours)}).catch(i=>{console.error("Error al cargar el registro:",i)})}},created(){this.store=E()},mounted(){f.get("https://thtbackend-production.up.railway.app/api/v1/bookings/code-list",x).then(o=>{this.bookingsOptions=o.data.bookings.map(e=>({value:e.id,label:`${e.code}
${e.client}`})),this.bookingsOptions.length>0&&this.filterOptions()}).catch(o=>{console.error("Error al obtener las reservas:",o)}),f.get("https://thtbackend-production.up.railway.app/api/v1/agencies/list-formated",x).then(o=>{this.agencyOptions=o.data.agencies.map(e=>({value:e.id,label:`${e.firstName}
${e.document}`})),this.agencyOptions.length>0&&this.filterOptions()}).catch(o=>{console.error("Error al obtener las agencias:",o)})}},F={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},z={class:"flex-container"},J={class:"flex-item"},$={class:"flex-item"},X={class:"list space-y-8"},K={class:"flex space-x-3 rtl:space-x-reverse"},Q={class:"flex-none text-2xl text-slate-600 dark:text-slate-300"},W={class:"flex-1"},Y=t("div",{class:"uppercase text-xs text-slate-500 dark:text-slate-300 mb-1 leading-[12px]"}," N° paxs ",-1),Z={href:"mailto:someone@example.com",class:"text-base text-slate-600 dark:text-slate-50"},ee={class:"flex space-x-3 rtl:space-x-reverse"},oe={class:"flex-none text-2xl text-slate-600 dark:text-slate-300"},te={class:"flex-1"},le=t("div",{class:"uppercase text-xs text-slate-500 dark:text-slate-300 mb-1 leading-[12px]"}," Cel ",-1),ae={href:"tel:0189749676767",class:"text-base text-slate-600 dark:text-slate-50"},se={class:"flex space-x-3 rtl:space-x-reverse"},ie={class:"flex-none text-2xl text-slate-600 dark:text-slate-300"},ne={class:"flex-1"},re=t("div",{class:"uppercase text-xs text-slate-500 dark:text-slate-300 mb-1 leading-[12px]"}," Referencia ubicación ",-1),ce={class:"text-base text-slate-600 dark:text-slate-50"},de={key:0},pe={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},ue={key:1,class:"text-slate-500 dark:text-slate-400 block min-w-[208px]"},be={key:2,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},me={key:3,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},_e={key:4,class:"block w-full"},he={key:5},fe={key:6},ge={key:7},xe={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},ve=t("div",{class:"lg:col-span-1"},null,-1),ke={class:"lg:col-span-3 flex justify-end"};function Te(o,e,i,_,l,m){const p=c("Textinput"),u=c("FromGroup"),k=c("Select"),v=c("Icon"),C=c("Checkbox"),y=c("vue-good-table"),T=c("Button"),A=c("Card");return r(),n("div",null,[s(A,{class:"mb-0",title:"Registrar Traspaso"},{default:b(()=>[t("div",F,[t("div",z,[t("div",J,[s(u,{label:"Búsqueda de reserva "},{default:b(()=>[s(p,{modelValue:l.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=a=>l.searchTerm=a),onInput:m.filterOptions,type:"text",placeholder:"Ingrese el número de teléfono fijo"},null,8,["modelValue","onInput"])]),_:1})]),t("div",$,[s(u,{label:"Seleccionar Reserva"},{default:b(()=>[s(k,{modelValue:l.booking.tour_id,"onUpdate:modelValue":e[1]||(e[1]=a=>l.booking.tour_id=a),options:l.filteredOptions},null,8,["modelValue","options"])]),_:1})])]),s(u,null,{default:b(()=>[s(k,{modelValue:l.booking.agency_id,"onUpdate:modelValue":e[2]||(e[2]=a=>l.booking.agency_id=a),options:l.agencyOptions,label:"Agencia que va operar"},null,8,["modelValue","options"])]),_:1}),t("ul",X,[t("li",K,[t("div",Q,[s(v,{icon:"heroicons:envelope"})]),t("div",W,[Y,t("a",Z,g(l.booking.nro_pax),1)])]),t("li",ee,[t("div",oe,[s(v,{icon:"heroicons:phone-arrow-up-right"})]),t("div",te,[le,t("a",ae,g(l.cellClient),1)])]),t("li",se,[t("div",ie,[s(v,{icon:"heroicons:map"})]),t("div",ne,[re,t("div",ce,g(l.booking.reference_location),1)])])]),s(u,{label:"Observaciones"},{default:b(()=>[s(p,{modelValue:l.booking.observations,"onUpdate:modelValue":e[3]||(e[3]=a=>l.booking.observations=a),type:"text",placeholder:"Ingrese el número de teléfono fijo"},null,8,["modelValue"])]),_:1})]),s(y,{class:"-mx-6 mt-6 mb-5",columns:l.columnsTraspase,styleClass:" vgt-table  table-head   v-middle striped lesspadding2 listview",rows:this.tours,"pagination-options":{enabled:!1,perPage:l.perpage},"sort-options":{enabled:!1}},{"table-row":b(a=>[a.column.field=="abierto"?(r(),n("span",de,[t("div",pe,[s(C,{modelValue:l.selectedTours,"onUpdate:modelValue":e[4]||(e[4]=h=>l.selectedTours=h),onChange:h=>m.handleCheckboxChange(a.row.id)},null,8,["modelValue","onChange"])])])):d("",!0),a.column.field=="tour"?(r(),n("span",ue," Test base ")):d("",!0),a.column.field=="vehiculo"?(r(),n("span",be," Test base ")):d("",!0),a.column.field=="turno"?(r(),n("span",me," Test base ")):d("",!0),a.column.field=="pasajero"?(r(),n("span",_e,g(a.row.quantity),1)):d("",!0),a.column.field=="fecha"?(r(),n("span",he," Test base ")):d("",!0),a.column.field=="preciocorporativo"?(r(),n("span",fe,[s(p,{type:"text",placeholder:"Precio corporativo"})])):d("",!0),a.column.field=="realizado"?(r(),n("span",ge,[s(p,{type:"text",placeholder:"-",modelValue:l.realizado,"onUpdate:modelValue":e[5]||(e[5]=h=>l.realizado=h),disabled:""},null,8,["modelValue"])])):d("",!0)]),_:1},8,["columns","rows","pagination-options"]),t("div",xe,[ve,t("div",ke,[s(T,{text:"Cancelar",btnClass:"btn-light mr-2",onClick:e[6]||(e[6]=a=>o.closeModal())}),s(T,{type:"submit",text:"Guardar Traspaso",btnClass:"btn-dark",onClick:m.handleGuardarTraspaso},null,8,["onClick"])])])]),_:1})])}const Je=M(U,[["render",Te]]);export{Je as default};
