import{C as B}from"./index-CoHYOsAq.js";import{I as H}from"./index-DxXSMpKh.js";import{S}from"./index-Jp7OXFH1.js";import{T as O}from"./index-C6OqzQN-.js";import{C as P}from"./index-2iT3jdVW.js";import{B as F}from"./index-DOAnfiMc.js";import{F as E}from"./index-B8UWVO2a.js";import{q as R}from"./vue-tailwind-datepicker-Dofq1ohm.js";import{u as M,B as m,d as s,e as n,g as u,c as p,o as r,f as h,w as _,t as c,q as d}from"./index-CyQKzwXM.js";import{P as U}from"./index-BXlIw-0P.js";import{V as I}from"./VueSelect-CeaoYkHk.js";import{C as L}from"./VueSelect.vue_vue_type_style_index_0_lang-XABNT5P5.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as N,p as j,x as A,I as G,y as Y}from"./tabs-Diuzp1HA.js";import"./vue-cleave.min-BqMPJFk5.js";import"./keyboard-C8YEoqI_.js";import"./use-resolve-button-type-DXZUzXBT.js";import"./hidden-1JsWbmcm.js";import"./focus-management-DKnT3RdX.js";import"./micro-task-CxIZtCgj.js";const g=M().headers(),Q={components:{vSelect:L,VueSelect:I,Card:B,TabGroup:N,Textinput:O,FromGroup:E,VueTailwindDatePicker:R,Checkbox:P,Button:F,TabList:j,Tab:A,Pagination:U,TabPanels:G,TabPanel:Y,Select:S,Icon:H},data(){const l=new Date,a=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",t=new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{searchTerm:"",current:1,perpage:10,pageRange:10,selectedHotel:null,dateValue:null,selectedTypeBedroom:null,hotelsOptions:[{label:"Hotel A",value:"hotel_a_id"},{label:"Hotel B",value:"hotel_b_id"},{label:"Hotel C",value:"hotel_c_id"}],typeBedromsOptions:[{label:"Suite",value:"suite_id"},{label:"Standard",value:"standard_id"},{label:"Económica",value:"economic_id"}],branchOptions:[{value:1,label:"Caja  Principal"}],conceptOptions:[],conceptExpenseOptions:[],paymentOptions:[],documentTypeOptions:[{value:"tipo1",label:"Tipo 1"},{value:"tipo2",label:"Tipo 2"},{value:"tipo3",label:"Tipo 3"}],selectedBranch:1,selectedConcept:"",selectedPaymentMethod:"",selectedDocumentType:"",includeVoucher:!1,buttons:[{title:"Ingresos",icon:"heroicons-outline:currency-dollar",content:"Contenido de la pestaña Ingresos"},{title:"Egresos",icon:"heroicons-outline:arrow-circle-down",content:"Contenido de la pestaña Egresos"}],dateValue:{startDate:a,endDate:t},selectedTabIndex:null,ingresos:[],egresos:[],columns:[{label:"Codigo",field:"hotelsbooking"},{label:"Fecha de Entrada",field:"check_in"},{label:"Fecha de Salida",field:"check_out"},{label:" Cantidad",field:"cantidad"},{label:"Noches",field:"noches"},{label:"Precio",field:"price"},{label:"Cliente",field:"client"},{label:"Hotel",field:"hotel"},{label:"  Descripción de la Habitación",field:"decrip_abitacion"},{label:"Total ",field:"total"}],columnsExpense:[{label:"N° egreso",field:"NumeroIngreso"},{label:"Usuario",field:"Usuario"},{label:"Fecha",field:"Fecha"},{label:"Caja",field:"Caja"},{label:"Receptor",field:"Receptor"},{label:"Concepto",field:"Concepto"},{label:"Método pago	",field:"MetodoPago"},{label:"Monto ",field:"Monto"}],isVoucherChecked:!1}},methods:{async getData(){const l=this.selectedHotel?this.selectedHotel.label:null;try{const o=await m.get("https://thtsystemv2.tech/public/api/v1/exports-hotelsbooking/filters-reservas-hotel",{params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate,tradename:l,typebedroom_id:this.selectedTypeBedroom},...g});this.ingresos=Object.values(o.data)}catch(o){console.error("Error al obtener datos:",o)}},async downloadFile(){try{const l=this.selectedHotel?this.selectedHotel.label:null,a=(await m.get("https://thtsystemv2.tech/public/api/v1/export-reservas-hotel",{params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate,tradename:l,typebedroom_id:this.selectedTypeBedroom},responseType:"blob"})).request.responseURL,i=new URL(a),t=document.createElement("a");t.href=i,t.setAttribute("download","archivo.xlsx"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(l){console.error("Error al descargar el archivo:",l)}},async downloadFile2(){try{const o=(await m.get("https://thtsystemv2.tech/public/api/v1/export-money-excel-expense",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,branchoffice:this.selectedBranch,is_voucher_external:this.isVoucherChecked?1:0,concept_income:this.selectedConcept,payment_method:this.selectedPaymentMethod},responseType:"blob"})).request.responseURL,a=new URL(o),i=document.createElement("a");i.href=a,i.setAttribute("download","archivo.xlsx"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(l){console.error("Error al descargar el archivo:",l)}},toggleVoucher(){this.isVoucherChecked=!this.isVoucherChecked},async fetchTypeBedroms(){try{const o=(await m.get("https://thtsystemv2.tech/public/api/v1/typebedrooms/list",g)).data.data.map(a=>({value:a.id,label:a.description}));this.typeBedromsOptions=o}catch(l){console.error("Error al obtener datos:",l)}},async fetchHotels(){try{const o=(await m.get("https://thtsystemv2.tech/public/api/v1/exports-hotelsbooking/hotels",g)).data.map(a=>({value:a.hotelsbooking_id,label:a.tradename}));this.hotelsOptions=o}catch(l){console.error("Error al obtener datos:",l)}}},mounted(){this.fetchTypeBedroms(),this.fetchHotels()},watch:{selectedHotel(l,o){}}},z={class:"grid grid-cols-1 gap-5 charts"},J={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},K={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 mt-5"},W={class:"col-span-full flex justify-center items-center"},X={key:0,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},Z={key:1,class:"text-base text-gray-800 dark:text-gray-400 block min-w-[108px]"},$={key:2,class:"text-base text-gray-800 dark:text-gray-400 block min-w-[108px]"},ee={key:3,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[40px]"},te={key:4,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[40px]"},oe={key:5,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[80px]"},le={key:6,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},ae={key:7,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},se={key:8,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},ne={key:9,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[80px]"},re={class:"py-4 px-3"};function ie(l,o,a,i,t,b){const x=p("vSelect"),k=p("VueSelect"),w=p("VueTailwindDatePicker"),C=p("FromGroup"),y=p("Select"),f=p("Button"),v=p("Pagination"),V=p("vue-good-table"),T=p("Card");return r(),s("div",z,[n(T,{title:"Control de Reservas de Hotel"},{default:u(()=>[h("div",null,[h("div",J,[n(k,{label:"Buscar Hotel"},{default:u(()=>[n(x,{options:t.hotelsOptions,modelValue:t.selectedHotel,"onUpdate:modelValue":o[0]||(o[0]=e=>t.selectedHotel=e)},null,8,["options","modelValue"])]),_:1}),n(C,{label:"Rango de Fechas",name:"d1"},{default:u(()=>[n(w,{modelValue:t.dateValue,"onUpdate:modelValue":o[1]||(o[1]=e=>t.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),_:1}),n(y,{label:"Tipo de Habitación",name:"incomeConcept",options:t.typeBedromsOptions,modelValue:t.selectedTypeBedroom,"onUpdate:modelValue":o[2]||(o[2]=e=>t.selectedTypeBedroom=e)},null,8,["options","modelValue"])]),h("div",K,[h("div",W,[n(f,{icon:"heroicons-outline:filter",text:"Filtar",onClick:_(b.getData,["prevent"]),btnClass:"bg-green-500 text-white mr-4 text-sm",iconClass:"text-lg"},null,8,["onClick"]),n(y,{name:"documentType",options:t.documentTypeOptions,modelValue:t.selectedDocumentType,"onUpdate:modelValue":o[3]||(o[3]=e=>t.selectedDocumentType=e)},null,8,["options","modelValue"]),n(f,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",onClick:_(b.downloadFile,["prevent"]),iconClass:"text-lg"},null,8,["onClick"])])]),n(V,{class:"-mx-6 mt-5",columns:t.columns,rows:this.ingresos,"pagination-options":{enabled:!0,perPage:t.perpage},"search-options":{enabled:!0,externalQuery:t.searchTerm},"sort-options":{enabled:!1}},{"table-row":u(e=>[e.column.field=="hotelsbooking"?(r(),s("span",X,c(e.row.hotelsbooking.code),1)):d("",!0),e.column.field=="check_in"?(r(),s("span",Z,c(e.row.date_checkin),1)):d("",!0),e.column.field=="check_out"?(r(),s("span",$,c(e.row.date_checkout),1)):d("",!0),e.column.field=="cantidad"?(r(),s("span",ee,c(e.row.quantity),1)):d("",!0),e.column.field=="noches"?(r(),s("span",te,c(e.row.nights),1)):d("",!0),e.column.field=="price"?(r(),s("span",oe," S/. "+c(e.row.price),1)):d("",!0),e.column.field=="client"?(r(),s("span",le,c(e.row.hotelsbooking.client),1)):d("",!0),e.column.field=="hotel"?(r(),s("span",ae,c(e.row.hotelsbooking.hotel),1)):d("",!0),e.column.field=="decrip_abitacion"?(r(),s("span",se,c(e.row.room_descriptions),1)):d("",!0),e.column.field=="total"?(r(),s("span",ne," S/. "+c(e.row.total),1)):d("",!0)]),"pagination-bottom":u(e=>[h("div",re,[n(v,{total:t.ingresos.length,current:t.current,"per-page":t.perpage,pageRange:t.pageRange,onPageChanged:o[4]||(o[4]=D=>t.current=D),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1})])}const He=q(Q,[["render",ie]]);export{He as default};
