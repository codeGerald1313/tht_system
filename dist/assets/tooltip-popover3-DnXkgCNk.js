import{D as L}from"./index-Br1mhpyn.js";import{B as z}from"./index-DOAnfiMc.js";import{C as U}from"./index-CoHYOsAq.js";import{I as Y}from"./index-DxXSMpKh.js";import{I as Q}from"./index-BVBpVZEi.js";import{P as H}from"./index-BXlIw-0P.js";import{w as K}from"./window-Ds9AqdYU.js";import{M as W}from"./index-D1RHiM9F.js";import{u as X,B as f,b as h,d as n,e as l,g as i,c as u,o as a,f as t,F as y,m as x,l as R,p as w,t as d,n as k,q as g,h as S}from"./index-CyQKzwXM.js";import{q as Z}from"./vue-tailwind-datepicker-Dofq1ohm.js";import{_ as $}from"./index-TniBlGkW.js";import{w as A}from"./widget-bg-2-DZ1m5zGG.js";import ee from"./tooltip-popover2-DDqqgROt.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as se,p as oe,x as ae,I as ne,y as le}from"./tabs-Diuzp1HA.js";import{b as re}from"./menu-BlqYkBdn.js";import"./vue-cleave.min-BqMPJFk5.js";/* empty css                                              */import"./index-Jp7OXFH1.js";import"./transition-BehYXQjK.js";import"./focus-management-DKnT3RdX.js";import"./keyboard-C8YEoqI_.js";import"./use-outside-click-WivoOT8p.js";import"./hidden-1JsWbmcm.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-CLDwNzJK.js";import"./use-resolve-button-type-DXZUzXBT.js";const v=X().headers(),ie={mixins:[K],components:{Pagination:H,TabGroup:se,Accordion:$,widgetBg2:A,Traspasos:ee,TabList:oe,Tab:ae,TabPanels:ne,TabPanel:le,InputGroup:Q,Dropdown:L,Icon:Y,VueTailwindDatePicker:Z,Card:U,MenuItem:re,Button:z,Modal:W},data(){const s=new Date,_=new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",o=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{advancedTable:[],current:1,perpage:10,widgetBg2:A,show:!1,startDateVariable:"",endDateVariable:"",dateValue:{startDate:_,endDate:o},pageRange:5,searchTerm:"",actions:[{name:"delete",icon:"heroicons-outline:trash",doit:p=>{f.post("https://thtsystemv2.tech/public/api/v1/bookings/anular",{booking_id:p.id},{...v}).then(b=>{const C=b.data.message;h().success(C,{timeout:1500}),this.listarEmpleados()}).catch(b=>{console.error("Error al eliminar empleado:",b)})}}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Código",field:"code"},{label:"Agencia a Cargo		",field:"client_id"},{label:"Cliente Responsable	",field:"clientRes"},{label:"N° pax	",field:"nroPax"},{label:"Sobre tours	",field:"sobreTours"},{label:"Estado",field:"estadito"},{label:"Action",field:"action"}],agencies:[],faqmenus:[{title:"Recibidos"},{title:"Traspasos"}],items:[{title:"Escoger Agencia",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."},{title:"Tabla de Cuadre & Exports",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."}],items2:[{title:"Escoger Agencia",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."},{title:"Tabla de Cuadre & Exports",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."}],items3:[{title:"Escoger Agencia",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."},{title:"Tabla de Cuadre & Exports",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."}]}},methods:{async reloadCrmTable(){f.get(`https://thtsystemv2.tech/public/api/v1/bookings/list-recivied?start_date=${this.dateValue.startDate}&end_date=${this.dateValue.endDate}`,v).then(s=>{h().success(s.data.message),this.advancedTable=s.data.data}).catch(s=>{console.error(s),s.response&&s.response.status===404?h().info("No se encontraron reservas recibidas dentro del rango de fechas proporcionado."):h().error("Ocurrió un error al obtener las reservas."),this.advancedTable=[]})},async fetchData(){try{const s=await f.get("https://thtsystemv2.tech/public/api/v1/agencies/list",v);this.agencies=s.data.data}catch(s){console.error("Error al obtener los datos:",s)}},openModal(s){this.$router.push(`/app/reserve-preview/${s}`)},handleViewDetails(s,r){this.$router.push({name:"recibido-add",params:{id:s,fullname:r}})},handleViewDetailsTraspase(s,r){this.$router.push({name:"traspaso-add",params:{id:s,fullname:r}})},getShortName(s){return s.split(" ").slice(0,2).join(" ")}},watch:{dateValue(s,r){if(!s.startDate||!s.endDate)this.advancedTable=[];else{const _=s.startDate.split(" ")[0],T=s.endDate.split(" ")[0];f.get(`https://thtsystemv2.tech/public/api/v1/bookings/list-recivied?start_date=${_}&end_date=${T}`,v).then(o=>{h().success(o.data.message),this.advancedTable=o.data.data}).catch(o=>{console.error(o),o.response&&o.response.status===404?h().info("No se encontraron reservas recibidas dentro del rango de fechas proporcionado."):h().error("Ocurrió un error al obtener las reservas."),this.advancedTable=[]})}}},mounted(){f.get(`https://thtsystemv2.tech/public/api/v1/bookings/list-recivied?start_date=${this.dateValue.startDate}&end_date=${this.dateValue.endDate}`,v).then(s=>{h().success(s.data.message),this.advancedTable=s.data.data}).catch(s=>{console.error(s),s.response&&s.response.status===404?h().info("No se encontraron reservas recibidas dentro del rango de fechas proporcionado."):h().error("Ocurrió un error al obtener las reservas."),this.advancedTable=[]}),this.fetchData()}},ce={class:"grid gap-5 grid-cols-12"},de={class:"xl:col-span-2 lg:col-span-4 col-span-12 card-auto-height"},ue={class:"xl:col-span-10 lg:col-span-8 col-span-12"},pe={class:"my-custom-design"},he={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},me={class:"flex flex-col justify-center items-center h-full"},ge={class:"text-2xl font-medium text-white mb-2 text-center"},be={class:"block"},_e={class:"my-custom-design"},fe={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},ye={class:"lg:col-span-4 flex justify-start"},xe={class:"md:flex pb-6 items-center"},ve=t("h6",{class:"flex-1 md:mb-0 mb-3"},"Recibidos",-1),we={class:"-mx-6"},ke=["onClick"],Te={key:0,class:"text-success-600 font-bold"},Ce={key:1,class:"text-red-500 font-bold"},De={key:2,style:{"margin-top":"5px"},class:"font-bold"},Ve={key:3,style:{"margin-top":"5px"},class:"text-red-500 font-bold"},Pe={key:1,class:"text-slate-500 dark:text-slate-400"},Ie=t("br",null,null,-1),Me={class:"font-bold"},Re={class:"font-bold"},Se={key:5,class:"text-slate-500 dark:text-slate-400"},Ae={key:0,class:"bg-blue-200 py-1 px-2 rounded-full text-blue-600 font-semibold inline-block",style:{width:"160px"}},Be={key:1,class:"flex items-center text-yellow-600 bg-yellow-100 py-1 px-2 rounded-full",style:{width:"120px"}},Ne=t("svg",{class:"h-4 w-4 mr-2 fill-current",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M19.707 3.293a1 1 0 00-1.414 0l-10 10-4-4a1 1 0 10-1.414 1.414l5 5a1 1 0 001.414 0l11-11a1 1 0 000-1.414z","clip-rule":"evenodd"})],-1),Ee=t("span",{class:"flex items-center font-semibold"}," Completados ",-1),Oe=[Ne,Ee],Fe={key:2,class:"bg-red-200 py-1 px-2 rounded-full text-red-600 font-semibold inline-block",style:{width:"120px"}},qe={key:6,class:"text-slate-500 dark:text-slate-400"},Ge={key:0,class:"flex items-center bg-green-200 py-1 px-2 rounded-full"},Je=t("span",{class:"text-green-600 font-semibold"},"Confirmado",-1),je=[Je],Le={key:1,class:"text-red-600 font-semibold"},ze={key:2,class:"text-red-600 font-semibold"},Ue={key:3,class:"text-red-600 font-semibold"},Ye={key:7,class:"action-btn text-end mr-3"},Qe={class:"text-xl"},He=["onClick"],Ke={class:"text-base"},We={class:"py-4 px-3"},Xe={class:"my-custom-design"},Ze={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},$e={class:"flex flex-col justify-center items-center h-full"},et={class:"text-2xl font-medium text-white mb-2 text-center"},tt={class:"block"},st={class:"my-custom-design"},ot={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},at={class:"lg:col-span-4 flex justify-start"};function nt(s,r,_,T,o,p){const b=u("Icon"),C=u("Tab"),I=u("TabList"),M=u("Card"),D=u("Button"),B=u("InputGroup"),N=u("VueTailwindDatePicker"),E=u("MenuItem"),O=u("Dropdown"),F=u("Pagination"),q=u("vue-good-table"),V=u("Accordion"),P=u("TabPanel"),G=u("Traspasos"),J=u("TabPanels"),j=u("TabGroup");return a(),n("div",null,[l(j,null,{default:i(()=>[t("div",ce,[t("div",de,[l(M,null,{default:i(()=>[l(I,{class:"flex flex-col space-y-1 text-start items-start"},{default:i(()=>[(a(!0),n(y,null,x(o.faqmenus,(e,c)=>(a(),R(C,{key:c,as:"template"},{default:i(({selected:m})=>[t("button",{type:"button",class:w(["focus:ring-0 focus:outline-none space-x-2 text-sm flex items-center w-full transition duration-150 px-3 py-4 rounded-[6px] rtl:space-x-reverse",m?"bg-slate-100 dark:bg-slate-900 dark:text-white":"bg-white dark:bg-slate-800 dark:text-slate-300"])},[l(b,{icon:"heroicons:chevron-double-right-solid",class:w(["text-lg",m?" opacity-100":"opacity-50 dark:opacity-100"])},null,8,["class"]),t("span",null,d(e.title),1)],2)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",ue,[l(J,null,{default:i(()=>[l(P,null,{default:i(()=>[l(V,{items:o.items,parentClass:"space-y-5"},{customContentFirstItem:i(()=>[t("div",pe,[t("div",he,[(a(!0),n(y,null,x(o.agencies,(e,c)=>(a(),n("div",{class:"lg:col-span-1",key:c},[t("div",{class:"bg-no-repeat bg-cover bg-center p-5 rounded-[6px] relative",style:k({backgroundImage:"url("+o.widgetBg2+")",height:"200px"})},[t("div",me,[t("div",null,[t("h4",ge,[t("span",be,d(p.getShortName(e.fullname)),1)])]),t("div",null,[l(D,{icon:"heroicons-outline:receipt-refund",text:"Recibir",onClick:m=>p.handleViewDetails(e.id,e.fullname),btnClass:"btn-light bg-white btn-sm"},null,8,["onClick"])])])],4)]))),128))])])]),customContentSecondItem:i(()=>[t("div",_e,[t("div",fe,[t("div",ye,[l(M,{noborder:"",class:"w-full"},{default:i(()=>[t("div",xe,[ve,t("div",{class:w(["md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse",s.window.width<768?"space-x-rb":""])},[l(B,{modelValue:o.searchTerm,"onUpdate:modelValue":r[0]||(r[0]=e=>o.searchTerm=e),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"]),t("div",null,[l(N,{modelValue:o.dateValue,"onUpdate:modelValue":r[1]||(r[1]=e=>o.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),l(D,{icon:"heroicons-outline:arrows-up-down",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg",onClick:p.reloadCrmTable},null,8,["onClick"])],2)]),t("div",we,[l(q,{columns:o.columns,styleClass:" vgt-table  centered ",rows:o.advancedTable,"sort-options":{enabled:!1},"pagination-options":{enabled:!0,perPage:o.perpage},"search-options":{enabled:!0,externalQuery:o.searchTerm}},{"table-row":i(e=>[e.column.field==="code"?(a(),n("span",{key:0,class:"font-medium",onClick:c=>p.openModal(e.row.id),style:{display:"flex","flex-direction":"column"}},[e.row.is_checkout!==1?(a(),n("span",Te,d(e.row.code),1)):(a(),n("span",Ce,d(e.row.code)+"(Anulado)",1)),e.row.is_checkout!==1?(a(),n("span",De,"Reg: "+d(e.row.formatted_created_at),1)):(a(),n("span",Ve,"Reg: "+d(e.row.formatted_created_at),1))],8,ke)):g("",!0),e.column.field=="nroPax"?(a(),n("span",Pe,[S(d(e.row.nro_pax)+" ",1),Ie])):g("",!0),e.column.field=="clientRes"?(a(),n("span",{key:2,class:"text-slate-500 dark:text-slate-400",style:k({color:e.row.is_checkout===1?"red":"inherit",display:"flex",flexDirection:"column"})},[t("span",null,d(e.row.client.fullname),1),t("span",Me,d(e.row.client.document),1)],4)):g("",!0),e.column.field=="client_id"?(a(),n("span",{key:3,class:"text-slate-500 dark:text-slate-400",style:k({color:e.row.is_checkout===1?"red":"inherit",display:"flex",flexDirection:"column"})},[t("span",null,d(e.row.agency.fullname),1),t("span",Re,d(e.row.agency.document),1)],4)):g("",!0),e.column.field==="amount"?(a(!0),n(y,{key:4},x(e.row.program_transfer,(c,m)=>(a(),n("div",{key:m,style:{display:"flex","flex-direction":"column","margin-bottom":"10px"}},[t("span",null,d(c.description)+" ("+d(c.pivot.quantity)+" pax) "+d(c.pivot.date_assigned),1)]))),128)):g("",!0),e.column.field=="estadito"?(a(),n("span",Se,[e.row.is_checkout!==1&&e.row.pending_tours>0?(a(),n("span",Ae," Por Realizar "+d(e.row.pending_tours)+" Tours ",1)):e.row.is_checkout!==1?(a(),n("span",Be,Oe)):(a(),n("span",Fe," Anulados "))])):g("",!0),e.column.field=="sobreTours"?(a(),n("span",qe,[e.row.is_checkin===1?(a(),n("span",Ge,je)):e.row.is_checkout===1?(a(),n("span",Le," Reserva Anulada ")):e.row.is_checkin===0?(a(),n("span",ze," Pendiente ")):(a(),n("span",Ue," Reserva Anulada "))])):g("",!0),e.column.field=="action"&&e.row.is_checkout!==1?(a(),n("div",Ye,[l(O,{classMenuItems:" w-[140px]"},{menus:i(()=>[(a(!0),n(y,null,x(o.actions,(c,m)=>(a(),R(E,{key:m},{default:i(()=>[t("div",{onClick:lt=>c.doit(e.row),class:w(`
                
                  ${c.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[t("span",Ke,[l(b,{icon:c.icon},null,8,["icon"])]),t("span",null,d(c.name),1)],10,He)]),_:2},1024))),128))]),default:i(()=>[t("div",Qe,[l(b,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):g("",!0)]),"pagination-bottom":i(e=>[t("div",We,[l(F,{total:o.advancedTable.length,current:o.current,"per-page":o.perpage,pageRange:o.pageRange,onPageChanged:r[2]||(r[2]=c=>o.current=c),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:"",options:o.options},{default:i(()=>[S(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1})])])])]),_:1},8,["items"])]),_:1}),l(P,null,{default:i(()=>[l(V,{items:o.items2,parentClass:"space-y-5"},{customContentFirstItem:i(()=>[t("div",Xe,[t("div",Ze,[(a(!0),n(y,null,x(o.agencies,(e,c)=>(a(),n("div",{class:"lg:col-span-1",key:c},[t("div",{class:"bg-no-repeat bg-cover bg-center p-5 rounded-[6px] relative",style:k({backgroundImage:"url("+o.widgetBg2+")",height:"200px"})},[t("div",$e,[t("div",null,[t("h4",et,[t("span",tt,d(p.getShortName(e.fullname)),1)])]),t("div",null,[l(D,{icon:"heroicons-outline:play-pause",text:"Pasar",onClick:m=>p.handleViewDetailsTraspase(e.id,e.fullname),btnClass:"btn-light bg-white btn-sm"},null,8,["onClick"])])])],4)]))),128))])])]),customContentSecondItem:i(()=>[t("div",st,[t("div",ot,[t("div",at,[l(G,{class:"w-full"})])])])]),_:1},8,["items"])]),_:1}),l(P,null,{default:i(()=>[l(V,{items:o.items3,parentClass:"space-y-5"},null,8,["items"])]),_:1})]),_:1})])])]),_:1})])}const Bt=te(ie,[["render",nt]]);export{Bt as default};
