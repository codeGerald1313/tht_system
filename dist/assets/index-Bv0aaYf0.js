import{C as U}from"./index-Hsd0Z0_R.js";import{I as H}from"./index-BcFOD9Ey.js";import{S as G}from"./index-DPFbVGd7.js";import{T as j}from"./index-BTHsGrD3.js";import{C as q}from"./index-lgafHr2M.js";import{B as J}from"./index-DCMPjbua.js";import{F as Q}from"./index-I9bOp0dW.js";import{q as X}from"./vue-tailwind-datepicker-DbcSElnr.js";import{u as S,J as x,d as l,e as r,h as p,c as g,o,F as d,m as C,l as O,f as n,i as h,t as i,n as z,w as v,p as u}from"./index-BLl1OigC.js";import{P as Y}from"./index-vl95iEIB.js";import{S as K}from"./index-PQ3jKUI0.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as Z,p as $,x as ee,I as te,y as ne}from"./tabs-CkhIUISu.js";import"./vue-cleave.min-DAvglPmz.js";import"./keyboard-9WePWYgZ.js";import"./use-resolve-button-type-BwPomRAb.js";import"./hidden-BR_kr5_G.js";import"./focus-management-Dc3XsveG.js";import"./micro-task-CxIZtCgj.js";const V=S().headers();S().headersMultipart();const oe={components:{Switch:K,Card:U,TabGroup:Z,Textinput:j,FromGroup:Q,VueTailwindDatePicker:X,Checkbox:q,Button:J,TabList:$,Tab:ee,Pagination:Y,TabPanels:te,TabPanel:ne,Select:G,Icon:H},data(){const s=new Date,_=new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",t=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{searchTerm:"",current:1,perpage:10,pageRange:10,branchOptions:[{value:1,label:"Caja  Principal"}],conceptOptions:[],conceptExpenseOptions:[],paymentOptions:[],documentTypeOptions:[{value:1,label:"EXCEL"}],selectedBranch:null,selectedConcept:"",selectedPaymentMethod:"",selectedDocumentType:1,includeVoucher:!1,buttons:[{title:"Recibidos",icon:"heroicons-outline:currency-dollar",content:"Contenido de la pestaña Ingresos"},{title:"Traspasos",icon:"heroicons-outline:arrow-circle-down",content:"Contenido de la pestaña Egresos"},{title:"Recibidos & Traspasos",icon:"heroicons-outline:arrow-circle-down",content:"Contenido de la pestaña Egresos"}],dateValue:{startDate:_,endDate:t},selectedTabIndex:null,ingresos:[],egresos:[],incomeexpense:[],columns:[{label:"CÓDIGO	",field:"code"},{label:"AGENCIA A CARGO	",field:"agency_cargo"},{label:"CLIENTE RESPONSABLE	",field:"cliente_responsable"},{label:"N° PAX	",field:"nro_pax"},{label:"TOURS TURÍSTICOS	",field:"sobre_tours"}],columnsExpense:[{label:"CÓDIGO	",field:"codigo_traspaso"},{label:"AGENCIA OPERADOR	",field:"agencya_operator"},{label:"RESERVA	",field:"booking_reserve"},{label:"PROGRAMA	",field:"tours"}],columnsRecibidoAndTraspase:[{label:"CÓDIGO	",field:"codigo"},{label:"AGENCIA OPERADOR	",field:"agencyr"},{label:"RESERVA	",field:"booking_reserve"},{label:"PROGRAMA	",field:"tours"},{label:"CLIENTE RESPONSABLE	",field:"cliente_responsable"},{label:"N° PAX	",field:"nro_pax"},{label:"SOBRE TOURS	",field:"sobre_tours"}],isVoucherChecked:!1}},methods:{async getData(){try{const s=await x.get("https://thtbackend-production.up.railway.app/api/v1/exports-booking/filters-recibido",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,agency_id:this.selectedBranch},...V});this.ingresos=s.data,console.log(s)}catch(s){console.error("Error al obtener datos:",s)}},async getDataIncomeAndExpensePorMes(){try{const s=await x.get("https://thtbackend-production.up.railway.app/api/v1/exports-booking/filters-recibido-and-traspase",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,agency_id:this.selectedBranch},...V});this.incomeexpense=s.data,console.log(this.incomeexpense)}catch(s){console.error("Error al obtener datos:",s)}},async getDataExpense(){try{const s=await x.get("https://thtbackend-production.up.railway.app/api/v1/exports-booking/filters-traspase",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,agency_id:this.selectedBranch},...V});this.egresos=s.data,console.log(s)}catch(s){console.error("Error al obtener datos:",s)}},fetchAgencies(){x.get("https://thtbackend-production.up.railway.app/api/v1/agencies/list",V).then(s=>{this.branchOptions=s.data.data.map(a=>({value:a.id,label:a.fullname})),console.log(s)}).catch(s=>{console.error("Error al obtener las agencias:",s)})},async downloadFile(){try{const s=await x.get("https://thtbackend-production.up.railway.app/api/v1/export-booking-recibido-excel",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,agency_id:this.selectedBranch},responseType:"blob"});console.log(s);const a=s.request.responseURL,_=new URL(a),c=document.createElement("a");c.href=_,c.setAttribute("download","archivo.xlsx"),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),console.log("Descarga iniciada automáticamente.")}catch(s){console.error("Error al descargar el archivo:",s)}},async downloadFile2(){try{const s=await x.get("https://thtbackend-production.up.railway.app/api/v1/export-booking-traspaso-excel",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,agency_id:this.selectedBranch},responseType:"blob"});console.log(s);const a=s.request.responseURL,_=new URL(a),c=document.createElement("a");c.href=_,c.setAttribute("download","archivo.xlsx"),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),console.log("Descarga iniciada automáticamente.")}catch(s){console.error("Error al descargar el archivo:",s)}},async downloadFileIncomeAndExpense(){try{const s=await x.get("https://thtbackend-production.up.railway.app/api/v1/export-booking-mensual-recibido-and-traspaso",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,agency_id:this.selectedBranch},responseType:"blob"});console.log(s);const a=s.request.responseURL,_=new URL(a),c=document.createElement("a");c.href=_,c.setAttribute("download","archivo.xlsx"),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),console.log("Descarga iniciada automáticamente.")}catch(s){console.error("Error al descargar el archivo:",s)}},toggleVoucher(){this.isVoucherChecked=!this.isVoucherChecked,console.log(this.isVoucherChecked)}},mounted(){this.fetchAgencies()}},le={class:"grid grid-cols-1 gap-5 charts"},se=["onClick"],ae={class:"text-base relative top-[1px] ltr:mr-1 rtl:ml-1"},re={key:0,class:"text-slate-600 dark:text-slate-400 text-sm font-normal"},ie={class:"row"},ce={key:0},de={class:"grid lg:grid-cols-2 md:grid-cols-2 grid-cols-1 gap-5"},ue={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 mt-5"},pe={class:"col-span-full flex justify-center items-center"},me={key:0,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},ge={key:1,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},he={key:2,class:"text-slate-500 dark:text-slate-400"},be={key:3,class:"text-slate-500 dark:text-slate-400 block min-w-[128px]"},_e=n("br",null,null,-1),xe=["innerHTML"],fe=n("br",null,null,-1),ye=["innerHTML"],ke=n("br",null,null,-1),we=["innerHTML"],Ce={key:4,class:"text-slate-500 dark:text-slate-400"},ve={class:"py-4 px-3"},Te={key:1},Ve={class:"grid lg:grid-cols-2 md:grid-cols-2 grid-cols-1 gap-5"},De={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 mt-5"},Re={class:"col-span-full flex justify-center items-center"},Ee={key:0,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Pe={key:1,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Oe={key:2,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Le={key:3,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Ae={key:4,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Se=n("br",null,null,-1),Me=["innerHTML"],Ie=n("br",null,null,-1),Ne=["innerHTML"],Be=n("br",null,null,-1),Fe=["innerHTML"],Ue={class:"py-4 px-3"},He={key:2},Ge={class:"grid lg:grid-cols-2 md:grid-cols-2 grid-cols-1 gap-5"},je={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 mt-5"},qe={class:"col-span-full flex justify-center items-center"},Je={key:0,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Qe={key:1,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Xe={key:2,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},ze={key:3,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Ye={key:4,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Ke=n("br",null,null,-1),We=["innerHTML"],Ze=n("br",null,null,-1),$e=["innerHTML"],et=n("br",null,null,-1),tt=["innerHTML"],nt={key:5,class:"text-slate-500 dark:text-slate-400"},ot={class:"py-4 px-3"},lt={class:"space-y-6"},st={class:"flex space-x-3 items-center rtl:space-x-reverse"},at={class:"flex-none h-8 w-8 rounded-full bg-slate-800 dark:bg-slate-700 text-slate-300 flex flex-col items-center justify-center text-lg"},rt=n("div",{class:"flex-1 text-base text-slate-900 dark:text-white font-medium"}," Reportes de Reservas ",-1),it=n("div",{class:"text-slate-600 dark:text-slate-300 text-sm"}," Seleccione una opción de reporte ",-1);function ct(s,a,_,c,t,f){const L=g("Icon"),M=g("Tab"),I=g("TabList"),y=g("Select"),D=g("VueTailwindDatePicker"),R=g("FromGroup"),k=g("Button"),E=g("Pagination"),P=g("vue-good-table"),A=g("Card"),N=g("TabPanel"),B=g("TabPanels"),F=g("TabGroup");return o(),l("div",le,[r(A,{title:"Reportes de Reservas"},{default:p(()=>[r(F,null,{default:p(()=>[r(I,{class:"lg:space-x-8 md:space-x-4 space-x-0 rtl:space-x-reverse"},{default:p(()=>[(o(!0),l(d,null,C(t.buttons,(w,b)=>(o(),O(M,{key:b},{default:p(()=>[n("button",{class:z([{"text-primary-500":t.selectedTabIndex===b,"text-slate-500 dark:text-slate-300":t.selectedTabIndex!==b,"font-bold":t.selectedTabIndex===b,"font-normal":t.selectedTabIndex!==b},"inline-flex items-start text-sm mb-7 capitalize bg-white dark:bg-slate-800 ring-0 foucs:ring-0 focus:outline-none px-2 transition duration-150 before:transition-all before:duration-150 relative before:absolute before:left-1/2 before:bottom-[-6px] before:h-[1.5px] before:bg-primary-500 before:-translate-x-1/2"]),onClick:e=>t.selectedTabIndex=b},[n("span",ae,[r(L,{icon:w.icon},null,8,["icon"])]),h(" "+i(w.title),1)],10,se)]),_:2},1024))),128))]),_:1}),r(B,null,{default:p(()=>[(o(!0),l(d,null,C(t.buttons,(w,b)=>(o(),O(N,{key:b},{default:p(()=>[t.selectedTabIndex===b?(o(),l("div",re,[n("div",ie,[w.title==="Recibidos"?(o(),l("div",ce,[n("div",de,[r(y,{label:"Agencia",name:"branch",options:t.branchOptions,modelValue:t.selectedBranch,"onUpdate:modelValue":a[0]||(a[0]=e=>t.selectedBranch=e)},null,8,["options","modelValue"]),r(R,{label:"Rango de Fechas",name:"d1"},{default:p(()=>[r(D,{modelValue:t.dateValue,"onUpdate:modelValue":a[1]||(a[1]=e=>t.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),_:1})]),n("div",null,[n("div",ue,[n("div",pe,[r(k,{icon:"heroicons-outline:filter",text:"Filtar",onClick:v(f.getData,["prevent"]),btnClass:"bg-green-500 text-white mr-4 text-sm",iconClass:"text-lg"},null,8,["onClick"]),r(y,{name:"documentType",options:t.documentTypeOptions,modelValue:t.selectedDocumentType,"onUpdate:modelValue":a[2]||(a[2]=e=>t.selectedDocumentType=e)},null,8,["options","modelValue"]),r(k,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",onClick:v(f.downloadFile,["prevent"]),iconClass:"text-lg"},null,8,["onClick"])])])]),r(P,{class:"-mx-6 mt-5",columns:t.columns,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.ingresos,"pagination-options":{enabled:!0,perPage:t.perpage},"search-options":{enabled:!0,externalQuery:t.searchTerm},"sort-options":{enabled:!1}},{"table-row":p(e=>[e.column.field=="code"?(o(),l("span",me,i(e.row.code),1)):u("",!0),e.column.field=="agency_cargo"?(o(),l("span",ge,i(e.row.agency.tradename),1)):u("",!0),e.column.field=="nro_pax"?(o(),l("span",he,i(e.row.nro_pax),1)):u("",!0),e.column.field=="cliente_responsable"?(o(),l("span",be,[n("div",null,[e.row.client?(o(),l(d,{key:0},[h(" C- "+i(e.row.client.fullname),1),_e,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.client.document},null,8,xe)],64)):e.row.employee?(o(),l(d,{key:1},[h(" E- "+i(e.row.employee.fullname),1),fe,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.employee.document},null,8,ye)],64)):e.row.provider?(o(),l(d,{key:2},[h(" P- "+i(e.row.provider.fullname),1),ke,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.provider.document},null,8,we)],64)):(o(),l(d,{key:3},[h(" No hay información disponible ")],64))])])):u("",!0),e.column.field=="sobre_tours"?(o(),l("span",Ce,[n("ul",null,[(o(!0),l(d,null,C(e.row.tours,m=>(o(),l("li",{key:m.id},i(m.description),1))),128))])])):u("",!0)]),"pagination-bottom":p(e=>[n("div",ve,[r(E,{total:t.ingresos.length,current:t.current,"per-page":t.perpage,pageRange:t.pageRange,onPageChanged:a[3]||(a[3]=m=>t.current=m),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])):w.title==="Traspasos"?(o(),l("div",Te,[n("div",Ve,[r(y,{label:"Agencia",name:"branch",options:t.branchOptions,modelValue:t.selectedBranch,"onUpdate:modelValue":a[4]||(a[4]=e=>t.selectedBranch=e)},null,8,["options","modelValue"]),r(R,{label:"Rango de Fechas",name:"d1"},{default:p(()=>[r(D,{modelValue:t.dateValue,"onUpdate:modelValue":a[5]||(a[5]=e=>t.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),_:1})]),n("div",null,[n("div",De,[n("div",Re,[r(k,{icon:"heroicons-outline:filter",text:"Filtar",onClick:v(f.getDataExpense,["prevent"]),btnClass:"bg-green-500 text-white mr-4 text-sm",iconClass:"text-lg"},null,8,["onClick"]),r(y,{name:"documentType",options:t.documentTypeOptions,modelValue:t.selectedDocumentType,"onUpdate:modelValue":a[6]||(a[6]=e=>t.selectedDocumentType=e)},null,8,["options","modelValue"]),r(k,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",iconClass:"text-lg",onClick:v(f.downloadFile2,["prevent"])},null,8,["onClick"])])])]),r(P,{class:"-mx-6 mt-5",columns:t.columnsExpense,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.egresos,"pagination-options":{enabled:!0,perPage:t.perpage},"search-options":{enabled:!0,externalQuery:t.searchTerm},"sort-options":{enabled:!1}},{"table-row":p(e=>[e.column.field=="codigo_traspaso"?(o(),l("span",Ee,i(e.row.code),1)):u("",!0),e.column.field=="agencya_operator"?(o(),l("span",Pe,i(e.row.agency.tradename),1)):u("",!0),e.column.field=="booking_reserve"?(o(),l("span",Oe,i(JSON.parse(e.row.origintransfer).code),1)):u("",!0),e.column.field=="tours"?(o(),l("span",Le,[n("ul",null,[(o(!0),l(d,null,C(JSON.parse(e.row.program_transfer),m=>(o(),l("li",null,i(m.description),1))),256))])])):u("",!0),e.column.field=="Receptor"?(o(),l("span",Ae,[n("div",null,[e.row.client?(o(),l(d,{key:0},[h(" C- "+i(e.row.client.fullname),1),Se,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.client.document},null,8,Me)],64)):e.row.employee?(o(),l(d,{key:1},[h(" E- "+i(e.row.employee.fullname),1),Ie,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.employee.document},null,8,Ne)],64)):e.row.provider?(o(),l(d,{key:2},[h(" P- "+i(e.row.provider.fullname),1),Be,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.provider.document},null,8,Fe)],64)):(o(),l(d,{key:3},[h(" No hay información disponible ")],64))])])):u("",!0)]),"pagination-bottom":p(e=>[n("div",Ue,[r(E,{total:t.egresos.length,current:t.current,"per-page":t.perpage,pageRange:t.pageRange,onPageChanged:a[7]||(a[7]=m=>t.current=m),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])):w.title==="Recibidos & Traspasos"?(o(),l("div",He,[n("div",Ge,[r(y,{label:"Agencia",name:"branch",options:t.branchOptions,modelValue:t.selectedBranch,"onUpdate:modelValue":a[8]||(a[8]=e=>t.selectedBranch=e)},null,8,["options","modelValue"]),r(R,{label:"Rango de Fechas",name:"d1"},{default:p(()=>[r(D,{modelValue:t.dateValue,"onUpdate:modelValue":a[9]||(a[9]=e=>t.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),_:1})]),n("div",null,[n("div",je,[n("div",qe,[r(k,{icon:"heroicons-outline:filter",text:"Filtar",onClick:v(f.getDataIncomeAndExpensePorMes,["prevent"]),btnClass:"bg-green-500 text-white mr-4 text-sm",iconClass:"text-lg"},null,8,["onClick"]),r(y,{name:"documentType",options:t.documentTypeOptions,modelValue:t.selectedDocumentType,"onUpdate:modelValue":a[10]||(a[10]=e=>t.selectedDocumentType=e)},null,8,["options","modelValue"]),r(k,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",iconClass:"text-lg",onClick:v(f.downloadFileIncomeAndExpense,["prevent"])},null,8,["onClick"])])])]),r(P,{class:"-mx-6 mt-5",columns:t.columnsRecibidoAndTraspase,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.incomeexpense,"pagination-options":{enabled:!0,perPage:t.perpage},"search-options":{enabled:!0,externalQuery:t.searchTerm},"sort-options":{enabled:!1}},{"table-row":p(e=>{var m;return[e.column.field=="codigo"?(o(),l("span",Je,i(e.row.code),1)):u("",!0),e.column.field=="agencyr"?(o(),l("span",Qe,i(e.row.agency.tradename),1)):u("",!0),e.column.field=="booking_reserve"?(o(),l("span",Xe,i((m=JSON.parse(e.row.origintransfer))==null?void 0:m.code),1)):u("",!0),e.column.field=="tours"?(o(),l("span",ze,[n("ul",null,[(o(!0),l(d,null,C(JSON.parse(e.row.program_transfer),T=>(o(),l("li",null,i(T.description),1))),256))])])):u("",!0),e.column.field=="cliente_responsable"?(o(),l("span",Ye,[n("div",null,[e.row.client?(o(),l(d,{key:0},[h(" C- "+i(e.row.client.fullname),1),Ke,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.client.document},null,8,We)],64)):e.row.employee?(o(),l(d,{key:1},[h(" E- "+i(e.row.employee.fullname),1),Ze,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.employee.document},null,8,$e)],64)):e.row.provider?(o(),l(d,{key:2},[h(" P- "+i(e.row.provider.fullname),1),et,n("span",{class:"font-bold",innerHTML:"N° Doc "+e.row.provider.document},null,8,tt)],64)):(o(),l(d,{key:3},[h(" No hay información disponible ")],64))])])):u("",!0),e.column.field=="sobre_tours"?(o(),l("span",nt,[n("ul",null,[(o(!0),l(d,null,C(e.row.tours,T=>(o(),l("li",{key:T.id},i(T.description),1))),128))])])):u("",!0)]}),"pagination-bottom":p(e=>[n("div",ot,[r(E,{total:t.incomeexpense.length,current:t.current,"per-page":t.perpage,pageRange:t.pageRange,onPageChanged:a[11]||(a[11]=m=>t.current=m),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])):u("",!0)])])):(o(),O(A,{key:1},{default:p(()=>[n("div",lt,[n("div",st,[n("div",at,[r(L,{icon:"heroicons-outline:cash",class:"m-l-5"})]),rt]),it])]),_:1}))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])}const Et=W(oe,[["render",ct]]);export{Et as default};
