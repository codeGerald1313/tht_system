import{C as X}from"./index-Hsd0Z0_R.js";import{C as ae,w as se}from"./widget-bg-1-CmTzM4kg.js";import{c as ne,a as re,m as le,s as ie,b as ce,d as de}from"./data-Cl8j_It4.js";import{D as ue,_ as me}from"./SelectMonth-D6P3Lsyx.js";import{M as fe}from"./Map-C9C7dd27.js";import"./vue-tailwind-datepicker-DbcSElnr.js";import{I as J}from"./index-BcFOD9Ey.js";import{B as D}from"./index-DCMPjbua.js";import{d as pe}from"./dayjs.min-f9jiEfzB.js";import{M as H}from"./index-MSlXG-Ka.js";import{u as be}from"./project-DZP6XSnf.js";import{q as p,u as he,H as L,K as ge,G as _e,c as F,o as a,d as s,f as n,e as u,j as b,F as d,m as E,n as v,t as r,h,p as i,i as g,b as y,J as T}from"./index-BLl1OigC.js";import{w as ve}from"./window-Ds9AqdYU.js";import{u as U}from"./user-1-Dmhlt7-s.js";import{u as ke,a as W,b as G}from"./user-4-_9lLfOE2.js";import{u as ye,a as xe}from"./user-6-Bk4CTUVR.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-vl95iEIB.js";import"./index-DPFbVGd7.js";import"./basic-tablle-data-AN7MRnVF.js";import"./index-DFq5MbAK.js";import"./menu-CM83wd2-.js";import"./keyboard-9WePWYgZ.js";import"./use-outside-click-CPWvQZIF.js";import"./focus-management-Dc3XsveG.js";import"./use-resolve-button-type-BwPomRAb.js";import"./open-closed-0CPOhxDd.js";import"./listbox-DocmzjGv.js";import"./hidden-BR_kr5_G.js";import"./tslib.es6-loakx6tV.js";import"./transition-CNElC_4N.js";import"./micro-task-CxIZtCgj.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";const Ce={class:"flex flex-col justify-center items-center"},$e=n("h1",{class:"text-3xl font-bold mb-4"},"Cronograma de salidas",-1),Se={class:"flex flex-col justify-center items-center w-full mt-4"},De=n("span",{class:"mb-2"},"Seleccionar fecha",-1),Ee={class:"flex items-center",prependIcon:"heroicons-outline:search"},Te={class:"ml-3"},Fe={class:"grid md:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-3 mt-8"},Ae=["onClick"],Me={class:"block mb-6 text-sm text-slate-900 dark:text-white font-medium"},Pe={class:"block mb- text-2xl text-slate-900 dark:text-white font-medium mb-6"},Ie={class:"flex space-x-2 rtl:space-x-reverse"},je={class:"flex-1"},Ne=n("span",{class:"block mb-1 text-slate-600 dark:text-slate-300"},"Click para ver detalles",-1),Be={class:"grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 mt-6"},Re={class:"py-3 px-5"},Oe={key:0},ze={key:2,style:{"font-weight":"bold"}},Ye={key:3,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},Ve={key:4,class:"flex flex-col items-center"},Je={key:5},He={key:6},Le={key:7,class:"uppercase"},Ue={key:8},We={key:0},Ge={key:1},Xe={key:2,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},qe={key:3,class:"flex flex-col items-center"},Ke={key:4},Qe={key:5},Ze={key:6,class:"uppercase"},et={key:7},tt={__name:"Breadcrumbs2",setup(A){const _=p(null),x=he().headers();be();const C=p(j());function I(){const t=new Date,o=t.getFullYear(),l=t.getMonth(),c=String(t.getDate()).padStart(2,"0"),e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][l];return`${c} de ${e} de ${o}`}function j(){const t=new Date;return t.setHours(t.getHours()-5),t.toISOString().slice(0,10)}const w=p([]),M=p([]);L(()=>{const t=pe().format("YYYY-MM-DD");_.value=t});const q=ge(()=>P.value.map(t=>`${t.description} (${t.total} pax)`).join(", ")),K=[{label:"N° pax",field:"pasajero"},{label:"Vehículo",field:"vehiculo"},{label:"Turno",field:"turno"},{label:"Responsable y Código",field:"responsablecode"},{label:"Porforma",field:"proforma"},{label:"Hotel / Ubicacion",field:"hotelubi"},{label:"Teléfonos",field:"telephone"},{label:"Observaciones",field:"observaciones"},{label:"Deuda",field:"deuda"}],P=p([]),Q=[{label:"Nombre de Tours",field:"tourp"},{label:"N° pax",field:"pasajerop"},{label:"Proforma",field:"proformap"},{label:"Responsable y Código",field:"responsablecodep"},{label:"Hotel / Ubicacion",field:"hotelubip"},{label:"Teléfonos",field:"telephonep"},{label:"Observaciones",field:"observacionesp"},{label:"Deuda",field:"deudap"}],$=p(!1),S=p(!1),Z=async t=>{$.value=!$.value;const o=y();console.log(_.value);try{const l=await T.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/booking-tours/${t}`,{...x,params:{date:_.value}});if(l.data&&l.data.data&&l.data.data.length>0){w.value=l.data.data;const{tour_description:c,booking_tour_date_assigned:m,booking_nro_pax:e}=w.value[0],f=I(m);N.value=`Datos de salida | ${c} (${f}) ${e} PASAJEROS`,o.info("Tours Pendientes encontrados con éxito"),console.log(l)}else o.info("Este Tour no tiene Reservas Pendientes"),this.projects=[]}catch(l){o.error("Error al cargar las reservas pendientes para este tour o Este Tour no tiene Reservas Pendientes"),console.error("Error al llamar al método en el backend:",l),this.projects=[]}console.log("ID del registro:",t)},N=p(""),ee=async()=>{S.value=!S.value;const t=y();try{const o=await T.get("https://thtbackend-production.up.railway.app/api/v1/bookings/booking-tours-open",{...x,params:{date:_.value}});o.data&&o.data.data&&o.data.data.length>0?(M.value=o.data.data,t.info("Tours Pendientes encontrados con éxito"),console.log(M.value)):(t.info("Este Tour no tiene Reservas Pendientes"),this.projects=[])}catch(o){t.error("Error al cargar las reservas pendientes para este tour o Este Tour no tiene Reservas Pendientes"),console.error("Error al llamar al método en el backend:",o),this.projects=[]}console.log("gaa")},te=()=>{B()},k=p([]),B=()=>{T.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/cronograma/${_.value}`,x).then(t=>{const o=t.data.results;if(P.value=t.data.tours_open,o&&o.length>0)k.value=o.map((c,m)=>({id:c.id,title:`${c.description}`,count:`${c.total} PASAJEROS`,bg:z(m),text:"",percent:V(c.vehicle_shared),icon:Y(c.vehicle_shared),percentClass:"text-slate-500 dark:text-slate-400 font-bold"})),y().success("Tours normales y abiertos encontrados para este día");else{const l=y();(!o||o.length===0)&&(l.info("Para este día no hay salidas programadas"),k.value=[])}}).catch(t=>{console.error("Error fetching data:",t)})},R=t=>t.tours&&Array.isArray(t.tours)&&t.tours.length>0,O=t=>{if(t.tours&&Array.isArray(t.tours)&&t.tours.length>0){const o=t.tours.find(l=>l.id===t.tour_id);return o?o.id:null}return null},z=t=>{const o=["bg-yellow-500","bg-blue-500","bg-green-500","bg-purple-500","bg-red-500"];return o[t%o.length]},Y=t=>t>0?"heroicons:users":"heroicons:user",V=t=>t>0?`${t} Compartido${t>1?"s":""}`:"Privado",oe=[{title:"Reservas Abiertas(Pendientes de asignar fecha)",border:"border-info-500",color:"text-info-500",icon:"heroicons-outline:information-circle"}];return _e(C,async t=>{console.log("Nuevo valor del calendario:",t),_.value=t;try{const o=await T.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/cronograma/${t}`,x),l=o.data.results;if(P.value=o.data.tours_open,l&&l.length>0)k.value=l.map((m,e)=>({id:m.id,title:`${m.description}`,count:`${m.total} PASAJEROS`,bg:z(e),text:"",percent:V(m.vehicle_shared),icon:Y(m.vehicle_shared),percentClass:"text-slate-500 dark:text-slate-400 font-bold"})),y().success("Tours normales y abiertos encontrados para este día");else{const c=y();(!l||l.length===0)&&(c.info("Para este día no hay salidas programadas"),k.value=[])}console.log(k.value)}catch(o){console.error("Error fetching data:",o)}}),L(()=>{B()}),(t,o)=>{const l=F("flat-pickr"),c=F("router-link"),m=F("vue-good-table");return a(),s(d,null,[n("div",Ce,[$e,n("div",Se,[De,n("div",Ee,[u(b(D),{icon:"heroicons-outline:calendar-days",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm mr-3",iconClass:"text-lg"}),u(l,{class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"},modelValue:C.value,"onUpdate:modelValue":o[0]||(o[0]=e=>C.value=e)},null,8,["modelValue"]),n("div",Te,[u(b(D),{icon:"heroicons-outline:arrows-up-down",btnClass:"btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg",onClick:te})])])])]),n("div",Fe,[(a(!0),s(d,null,E(k.value,(e,f)=>(a(),s("div",{key:f,class:v([e.bg,"rounded-md p-4 bg-opacity-[0.15] dark:bg-opacity-25 relative z-[1]"]),onClick:st=>Z(e.id)},[n("span",Me,r(e.title),1),n("span",Pe,r(e.count),1),n("div",Ie,[n("div",{class:v(["flex-none text-4xl text-slate-600 dark:text-slate-300",e.text])},[u(b(J),{icon:e.icon},null,8,["icon"])],2),n("div",je,[n("span",{class:v(["block mb-[2px]",e.percentClass])},r(e.percent),3),Ne])])],10,Ae))),128))]),n("div",Be,[n("div",{onClick:ee},[(a(),s(d,null,E(oe,(e,f)=>u(b(X),{bodyClass:"p-0",key:f,noborder:""},{default:h(()=>[n("header",{class:v(["border-b px-4 pt-4 pb-3 flex items-center",e.border])},[n("span",{class:v(["text-3xl inline-block ltr:mr-2 rtl:ml-2",e.color])},[u(b(J),{icon:e.icon},null,8,["icon"])],2),n("h6",{class:v(["card-title mb-0",e.color])},r(e.title),3)],2),n("div",Re,r(q.value),1)]),_:2},1024)),64))]),u(b(H),{title:N.value,label:"Modal title",activeModal:$.value,onClose:o[1]||(o[1]=e=>$.value=!1),sizeClass:"max-w-6xl"},{default:h(()=>[u(m,{columns:K,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:w.value,"pagination-options":{enabled:!1},"sort-options":{enabled:!1}},{"table-row":h(e=>[e.column.field=="pasajero"?(a(),s("span",Oe,r(e.row.booking_nro_pax),1)):i("",!0),e.column.field=="vehiculo"?(a(),s("span",{key:1,class:v({"text-yellow-500":e.row.booking_tour_vehicle_tour===2,"text-blue-500":e.row.booking_tour_vehicle_tour===1})},r(e.row.booking_tour_vehicle_tour===2?"Privado":"Compartido"),3)):i("",!0),e.column.field=="turno"?(a(),s("span",ze,r(e.row.booking_tour_shift_tour===1?"Full Day":e.row.booking_tour_shift_tour===2?"Mañana":e.row.booking_tour_shift_tour===3?"Tarde":"Noche"),1)):i("",!0),e.column.field=="proforma"?(a(),s("span",Ye,r(e.row.booking_reference_voucher),1)):i("",!0),e.column.field=="responsablecode"?(a(),s("span",Ve,[n("span",null,r(e.row.client_fullname),1),u(c,{to:"reserve-preview/"+e.row.booking_id},{default:h(()=>[u(b(D),{btnClass:"btn-dark btn-sm"},{default:h(()=>[g(r(e.row.booking_code),1)]),_:2},1024)]),_:2},1032,["to"])])):i("",!0),e.column.field=="hotelubi"?(a(),s("span",Je,[n("div",null,[n("div",null,r(e.row.booking_reference_location),1)])])):i("",!0),e.column.field=="telephone"?(a(),s("span",He,r(e.row.client_cellphone),1)):i("",!0),e.column.field=="observaciones"?(a(),s("span",Le,[R(e.row)?(a(!0),s(d,{key:0},E(e.row.tours,f=>(a(),s(d,null,[f.id===O(e.row)?(a(),s(d,{key:0},[f.pivot.observation?(a(),s(d,{key:0},[g(r(f.pivot.observation),1)],64)):(a(),s(d,{key:1},[g(" - No hay información disponible ")],64))],64)):i("",!0)],64))),256)):(a(),s(d,{key:1},[g(" - No hay información disponible ")],64))])):i("",!0),e.column.field=="deuda"?(a(),s("span",Ue,r(e.row.deuda),1)):i("",!0)]),_:1},8,["rows"])]),_:1},8,["title","activeModal"]),u(b(H),{title:"RESERVAS ABIERTAS (Pendientes de asignar fechas)",label:"Modal title",activeModal:S.value,onClose:o[2]||(o[2]=e=>S.value=!1),sizeClass:"max-w-6xl"},{default:h(()=>[u(m,{columns:Q,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:M.value,"pagination-options":{enabled:!1},"sort-options":{enabled:!1}},{"table-row":h(e=>[e.column.field=="tourp"?(a(),s("span",We,r(e.row.tour_description),1)):i("",!0),e.column.field=="pasajerop"?(a(),s("span",Ge,r(e.row.booking_nro_pax),1)):i("",!0),e.column.field=="proformap"?(a(),s("span",Xe,r(e.row.booking_reference_voucher),1)):i("",!0),e.column.field=="responsablecodep"?(a(),s("span",qe,[n("span",null,r(e.row.client_fullname),1),u(c,{to:"reserve-preview/"+e.row.booking_id},{default:h(()=>[u(b(D),{btnClass:"btn-dark btn-sm"},{default:h(()=>[g(r(e.row.booking_code),1)]),_:2},1024)]),_:2},1032,["to"])])):i("",!0),e.column.field=="hotelubip"?(a(),s("span",Ke,[n("div",null,[n("div",null,r(e.row.booking_reference_location),1)])])):i("",!0),e.column.field=="telephonep"?(a(),s("span",Qe,r(e.row.client_cellphone),1)):i("",!0),e.column.field=="observacionesp"?(a(),s("span",Ze,[R(e.row)?(a(!0),s(d,{key:0},E(e.row.tours,f=>(a(),s(d,null,[f.id===O(e.row)?(a(),s(d,{key:0},[f.pivot.observation?(a(),s(d,{key:0},[g(r(f.pivot.observation),1)],64)):(a(),s(d,{key:1},[g(" - No hay información disponible ")],64))],64)):i("",!0)],64))),256)):(a(),s(d,{key:1},[g(" - No hay información disponible ")],64))])):i("",!0),e.column.field=="deudap"?(a(),s("span",et,r(e.row.deuda),1)):i("",!0)]),_:1},8,["rows"])]),_:1},8,["title","activeModal"])])],64)}}},ot={mixins:[ve],components:{Card:X,CompanyTable:ae,Map:fe,DropEvent:ue,SelectMonth:me,Breadcrumb:tt},data(){return{widget1:se,columnCharthome:ne,columnCharthomeDark:re,mostSales:le,fillterMap:"usa",statistics:[{name:ie,title:"Totel revenue",count:"3,564",bg:"bg-[#E5F9FF] dark:bg-slate-900	"},{name:ce,title:"Products sold",count:"564",bg:"bg-[#FFEDE5] dark:bg-slate-900	"},{name:de,title:"Growth",count:"+5.0%",bg:"bg-[#EAE5FF] dark:bg-slate-900	"}],activity:[{id:1,img:U},{id:2,img:ke},{id:3,img:W},{id:4,img:G},{id:5,img:ye},{id:6,img:xe},{id:7,img:U},{id:8,img:G},{id:9,img:W}]}},computed:{columnCharthomeComputed(){return{series:[{name:"Net Profit",data:[44,55,57,56,61,58,63,60,66]},{name:"Revenue",data:[76,85,101,98,87,105,91,114,94]},{name:"Free Cash Flow",data:[35,41,36,26,45,48,52,53,41]}],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,endingShape:"rounded",columnWidth:"45%"}},legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"12px",fontFamily:"Inter",offsetY:-30,markers:{width:8,height:8,offsetY:-1,offsetX:-5,radius:12},labels:{colors:this.$store.themeSettingsStore.isDark?"#CBD5E1":"#475569"},itemMargin:{horizontal:18,vertical:0}},title:{text:"Revenue Report",align:"left",offsetX:this.$store.themeSettingsStore.direction?"0%":0,offsetY:13,floating:!1,style:{fontSize:"20px",fontWeight:"500",fontFamily:"Inter",color:this.$store.themeSettingsStore.isDark?"#fff":"#0f172a"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},yaxis:{opposite:!!this.$store.themeSettingsStore.direction,labels:{style:{colors:this.$store.themeSettingsStore.isDark?"#CBD5E1":"#475569",fontFamily:"Inter"}}},xaxis:{categories:["Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],labels:{style:{colors:this.$store.themeSettingsStore.isDark?"#CBD5E1":"#475569",fontFamily:"Inter"}},axisBorder:{show:!1},axisTicks:{show:!1}},fill:{opacity:1},tooltip:{y:{formatter:function(A){return"$ "+A+" thousands"}}},colors:["#4669FA","#0CE7FA","#FA916B"],grid:{show:!0,borderColor:this.$store.themeSettingsStore.isDark?"#334155":"#E2E8F0",strokeDashArray:10,position:"back"},responsive:[{breakpoint:600,options:{legend:{position:"bottom",offsetY:8,horizontalAlign:"center"},plotOptions:{bar:{columnWidth:"80%"}}}}]}}}}};function at(A,_,x,C,I,j){const w=F("Breadcrumb");return a(),s("div",null,[u(w)])}const Ot=we(ot,[["render",at]]);export{Ot as default};
