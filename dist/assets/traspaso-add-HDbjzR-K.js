import{B as O}from"./index-DCMPjbua.js";import{C as B}from"./index-Hsd0Z0_R.js";import{F as H}from"./index-I9bOp0dW.js";import{I as E}from"./index-DCC49QXr.js";import{a as I}from"./basic-tablle-data-AN7MRnVF.js";import{u as S}from"./project-DZP6XSnf.js";import{T as N}from"./index-CwPxZwdQ.js";import{T as P}from"./index-BTHsGrD3.js";import{_ as R}from"./repeater-CE5eZg-v.js";import{V as L}from"./VueSelect-DI5dOEtm.js";import{I as D}from"./index-BcFOD9Ey.js";import{C as G}from"./index-lgafHr2M.js";import{S as z}from"./index-DPFbVGd7.js";import{u as j,q as M,G as F,b as q,J as b,d as r,e as s,h,c as n,o as c,f as t,L as U,i as $,t as d,p as u,n as J}from"./index-BLl1OigC.js";import{w as T}from"./widget-bg-2-DZ1m5zGG.js";import{C as X}from"./VueSelect.vue_vue_type_style_index_0_lang-B1s-zvio.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-cleave.min-DAvglPmz.js";import"./user-1-Dmhlt7-s.js";import"./user-4-_9lLfOE2.js";import"./user-6-Bk4CTUVR.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./vee-validate.esm-CEUTxmiF.js";const _=j().headers(),Q={components:{Button:O,VueSelect:L,Card:B,Checkbox:G,Textinput:P,Select:z,widgetBg2:T,InputGroup:E,vSelect:X,FromGroup:H,Icon:D,Textarea:N,Repeater:R},data(){return{advancedTable:I,idTraspase:null,store:null,widgetBg2:T,cellClient:null,tours:[],agencyOptions:[],booking:{type_booking:"",user_id:"",tour_id:"",bookingorigin_id:"",arrivalplace_id:"",fullNameAgency:null,client_id:"",agency_id:"",origintransfer_id:"",code:"",correlative:"",date_arrival:"",time_arrival:"",nro_pax:"",is_reference_pax:"",nro_pax_childs:"",nro_pax_adults:"",nro_pax_olds:"",reference_voucher:"",observations:"",arrival_place:"",contact_emergency:"",telephone_emergency:"",reference_location:"",is_igv:"",igv:"",is_detail_subtotaltour:"",subtotal_tour:"",subtotal_hotel:"",subtotal_flight:"",subtotal_catalog:"",discount:"",total:"",total_paid:"",total_billing:"",is_grouped:"",description_grouped:"",is_checkin:"",is_checkout:"",is_postponed:"",user_id_postponed:"",postponed_description:"",text_amount:"",register_flight:"",is_favorite:"",is_breakfast:"",nro_breakfast:"",start_breakfast:"",end_breakfast:"",pending_tours:"",origintransfer:"",program_transfer:""},current:1,basicTableData:[{codigo:"HRS2024-000231",nombreHotel:"HOTEL POSADA LODGE (TARAPOTO)",detallehotel:"HAB. TRIPLE (AC) (2 hab. x 6 noches)",contacto:"Cel: 963122673"}],client:{document:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:"",date_birthday:""},modelValue:!1,perpage:3,show:!1,showEdit:!1,show2:!1,realizado:"--",pageRange:10,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:o=>{this.openModalEdit(o)}},{name:"delete",icon:"heroicons-outline:trash",doit:o=>{this.removeProject(o)}}],vehiculos:[{value:1,label:"Compartido"},{value:1,label:"Privado"}],turnos:[{value:1,label:"Full Day"},{value:2,label:"Mañana"},{value:3,label:"Tarde"},{value:4,label:"Noche"}],columns:[{label:"¿Es Abierto?",field:"abierto"},{label:"Tours Turístico",field:"tour"},{label:"Vehículo",field:"vehiculo"},{label:"Turno",field:"turno"},{label:"N° pax",field:"pasajero"},{label:"Fecha",field:"fecha"},{label:"Observación",field:"observation"},{label:"Realizado",field:"realizado"},{label:"Action",field:"action"}],columnsTraspase:[{label:"",field:"abierto"},{label:"N° pax",field:"pasajero"},{label:"Tours Turístico",field:"tour"},{label:"Vehículo",field:"vehiculo"},{label:"Turno",field:"turno"},{label:"Fecha Asigsnada",field:"fecha"},{label:"Precio corporativo	",field:"preciocorporativo"}],columnsReservaHotelExpense:[{label:"Habitacion",field:"habitacion"},{label:"N° PAX	",field:"pasajeross"},{label:"Cant. HAB",field:"cantidad"},{label:"Check-In",field:"checkin"},{label:"Check-out",field:"checkout"},{label:"#Noches",field:"noches"},{label:"Precio",field:"precio"},{label:"Descuento",field:"descuento"},{label:"Adicional",field:"adicional"},{label:"Observación",field:"observacion"},{label:"Subtotal",field:"subtotal"},{label:"",field:"action"}],selectedBooking:null,searchTerm:"",filteredOptions:[],bookingsOptions:[],bedroomOptions:[{value:"simple",label:"HAB. SIMPLE"},{value:"simple_ac",label:"HAB. SIMPLE (AC)"},{value:"matrimonial",label:"HAB. MATRIMONIAL"},{value:"matrimonial_ac",label:"HAB. MATRIMONIAL (AC)"},{value:"doble",label:"HAB. DOBLE"},{value:"doble_ac",label:"HAB. DOBLE (AC)"},{value:"triple",label:"HAB. TRIPLE"},{value:"triple_ac",label:"HAB. TRIPLE (AC)"},{value:"grupal",label:"HAB. GRUPAL"},{value:"grupal_ac",label:"HAB. GRUPAL (AC)"}],rows:[{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"}],selectedTours:[],columnsReservasAlojamiento:[{label:"Código",field:"codigo"},{label:"Nombre Hotel",field:"nombreHotel"},{label:"Detalle Hab.	",field:"detallehotel"},{label:"Action",field:"action"}]}},setup(o){const e=M(null);return F(()=>e.value,(i,m)=>{console.log("El valor ha cambiado de",m,"a",i)}),{modelValue:e}},methods:{handleSelectionChange(o){console.log("Valor seleccionado:",o)},handleCheckboxChange(o){console.log("Se seleccionó el tour con ID:",o);const e=this.selectedTours.indexOf(o);e!==-1?(this.selectedTours.splice(e,1),console.log(this.selectedTours)):(this.selectedTours.push(o),console.log(this.selectedTours))},handleGuardarTraspaso(){const o=q();if(!this.selectedTours||this.selectedTours.length===0){o.error("Debe seleccionar al menos un programa para poder registrar el traspaso");return}console.log("Valor de booking:",this.booking);const e={agency_id:this.idTraspase,origintransfer_id:this.booking.tour_id,observations:this.booking.observations,tours:this.selectedTours};b.post("https://thtbackend-production.up.railway.app/api/v1/bookings/create-traspase",e,_).then(i=>{console.log(i.data)}).catch(i=>{console.error("Error al guardar el traspaso:",i)})},filterOptions(){const o=this.searchTerm.toLowerCase();this.bookingsOptions&&(this.filteredOptions=this.bookingsOptions.filter(e=>e.label.toLowerCase().includes(o)),console.log(this.filteredOptions))}},watch:{modelValue(o,e){console.log("Valor seleccionado:",o)},"booking.tour_id":function(o,e){console.log("ID:",o.value),b.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/record/${o.value}`,_).then(i=>{this.tours=i.data.data.tours,this.tours.forEach(m=>{this.realizado=m.price_corporate}),this.booking.nro_pax=i.data.data.book.nro_pax,this.cellClient=i.data.data.book.client.cellphone,this.booking.reference_location=i.data.data.book.reference_location,console.log("Registro cargado:",i)}).catch(i=>{console.error("Error al cargar el registro:",i)})}},created(){this.store=S();const o=this.$route.params.id,e=this.$route.params.fullname;this.fullNameAgency=e,this.idTraspase=o,console.log("ID:",this.idTraspase),console.log("Fullname:",e)},mounted(){b.get("https://thtbackend-production.up.railway.app/api/v1/bookings/code-list",_).then(o=>{this.bookingsOptions=o.data.bookings.map(e=>({value:e.id,label:`${e.code}
${e.client}`})),this.bookingsOptions.length>0&&this.filterOptions()}).catch(o=>{console.error("Error al obtener las reservas:",o)}),b.get("https://thtbackend-production.up.railway.app/api/v1/agencies/list-formated",_).then(o=>{this.agencyOptions=o.data.agencies.map(e=>({value:e.id,label:`${e.firstName}
${e.document}`})),this.agencyOptions.length>0&&this.filterOptions()}).catch(o=>{console.error("Error al obtener las agencias:",o)})}},W={class:"grid grid-cols-2 gap-0"},Y={class:"my-custom-design"},Z={class:"grid grid-cols-1 lg:grid-cols-1 gap-4"},ee={class:"lg:col-span-1"},oe={class:"flex flex-col justify-center items-center h-full"},te={class:"text-2xl font-medium text-white mb-2 text-center"},le={class:"block"},ae={class:"list space-y-8"},se={class:"flex space-x-3 rtl:space-x-reverse"},ie={class:"flex-none text-2xl text-slate-600 dark:text-slate-300"},re={class:"flex-1"},ne=t("div",{class:"uppercase text-xs text-slate-500 dark:text-slate-300 mb-1 leading-[12px]"}," N° paxs ",-1),ce={href:"mailto:someone@example.com",class:"text-base text-slate-600 dark:text-slate-50"},de={class:"flex space-x-3 rtl:space-x-reverse"},ue={class:"flex-none text-2xl text-slate-600 dark:text-slate-300"},pe={class:"flex-1"},he=t("div",{class:"uppercase text-xs text-slate-500 dark:text-slate-300 mb-1 leading-[12px]"}," Cel ",-1),me={href:"tel:0189749676767",class:"text-base text-slate-600 dark:text-slate-50"},be={class:"flex space-x-3 rtl:space-x-reverse"},_e={class:"flex-none text-2xl text-slate-600 dark:text-slate-300"},fe={class:"flex-1"},ge=t("div",{class:"uppercase text-xs text-slate-500 dark:text-slate-300 mb-1 leading-[12px]"}," Referencia ubicación ",-1),ve={class:"text-base text-slate-600 dark:text-slate-50"},xe={key:0},ke={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},Te={key:1,class:"text-slate-500 dark:text-slate-400 block min-w-[208px]"},Ce={key:3,style:{"font-weight":"bold"}},ye={key:4,class:"block w-full"},Ae={key:5},we={key:6},Ve={key:7},Oe={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Be=t("div",{class:"lg:col-span-1"},null,-1),He={class:"lg:col-span-3 flex justify-end"};function Ee(o,e,i,m,a,v){const C=n("vSelect"),y=n("VueSelect"),x=n("FromGroup"),f=n("Icon"),g=n("Textinput"),A=n("Checkbox"),w=n("vue-good-table"),k=n("Button"),V=n("Card");return c(),r("div",null,[s(V,{class:"mb-0",title:"Traspasar Reserva -  Datos Generales"},{default:h(()=>[t("div",W,[s(x,{label:"Bsucar Reserva"},{default:h(()=>[s(y,null,{default:h(()=>[s(C,{options:a.filteredOptions,modelValue:a.booking.tour_id,"onUpdate:modelValue":e[0]||(e[0]=l=>a.booking.tour_id=l)},null,8,["options","modelValue"])]),_:1})]),_:1}),t("div",Y,[t("div",Z,[t("div",ee,[t("div",{class:"bg-no-repeat bg-cover bg-center p-5 rounded-[6px] relative",style:U({backgroundImage:"url("+a.widgetBg2+")",height:"100px"})},[t("div",oe,[t("div",null,[t("h4",te,[t("span",le,[$("Agencia: "),t("strong",null,d(o.fullNameAgency),1)])])])])],4)])])]),t("ul",ae,[t("li",se,[t("div",ie,[s(f,{icon:"heroicons:envelope"})]),t("div",re,[ne,t("a",ce,d(a.booking.nro_pax),1)])]),t("li",de,[t("div",ue,[s(f,{icon:"heroicons:phone-arrow-up-right"})]),t("div",pe,[he,t("a",me,d(a.cellClient),1)])]),t("li",be,[t("div",_e,[s(f,{icon:"heroicons:map"})]),t("div",fe,[ge,t("div",ve,d(a.booking.reference_location),1)])])]),s(x,{label:"Observaciones"},{default:h(()=>[s(g,{modelValue:a.booking.observations,"onUpdate:modelValue":e[1]||(e[1]=l=>a.booking.observations=l),type:"text",placeholder:"Ingrese el número de teléfono fijo"},null,8,["modelValue"])]),_:1})]),s(w,{class:"-mx-6 mt-6 mb-5",columns:a.columnsTraspase,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.tours,"pagination-options":{enabled:!1,perPage:a.perpage},"sort-options":{enabled:!1}},{"table-row":h(l=>[l.column.field=="abierto"?(c(),r("span",xe,[t("div",ke,[s(A,{modelValue:a.selectedTours,"onUpdate:modelValue":e[2]||(e[2]=p=>a.selectedTours=p),onChange:p=>v.handleCheckboxChange(l.row.id)},null,8,["modelValue","onChange"])])])):u("",!0),l.column.field=="tour"?(c(),r("span",Te,d(l.row.description),1)):u("",!0),l.column.field=="vehiculo"?(c(),r("span",{key:2,class:J({"text-yellow-500 font-bold":l.row.vehicle_tour===2,"text-blue-500 font-bold":l.row.vehicle_tour===1})},d(l.row.vehicle_tour===2?"Privado":"Compartido"),3)):u("",!0),l.column.field=="turno"?(c(),r("span",Ce,d(l.row.shift===1?"Full Day":l.row.shift===2?"Mañana":l.row.shift===3?"Tarde":"Noche"),1)):u("",!0),l.column.field=="pasajero"?(c(),r("span",ye,d(l.row.quantity),1)):u("",!0),l.column.field=="fecha"?(c(),r("span",Ae,d(l.row.created_at),1)):u("",!0),l.column.field=="preciocorporativo"?(c(),r("span",we,[s(g,{type:"text",placeholder:"Precio corporativo",modelValue:a.realizado,"onUpdate:modelValue":e[3]||(e[3]=p=>a.realizado=p)},null,8,["modelValue"])])):u("",!0),l.column.field=="realizado"?(c(),r("span",Ve,[s(g,{type:"text",placeholder:"-",modelValue:a.realizado,"onUpdate:modelValue":e[4]||(e[4]=p=>a.realizado=p),disabled:""},null,8,["modelValue"])])):u("",!0)]),_:1},8,["columns","rows","pagination-options"]),t("div",Oe,[Be,t("div",He,[s(k,{text:"Cancelar",btnClass:"btn-light mr-2",onClick:e[5]||(e[5]=l=>o.closeModal())}),s(k,{type:"submit",text:"Guardar Traspaso",btnClass:"btn-dark",onClick:v.handleGuardarTraspaso},null,8,["onClick"])])])]),_:1})])}const to=K(Q,[["render",Ee]]);export{to as default};
