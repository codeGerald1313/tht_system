import{D as j}from"./index-DFq5MbAK.js";import{B as z}from"./index-DCMPjbua.js";import{C as U}from"./index-Hsd0Z0_R.js";import{I as Y}from"./index-BcFOD9Ey.js";import{I as Q}from"./index-DCC49QXr.js";import{P as H}from"./index-vl95iEIB.js";import{w as K}from"./window-Ds9AqdYU.js";import{M as W}from"./index-MSlXG-Ka.js";import{u as X,J as D,b as V,d as l,e as a,h as r,c,o as n,f as e,F as _,m as f,l as S,n as x,t as d,L as M,p as h,i as v}from"./index-BLl1OigC.js";import{q as Z}from"./vue-tailwind-datepicker-DbcSElnr.js";import{_ as $}from"./index-JXbSC0eV.js";import{w as N}from"./widget-bg-2-DZ1m5zGG.js";import ee from"./tooltip-popover2-DClpmDLm.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as oe,p as se,x as ae,I as ne,y as le}from"./tabs-CkhIUISu.js";import{b as re}from"./menu-CM83wd2-.js";import"./vue-cleave.min-DAvglPmz.js";import"./index-DPFbVGd7.js";import"./transition-CNElC_4N.js";import"./focus-management-Dc3XsveG.js";import"./keyboard-9WePWYgZ.js";import"./use-outside-click-CPWvQZIF.js";import"./hidden-BR_kr5_G.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-0CPOhxDd.js";import"./use-resolve-button-type-BwPomRAb.js";const I=X().headers(),ie={mixins:[K],components:{Pagination:H,TabGroup:oe,Accordion:$,widgetBg2:N,Traspasos:ee,TabList:se,Tab:ae,TabPanels:ne,TabPanel:le,InputGroup:Q,Dropdown:j,Icon:Y,VueTailwindDatePicker:Z,Card:U,MenuItem:re,Button:z,Modal:W},data(){const s=new Date,g=new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",o=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{advancedTable:[],current:1,perpage:10,widgetBg2:N,show:!1,startDateVariable:"",endDateVariable:"",dateValue:{startDate:g,endDate:o},pageRange:5,searchTerm:"",actions:[{name:"edit",icon:"heroicons:pencil-square",doit:p=>{const b=p.id,k=p;this.$router.push({name:"recibido-edit",params:{recibido_id:b},query:{recivied_data:JSON.stringify(k)}})}}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Código",field:"code"},{label:"Agencia a Cargo		",field:"client_id"},{label:"Cliente Responsable	",field:"clientRes"},{label:"N° pax	",field:"nroPax"},{label:"Sobre tours	",field:"sobreTours"},{label:"Estado",field:"estadito"},{label:"Action",field:"action"}],agencies:[],faqmenus:[{title:"Recibidos"},{title:"Traspasos"}],items:[{title:"Escoger Agencia",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."},{title:"Tabla de Cuadre & Exports",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."}],items2:[{title:"Escoger Agencia",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."},{title:"Tabla de Cuadre & Exports",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."}],items3:[{title:"Escoger Agencia",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."},{title:"Tabla de Cuadre & Exports",content:"Jornalists call this critical, introductory section the  and when bridge properly executed, it's the that carries your reader from anheadine try at attention-grabbing to the body of your blog post."}]}},methods:{async reloadCrmTable(){try{await this.fetchData()}catch(s){console.error("Error al recargar Ciudades Turísticas :",s)}},async fetchData(){try{const s=await D.get("https://thtbackend-production.up.railway.app/api/v1/agencies/list",I);this.agencies=s.data.data,console.log(this.agencies)}catch(s){console.error("Error al obtener los datos:",s)}},openModal(s){this.$router.push(`/app/reserve-preview/${s}`)},handleViewDetails(s,u){this.$router.push({name:"recibido-add",params:{id:s,fullname:u}})},handleViewDetailsTraspase(s,u){this.$router.push({name:"traspaso-add",params:{id:s,fullname:u}})},getShortName(s){return s.split(" ").slice(0,2).join(" ")}},watch:{dateValue(s,u){if(!s.startDate||!s.endDate)this.advancedTable=[];else{const g=s.startDate.split(" ")[0],w=s.endDate.split(" ")[0];D.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/list-recivied?start_date=${g}&end_date=${w}`,I).then(o=>{console.log(o.data),this.advancedTable=o.data.data}).catch(o=>{console.error(o),o.response&&o.response.status===404?V().info("No se encontraron reservas dentro del rango de fechas proporcionado."):V().error("Ocurrió un error al obtener las reservas."),this.advancedTable=[]})}}},mounted(){D.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/list-recivied?start_date=${this.dateValue.startDate}&end_date=${this.dateValue.endDate}`,I).then(s=>{console.log(s.data),this.advancedTable=s.data.data}).catch(s=>{console.error(s)}),this.fetchData()}},ce={class:"grid gap-5 grid-cols-12"},de={class:"xl:col-span-2 lg:col-span-4 col-span-12 card-auto-height"},ue={class:"xl:col-span-10 lg:col-span-8 col-span-12"},pe={class:"my-custom-design"},me={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},he={class:"flex flex-col justify-center items-center h-full"},ge={class:"text-2xl font-medium text-white mb-2 text-center"},be={class:"block"},_e={class:"my-custom-design"},fe={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},ye={class:"lg:col-span-4 flex justify-start"},xe={class:"md:flex pb-6 items-center"},ve=e("h6",{class:"flex-1 md:mb-0 mb-3"},"Recibidos",-1),we={class:"-mx-6"},ke=["onClick"],Ce={style:{"margin-top":"5px"}},Te={key:1,class:"text-slate-500 dark:text-slate-400"},De=e("br",null,null,-1),Ie={key:2,class:"text-slate-500 dark:text-slate-400"},Pe=e("br",null,null,-1),Ve=e("br",null,null,-1),Se={key:3,class:"text-slate-500 dark:text-slate-400",style:{display:"flex","flex-direction":"column"}},Me={key:5,class:"text-slate-500 dark:text-slate-400"},Ne={key:0,class:"text-primary-500"},Ee={key:1},Be={key:6,class:"text-slate-500 dark:text-slate-400"},Re={key:0,class:"text-success-500"},Oe={key:1,class:"font-bold"},Ae={key:2},Je={key:7,class:"action-btn text-end mr-3"},qe={class:"text-xl"},Fe=["onClick"],Ge={class:"text-base"},Le={class:"py-4 px-3"},je={class:"my-custom-design"},ze={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Ue={class:"flex flex-col justify-center items-center h-full"},Ye={class:"text-2xl font-medium text-white mb-2 text-center"},Qe={class:"block"},He={class:"my-custom-design"},Ke={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},We={class:"lg:col-span-4 flex justify-start"};function Xe(s,u,g,w,o,p){const b=c("Icon"),k=c("Tab"),E=c("TabList"),P=c("Card"),y=c("Button"),B=c("InputGroup"),R=c("VueTailwindDatePicker"),O=c("MenuItem"),A=c("Dropdown"),J=c("Pagination"),q=c("vue-good-table"),C=c("Accordion"),T=c("TabPanel"),F=c("Traspasos"),G=c("TabPanels"),L=c("TabGroup");return n(),l("div",null,[a(L,null,{default:r(()=>[e("div",ce,[e("div",de,[a(P,null,{default:r(()=>[a(E,{class:"flex flex-col space-y-1 text-start items-start"},{default:r(()=>[(n(!0),l(_,null,f(o.faqmenus,(t,i)=>(n(),S(k,{key:i,as:"template"},{default:r(({selected:m})=>[e("button",{type:"button",class:x(["focus:ring-0 focus:outline-none space-x-2 text-sm flex items-center w-full transition duration-150 px-3 py-4 rounded-[6px] rtl:space-x-reverse",m?"bg-slate-100 dark:bg-slate-900 dark:text-white":"bg-white dark:bg-slate-800 dark:text-slate-300"])},[a(b,{icon:"heroicons:chevron-double-right-solid",class:x(["text-lg",m?" opacity-100":"opacity-50 dark:opacity-100"])},null,8,["class"]),e("span",null,d(t.title),1)],2)]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",ue,[a(G,null,{default:r(()=>[a(T,null,{default:r(()=>[a(C,{items:o.items,parentClass:"space-y-5"},{customContentFirstItem:r(()=>[e("div",pe,[e("div",me,[(n(!0),l(_,null,f(o.agencies,(t,i)=>(n(),l("div",{class:"lg:col-span-1",key:i},[e("div",{class:"bg-no-repeat bg-cover bg-center p-5 rounded-[6px] relative",style:M({backgroundImage:"url("+o.widgetBg2+")",height:"200px"})},[e("div",he,[e("div",null,[e("h4",ge,[e("span",be,d(p.getShortName(t.fullname)),1)])]),e("div",null,[a(y,{icon:"heroicons-outline:receipt-refund",text:"Recibir",onClick:m=>p.handleViewDetails(t.id,t.fullname),btnClass:"btn-light bg-white btn-sm"},null,8,["onClick"])])])],4)]))),128))])])]),customContentSecondItem:r(()=>[e("div",_e,[e("div",fe,[e("div",ye,[a(P,{noborder:"",class:"w-full"},{default:r(()=>[e("div",xe,[ve,e("div",{class:x(["md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse",s.window.width<768?"space-x-rb":""])},[a(B,{modelValue:o.searchTerm,"onUpdate:modelValue":u[0]||(u[0]=t=>o.searchTerm=t),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"]),e("div",null,[a(R,{modelValue:o.dateValue,"onUpdate:modelValue":u[1]||(u[1]=t=>o.dateValue=t),"input-classes":"form-control"},null,8,["modelValue"])]),a(y,{icon:"heroicons-outline:arrows-up-down",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg"}),a(y,{icon:"heroicons-outline:document-text",text:"",onClick:s.exportToExcel,btnClass:"bg-green-500 hover:bg-green-600 text-white font-normal py-2 px-4 rounded-sm text-sm",iconClass:"text-lg",title:"Exportar"},null,8,["onClick"])],2)]),e("div",we,[a(q,{columns:o.columns,styleClass:" vgt-table  centered ",rows:o.advancedTable,"sort-options":{enabled:!1},"pagination-options":{enabled:!0,perPage:o.perpage},"search-options":{enabled:!0,externalQuery:o.searchTerm}},{"table-row":r(t=>[t.column.field=="code"?(n(),l("span",{key:0,class:"font-medium",onClick:i=>p.openModal(t.row.id),style:{display:"flex","flex-direction":"column"}},[e("span",null,d(t.row.code),1),e("span",Ce,"Reg.: "+d(t.row.date_arrival),1)],8,ke)):h("",!0),t.column.field=="nroPax"?(n(),l("span",Te,[v(d(t.row.nro_pax)+" ",1),De])):h("",!0),t.column.field=="clientRes"?(n(),l("span",Ie,[v(d(t.row.client.fullname)+" ",1),Pe,v(" DNI: "+d(t.row.client.document)+" ",1),Ve])):h("",!0),t.column.field=="client_id"?(n(),l("span",Se,[e("span",null,d(t.row.agency.fullname),1),e("span",null,d(t.row.agency.document),1)])):h("",!0),t.column.field==="amount"?(n(!0),l(_,{key:4},f(t.row.program_transfer,(i,m)=>(n(),l("div",{key:m,style:{display:"flex","flex-direction":"column","margin-bottom":"10px"}},[e("span",null,d(i.description)+" ("+d(i.pivot.quantity)+" pax) "+d(i.pivot.date_assigned),1)]))),128)):h("",!0),t.column.field=="estadito"?(n(),l("span",Me,[t.row.pending_tours>0?(n(),l("span",Ne," Por realizar "+d(t.row.pending_tours)+" Tours ",1)):(n(),l("span",Ee," Sin tours pendientes "))])):h("",!0),t.column.field=="sobreTours"?(n(),l("span",Be,[t.row.is_checkin?(n(),l("span",Re," Confirmado ")):t.row.is_checkout?(n(),l("span",Oe," Checkou ")):(n(),l("span",Ae," Pendiente "))])):h("",!0),t.column.field=="action"?(n(),l("div",Je,[a(A,{classMenuItems:" w-[140px]"},{menus:r(()=>[(n(!0),l(_,null,f(o.actions,(i,m)=>(n(),S(O,{key:m},{default:r(()=>[e("div",{onClick:Ze=>i.doit(t.row),class:x(`
                
                  ${i.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[e("span",Ge,[a(b,{icon:i.icon},null,8,["icon"])]),e("span",null,d(i.name),1)],10,Fe)]),_:2},1024))),128))]),default:r(()=>[e("div",qe,[a(b,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):h("",!0)]),"pagination-bottom":r(t=>[e("div",Le,[a(J,{total:o.advancedTable.length,current:o.current,"per-page":o.perpage,pageRange:o.pageRange,onPageChanged:u[2]||(u[2]=i=>o.current=i),pageChanged:t.pageChanged,perPageChanged:t.perPageChanged,enableSearch:"",enableSelect:"",options:o.options},{default:r(()=>[v(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1})])])])]),_:1},8,["items"])]),_:1}),a(T,null,{default:r(()=>[a(C,{items:o.items2,parentClass:"space-y-5"},{customContentFirstItem:r(()=>[e("div",je,[e("div",ze,[(n(!0),l(_,null,f(o.agencies,(t,i)=>(n(),l("div",{class:"lg:col-span-1",key:i},[e("div",{class:"bg-no-repeat bg-cover bg-center p-5 rounded-[6px] relative",style:M({backgroundImage:"url("+o.widgetBg2+")",height:"200px"})},[e("div",Ue,[e("div",null,[e("h4",Ye,[e("span",Qe,d(p.getShortName(t.fullname)),1)])]),e("div",null,[a(y,{icon:"heroicons-outline:play-pause",text:"Pasar",onClick:m=>p.handleViewDetailsTraspase(t.id,t.fullname),btnClass:"btn-light bg-white btn-sm"},null,8,["onClick"])])])],4)]))),128))])])]),customContentSecondItem:r(()=>[e("div",He,[e("div",Ke,[e("div",We,[a(F,{class:"w-full"})])])])]),_:1},8,["items"])]),_:1}),a(T,null,{default:r(()=>[a(C,{items:o.items3,parentClass:"space-y-5"},null,8,["items"])]),_:1})]),_:1})])])]),_:1})])}const Tt=te(ie,[["render",Xe]]);export{Tt as default};
