import{B as G}from"./index-CvW4wJPB.js";import{C as L}from"./index-COOwjdNO.js";import{F as J}from"./index-z1TsTTdr.js";import{I as W}from"./index-BffMpWx5.js";import{u as X,B as v,b as A,d as u,e as i,g as b,f as a,c as f,o as c,q as p,n as I,p as P,h as T,t as _,F as Y,l as H,w as N,D as K,E as Q}from"./index-BFn_3Gdk.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as $}from"./index-BL9tae9R.js";import{C as ee}from"./index-JvTu2BQt.js";import{I as oe}from"./index-2H-cusMd.js";import{S as te}from"./index-BaZVwneS.js";import{_ as le,C as se,A as ie,E as ae}from"./ModalAddReserve-CMPQBg85.js";import{D as ne}from"./index-Bs_uOHMv.js";import{P as re}from"./index-Dr9vJUyq.js";import{u as de}from"./project-BEvoPr6t.js";import{V as ce}from"./VueSelect-QFU_7fbT.js";import{M as ue}from"./index-2mWc_vCg.js";import{a as me}from"./basic-tablle-data-AN7MRnVF.js";import{b as he}from"./menu-BIf-sRSE.js";import"./vue-cleave.min-ClV1fVcS.js";/* empty css                                              */import"./index-CRJE58yX.js";/* empty css                                              */import"./TotalTable-C3szSPF8.js";import"./VueSelect.vue_vue_type_style_index_0_lang-CworQ5tj.js";import"./index-DERosrGp.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./transition-DUAAdbaG.js";import"./focus-management-C7_eiYjk.js";import"./keyboard-CmTzE63w.js";import"./use-outside-click-RVZZ1L_X.js";import"./hidden-Br4jqfTk.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-Bo1bAx4t.js";import"./user-1-Dmhlt7-s.js";import"./user-4-_9lLfOE2.js";import"./user-6-Bk4CTUVR.js";import"./use-resolve-button-type-0pot5Y2u.js";const k=X().headers(),pe={components:{Dropdown:ne,Select:te,Button:G,FromGroup:J,EditProject:le,ComisionarModal:se,AmortizarModal:ie,EditProject2:ae,Textinput:$,id:null,otherData:null,Modal:ue,Checkbox:ee,InputGroup:oe,Icon:W,VueSelect:ce,MenuItem:he,Card:L,ProgressBar:re},data(){return{advancedTable:me,idsReservesHotels:[],commissionIds:[],moneyIds:[],searchTerm:"",branchOptions:[],showEditModal:!1,showReserveModal:!1,selectedTour:null,store:null,formattedTotal:"S/.0.00",formattedTotalHotel:"S/.0.00",totalHotelValue:"0.00",reservasHotel:[],projects:[],filteredRows:[],includeBreakfast:!1,book:{is_breakfast:!1,nro_breakfast:"",start_breakfast:"",end_breakfast:""},originsbooking:[{value:1,label:"Oficina"},{value:2,label:"Colaboradores"},{value:3,label:"Facebook"},{value:4,label:"Whatsapp"},{value:5,label:"Instagram"},{value:6,label:"Página web"}],selectedBranch:null,originsReserve:[{value:5,label:"Sin Asignar"},{value:1,label:"Aeropuerto"},{value:2,label:"Terminar Terrestre"},{value:3,label:"Otros"}],toursOptions:[],customerOptions:[],showReferences:!1,nro_pax_childs:"",nro_pax_adults:"",nro_pax_olds:"",current:1,basicTableData:[{codigo:"HRS2024-000231",nombreHotel:"HOTEL POSADA LODGE (TARAPOTO)",detallehotel:"HAB. TRIPLE (AC) (2 hab. x 6 noches)",contacto:"Cel: 963122673"}],client:{document:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:"",date_birthday:""},tour:{esAbierto:null,tourDescription:null,vehiculo:null,turno:null,nPasajseros:null,fechaTour:null,observacion:null,realizado:null,totalTour:"0.00"},booking:{clients:null,phoneNumber:null,originReserve:null,numPassengers:null,referenciar:!1,numChildren:null,reference_location:null,numAdults:null,numSeniors:null,dateTimeArrival:null,dateArrival:null,timeArrival:null,arrivalBy:null,placeArrivalReference:null,voucherReference:null,emergencyContact:null,emergencyPhone:null,observations:null,isFavorite:!1,includeBreakfast:!1,numBreakfasts:null,startDate:null,endDate:null,total:null},perpage:3,idCliente:null,show:!1,showEdit:!1,showAmortizar:!1,showComisionar:!1,show2:!1,realizado:"--",pageRange:10,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:l=>{this.openModalEdit(l)}},{name:"delete",icon:"heroicons-outline:trash",doit:l=>{this.removeProject(l)}}],vehiculos:[{value:1,label:"Compartido"},{value:2,label:"Privado"}],turnos:[{value:1,label:"Full Day"},{value:2,label:"Mañana"},{value:3,label:"Tarde"},{value:4,label:"Noche"}],columns:[{label:"¿Es Abierto?",field:"abierto"},{label:"Tours Turístico",field:"tour"},{label:"Vehículo",field:"vehiculo"},{label:"Turno",field:"turno"},{label:"N° pax",field:"pasajero"},{label:"Fecha",field:"fecha"},{label:"Observación",field:"observation"},{label:"Precio Coorporativo",field:"precio_corporativo"},{label:"Cobranza",field:"cobranza"},{label:"Realizado",field:"realizado"},{label:"Action",field:"action"}],columnsReservaHotelExpense:[{label:"Habitacion",field:"habitacion"},{label:"N° PAX	",field:"pasajeross"},{label:"Cant. HAB",field:"cantidad"},{label:"Check-In",field:"checkin"},{label:"Check-out",field:"checkout"},{label:"#Noches",field:"noches"},{label:"Precio",field:"precio"},{label:"Descuento",field:"descuento"},{label:"Adicional",field:"adicional"},{label:"Observación",field:"observacion"},{label:"Subtotal",field:"subtotal"},{label:"",field:"action"}],showDeleteButton:!0,idBooking:null,code:null,selectedTourDescription:"",tourOptions:[],totalBooking:null,bedroomOptions:[],rows:[{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"},{item:"Headphone",qty:2,price:"$600.25",total:"$1200.50"}],columnsReservasAlojamiento:[{label:"Código",field:"code",type:"text",html:!0,width:"100px"},{label:"Nombre del Hotel",field:"nombreHotel",type:"text",html:!0,width:"150px"},{label:"Detalle del Hotel",field:"detallehotel",type:"text",html:!0,width:"250px"},{label:"Acciones",field:"action",type:"text",html:!0,width:"120px"}]}},watch:{projects:{deep:!0,handler(l,t){let n=0;for(let s=0;s<l.length;s++){const e=l[s],r=parseFloat(e.nPasajseros),h=parseFloat(e.precio_corporate);!isNaN(r)&&!isNaN(h)&&(this.projects[s].cobranza=r*h,n+=this.projects[s].cobranza),this.tour.totalTour=n}}},selectedTour(l,t){l!==t&&(this.projects.find(s=>s.id===l)?A().warning("¡Este tour ya está seleccionado!"):v.get(`https://thtsystemv2.tech/public/api/v1/tours/description/${l}`,k).then(s=>{const e={id:l,description:s.data.data.description,esAbierto:null,vehiculo:1,turno:s.data.data.shift,nPasajseros:null,fechaTour:null,observacion:null,precio_corporate:s.data.data.price_corporate,realizado:null,totalTour:null};this.projects.push(e)}).catch(s=>{console.error("Error al obtener la descripción del tour:",s)}))},"booking.clients":function(l,t){this.idCliente=l,v.get(`https://thtsystemv2.tech/public/api/v1/clients/cellphone&telephone/${l}`,k).then(n=>{this.booking.phoneNumber=n.data.contact_numbers}).catch(n=>{console.error("Error al obtener la descripción del tour:",n)})},"booking.dateTimeArrival"(l){if(l){const[t,n]=l.split(" ");this.booking.dateArrival=t,this.booking.timeArrival=n}else this.booking.dateArrival=null,this.booking.timeArrival=null},"tour.totalTour":function(l){const t=parseFloat(l);(!isNaN(t)||l==="")&&(this.formattedTotal="S/."+(l===""?"0.00":t.toFixed(2)))},totalHotelValue(l){const t=parseFloat(l);(!isNaN(t)||l==="")&&(this.formattedTotalHotel="S/."+(l===""?"0.00":t.toFixed(2)))},$route:{immediate:!0,handler(l,t){const n=l.params.id;this.idBooking=n;const s=JSON.parse(l.query.otherData);this.selectedBranch=s.agency.id,this.booking.clients=s.client_id,this.booking.originReserve=s.bookingorigin_id,this.booking.numPassengers=s.nro_pax,this.booking.referenciar=s.is_reference_pax===1,this.booking.numChildren=s.nro_pax_childs,this.booking.numAdults=s.nro_pax_adults,this.booking.numSeniors=s.nro_pax_olds,this.booking.dateTimeArrival=s.date_arrival+" "+s.time_arrival,this.booking.dateArrival=s.date_arrival,this.booking.timeArrival=s.time_arrival,this.booking.arrivalBy=s.arrivalplace_id,this.booking.placeArrivalReference=s.arrival_place2,this.booking.voucherReference=s.reference_voucher,this.booking.emergencyContact=s.contact_emergency,this.booking.emergencyPhone=s.telephone_emergency,this.booking.observations=s.observations,this.booking.reference_location=s.reference_location,this.booking.isFavorite=s.is_favorite===1,this.booking.includeBreakfast=s.is_breakfast===1,this.booking.numBreakfasts=s.nro_breakfast,this.booking.startDate=s.start_breakfast,this.booking.endDate=s.end_breakfast,this.booking.total=s.total,this.tour.totalTour=s.subtotal_tour,this.totalHotelValue=s.subtotal_hotel,this.projects=s.tours.map(e=>({id:e.id,esAbierto:e.pivot.is_open===1,description:e.description,vehiculo:e.pivot.vehicle_tour,turno:e.pivot.shift_tour,nPasajseros:e.pivot.quantity,date_assigned:e.pivot.date_assigned,observacion:e.pivot.observation,realizado:e.pivot.is_realized,precio_corporate:e.price_corporate,cobranza:e.pivot.delegated_payment})),this.reservasHotel=s.hotelsbookings.map(e=>{var r,h,g,m;return{id:e.id,code:e.code,total:e.total,hotel:{tradename:((r=e.hotel)==null?void 0:r.tradename)||"",citie_turistic:{description:((g=(h=e.hotel)==null?void 0:h.citie_turistic)==null?void 0:g.description)||""},cellphone:((m=e.hotel)==null?void 0:m.cellphone)||""},detailbedrooms:e.detailbedrooms.map(x=>{var y;return{quantity:x.quantity,nights:x.nights,description:((y=x.typebedroom)==null?void 0:y.description)||""}})}})}}},async created(){await this.fetchClients()},computed:{totalReserva(){const l=isNaN(parseFloat(this.formattedTotal.substring(3)))?0:parseFloat(this.formattedTotal.substring(3)),t=isNaN(parseFloat(this.formattedTotalHotel.substring(3)))?0:parseFloat(this.formattedTotalHotel.substring(3)),n=l+t,s=n.toFixed(2);return this.booking.total=s,"S/."+n.toFixed(2)},limitedCustomerOptions(){return this.customerOptions.slice(0,6)}},methods:{capturarDatos(){},handleCommissionProcessed(l){const n=[l.data.data.id];this.commissionIds=n},handleFormSubmitted(l){const n=[l.data.id];this.moneyIds=n},deleteProject(l){this.projects.splice(l,1),this.projects.length===0&&(this.tour.totalTour=0)},deleteItem(l,t){window.confirm("¿Estás seguro de que deseas eliminar este elemento?")&&v.delete(`https://thtsystemv2.tech/public/api/v1/hotelsbookings/destroy/${l}`,k).then(n=>{this.reservasHotel.splice(t,1);let s=0;this.reservasHotel.forEach(r=>{s+=parseFloat(r.total)}),this.totalHotelValue=s,A().success("Elemento eliminado con éxito",{position:"top-right"})}).catch(n=>{console.error("Error al eliminar el elemento:",n),A().error("Error al eliminar el elemento",{position:"top-right"})})},handlePostComplete(l){let t=0;if(Array.isArray(l.data))l.data.forEach(s=>{this.reservasHotel.push(this.formatReserva(s)),t+=parseFloat(s.total);const e=s.id;this.idsReservesHotels.includes(e)||this.idsReservesHotels.push(e)});else{this.reservasHotel.push(this.formatReserva(l.data)),t+=parseFloat(l.data.total);const s=l.data.id;this.idsReservesHotels.includes(s)||this.idsReservesHotels.push(s)}let n=parseFloat(t);this.totalHotelValue=parseFloat(this.totalHotelValue)+n},calcularTotalHotelValue(){let l=0;this.reservasHotel.forEach(t=>{l+=parseFloat(t.total)}),this.totalHotelValue=l},formatReserva(l){var t,n,s,e;return{code:l.code,hotel:{tradename:((t=l.hotel)==null?void 0:t.tradename)||"",citie_turistic:{description:((s=(n=l.hotel)==null?void 0:n.citie_turistic)==null?void 0:s.description)||""},cellphone:((e=l.hotel)==null?void 0:e.cellphone)||""},detailbedrooms:l.typebedrooms.map(r=>{var h;return{quantity:r.quantity,nights:r.nights,description:((h=r.typebedroom)==null?void 0:h.description)||""}})}},handleAction(l){l.name==="edit"&&this.openModalEdit()},fetchAgencies(){v.get("https://thtsystemv2.tech/public/api/v1/agencies/list",k).then(l=>{this.branchOptions=l.data.data.map(t=>({value:t.id,label:t.tradename}))}).catch(l=>{console.error("Error al obtener las agencias:",l)})},saveReserva(){const l=this.booking.voucherReference?1:0,t=this.booking.includeBreakfast?1:0,n=this.booking.isFavorite?1:0,s={bookingorigin_id:this.booking.originReserve,client_id:this.booking.clients,agency_id:this.selectedBranch,arrivalplace_id:this.booking.arrivalBy,arrival_place:this.booking.placeArrivalReference,date_arrival:this.booking.dateArrival!=="null"?this.booking.dateArrival:null,time_arrival:this.booking.timeArrival!=="null"?this.booking.timeArrival:null,nro_pax:this.booking.numPassengers,is_reference_pax:this.booking.referenciar,nro_pax_childs:this.booking.numChildren,nro_pax_adults:this.booking.numAdults,nro_pax_olds:this.booking.numSeniors,reference_voucher:this.booking.voucherReference,is_voucher_external:l,observations:this.booking.observations,contact_emergency:this.booking.emergencyContact,telephone_emergency:this.booking.emergencyPhone,reference_location:this.booking.reference_location,subtotal_tour:this.tour.totalTour,subtotal_hotel:this.totalHotelValue,total:this.booking.total,is_favorite:n,is_breakfast:t,nro_breakfast:this.booking.numBreakfasts,start_breakfast:this.booking.startDate,end_breakfast:this.booking.endDate,tours:this.projects.map(e=>({id:e.id,vehicle_tour:e.vehiculo,shift_tour:e.turno,quantity:e.nPasajseros,date_assigned:e.date_assigned,observation:e.observacion,is_open:e.esAbierto,delegated_payment:e.cobranza})),hotelsbooking_ids:this.idsReservesHotels,commission_ids:this.commissionIds,money_ids:this.moneyIds};v.post(`https://thtsystemv2.tech/public/api/v1/bookings/edit/${this.idBooking}`,s,{...k}).then(e=>{A().success(e.data.message,{duration:3e3});const h=e.data.data.id;setTimeout(()=>{this.$router.push({name:"reserve-preview",params:{id:h}})},3e3)}).catch(e=>{A().error("Error al enviar los datos al backend",{duration:3e3})})},toggleReferences(){this.showReferences=!this.showReferences},openModal(){this.showEditModal=!0},openModalEdit(){this.showEdit=!this.showEdit},openModalComisionar(){this.showComisionar=!0},openModalAmortizar(){this.idCliente=this.idCliente,this.totalBooking=this.booking.total,this.showAmortizar=!0},handleComisionEnviada(l){},openModalReservaHotel(){this.showReserveModal=!0,this.showDeleteButton=!1},async fetchClients(){try{const l=await v.get("https://thtsystemv2.tech/public/api/v1/clients/list",k);this.customerOptions=l.data.data.map(t=>({value:t.id,label:t.fullname}))}catch(l){console.error("Error fetching departments:",l)}},async fetchHotelsBooking(){try{const l=await v.get("https://thtsystemv2.tech/public/api/v1/clients/list",k);this.customerOptions=l.data.data.map(t=>({value:t.id,label:t.fullname}))}catch(l){console.error("Error fetching departments:",l)}},fetchData(){const l=this.$route.params.id;v.get(`https://thtsystemv2.tech/public/api/v1/bookings/record/${l}`,k).then(t=>{const n=t.data.data;this.code=n.book.code}).catch(t=>{console.error("Error fetching invoice data:",t)})},async fetchTours(){try{const l=await v.get("https://thtsystemv2.tech/public/api/v1/tours/list",k);this.tourOptions=l.data.data.map(t=>({value:t.id,label:t.description}))}catch(l){console.error("Error fetching tours:",l)}}},created(){this.store=de()},mounted(){this.fetchData(),this.fetchClients(),this.fetchTours(),this.fetchAgencies()}},V=l=>(K("data-v-932ebc58"),l=l(),Q(),l),be={class:"grid grid-cols-1 lg:grid-cols-1 gap-5"},fe={class:"grid grid-cols-4 gap-5"},ge={class:"flex items-center"},ve={class:"grid grid-cols-3 gap-5"},_e={style:{display:"flex","align-items":"center"}},ke={key:0},xe={class:"flex items-center"},ye={class:"grid grid-cols-4 gap-5"},Ve={class:"grid grid-cols-3 gap-5"},Ce={key:0,class:"form-group col-lg-9"},Ae={class:"flex"},je={class:"flex flex-col w-1/2 mr-4"},we={class:"flex flex-col w-1/2"},Te={class:"flex flex-col w-1/2"},Re={class:"grid grid-cols-1"},Pe={class:"flex flex-col"},He={class:"border-b border-slate-100 dark:border-slate-700 pb-3 flex justify-between items-center"},Ue=V(()=>a("div",{class:"flex items-center"},[a("h6",{class:"card-title mb-0"},"Datos de Tours turístico")],-1)),Be={class:"flex items-center"},Ee={class:"flex-grow mr-2"},Fe={key:0},Me={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},Se={key:4,class:"block w-full"},Ie={key:5},Ne={key:6,class:"block w-full"},ze={key:7},De={key:8},Oe={key:9},qe={key:0,style:{position:"relative"}},Ge={key:10,class:"action-btn text-end mr-3"},Le=["onClick"],Je={class:"mt-5 self-end"},We={class:"grid grid-cols-1"},Xe={class:"flex flex-col"},Ye={class:"md:flex pb-6 items-center"},Ke=V(()=>a("h6",{class:"flex-1 md:mb-0 mb-3"},"Reservas de Alojamiento",-1)),Qe={class:"md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse"},Ze={key:0,class:"text-blue-900 font-bold"},$e={key:1,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},eo={class:"font-bold"},oo=V(()=>a("br",null,null,-1)),to={key:2,class:"text-slate-500 dark:text-slate-400 block min-w-[108px]"},lo={key:3,class:"action-btn text-end mr-3"},so={class:"text-xl"},io={class:"mt-5 self-end"},ao={class:"grid grid-cols-1 lg:grid-cols-1 gap-5"},no={class:"grid grid-cols-3 gap-5"},ro={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},co=V(()=>a("div",{class:"lg:col-span-1"},null,-1)),uo={class:"lg:col-span-3 flex justify-end"},mo={class:"flex justify-center"},ho={class:"flex justify-center"},po={class:"w-full"},bo=V(()=>a("th",null,"Total tours",-1)),fo=V(()=>a("th",null,"Total hotel",-1)),go=V(()=>a("tr",null,[a("td",{colspan:"2"},[a("hr",{class:"book__summary__hrdivider"})])],-1)),vo=V(()=>a("th",{class:"text-primary bold text-uppercase f-s-15"},"Total reserva",-1)),_o={class:"text-primary bold f-s-15"};function ko(l,t,n,s,e,r){const h=f("Select"),g=f("FromGroup"),m=f("Textinput"),x=f("Checkbox"),y=f("InputGroup"),j=f("flat-pickr"),C=f("Card"),U=f("Icon"),B=f("vue-good-table"),R=f("Button"),z=f("EditProject"),D=f("EditProject2"),O=f("ComisionarModal"),q=f("AmortizarModal");return c(),u("div",null,[i(C,{title:"Datos Generales"},{default:b(()=>[a("div",be,[a("div",fe,[a("div",ge,[i(g,{label:"Clientes",class:"flex-1"},{default:b(()=>[i(h,{options:r.limitedCustomerOptions,modelValue:e.booking.clients,"onUpdate:modelValue":t[0]||(t[0]=o=>e.booking.clients=o),class:"client-select"},null,8,["options","modelValue"])]),_:1}),a("button",{onClick:t[1]||(t[1]=(...o)=>r.openModal&&r.openModal(...o)),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),i(m,{label:"Número teléfono",type:"text",placeholder:"Tel 1",modelValue:e.booking.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=o=>e.booking.phoneNumber=o)},null,8,["modelValue"]),i(g,{label:"Agencia",class:"flex-1"},{default:b(()=>[i(h,{options:e.branchOptions,modelValue:e.selectedBranch,"onUpdate:modelValue":t[3]||(t[3]=o=>e.selectedBranch=o),class:"client-select"},null,8,["options","modelValue"])]),_:1}),i(g,{label:"Origen de Reserva",class:"flex-1"},{default:b(()=>[i(h,{options:e.originsbooking,modelValue:e.booking.originReserve,"onUpdate:modelValue":t[4]||(t[4]=o=>e.booking.originReserve=o),class:"client-select"},null,8,["options","modelValue"])]),_:1})]),a("div",ve,[a("div",_e,[i(m,{label:"N° Pax",type:"text",placeholder:"N° pax",modelValue:e.booking.numPassengers,"onUpdate:modelValue":t[5]||(t[5]=o=>e.booking.numPassengers=o)},null,8,["modelValue"]),i(x,{label:"¿Referenciar?",checked:e.booking.referenciar,onClick:r.toggleReferences,modelValue:e.booking.referenciar,"onUpdate:modelValue":t[6]||(t[6]=o=>e.booking.referenciar=o)},null,8,["checked","onClick","modelValue"])]),e.booking.referenciar?(c(),u("div",ke,[i(g,{label:"Referencia de pasajeros:",class:"flex-1"},{default:b(()=>[a("div",xe,[i(y,{name:"nro_pax_childs",type:"text",placeholder:"N° niños",modelValue:e.booking.numChildren,"onUpdate:modelValue":t[7]||(t[7]=o=>e.booking.numChildren=o),prepend:"#Niños"},null,8,["modelValue"]),i(y,{name:"nro_pax_adults",type:"text",placeholder:"N° adultos",modelValue:e.booking.numAdults,"onUpdate:modelValue":t[8]||(t[8]=o=>e.booking.numAdults=o),prepend:"#Adultos"},null,8,["modelValue"]),i(y,{name:"nro_pax_olds",type:"text",placeholder:"N° ancianos",modelValue:e.booking.numSeniors,"onUpdate:modelValue":t[9]||(t[9]=o=>e.booking.numSeniors=o),prepend:"#Ancianos"},null,8,["modelValue"])])]),_:1})])):p("",!0),i(g,{label:"Fecha y hora llegada"},{default:b(()=>[i(j,{modelValue:e.booking.dateTimeArrival,"onUpdate:modelValue":t[10]||(t[10]=o=>e.booking.dateTimeArrival=o),class:"form-control",placeholder:"Date & Time",id:"d2",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),i(g,{label:"Llegada por"},{default:b(()=>[i(h,{options:e.originsReserve,modelValue:e.booking.arrivalBy,"onUpdate:modelValue":t[11]||(t[11]=o=>e.booking.arrivalBy=o),class:"client-select"},null,8,["options","modelValue"])]),_:1}),i(m,{label:"Referencia lugar llegada",type:"text",placeholder:"Referencia lugar llegada",modelValue:e.booking.placeArrivalReference,"onUpdate:modelValue":t[12]||(t[12]=o=>e.booking.placeArrivalReference=o)},null,8,["modelValue"])]),a("div",ye,[i(m,{label:"N° ref. comprobante",type:"text",placeholder:"N° ref. comprobante",modelValue:e.booking.voucherReference,"onUpdate:modelValue":t[13]||(t[13]=o=>e.booking.voucherReference=o)},null,8,["modelValue"]),i(m,{label:"Contacto emergencia",type:"text",placeholder:"Contacto emergencia",modelValue:e.booking.emergencyContact,"onUpdate:modelValue":t[14]||(t[14]=o=>e.booking.emergencyContact=o)},null,8,["modelValue"]),i(m,{label:"Tel. emergencia",type:"text",placeholder:"Tel. emergencia",modelValue:e.booking.emergencyPhone,"onUpdate:modelValue":t[15]||(t[15]=o=>e.booking.emergencyPhone=o)},null,8,["modelValue"]),i(m,{label:"Observaciones",type:"text",placeholder:"Observaciones",modelValue:e.booking.observations,"onUpdate:modelValue":t[16]||(t[16]=o=>e.booking.observations=o)},null,8,["modelValue"])]),a("div",Ve,[a("div",null,[i(x,{label:"¿Es favorito (reserva)?",checked:e.booking.isFavorite,modelValue:e.booking.isFavorite,"onUpdate:modelValue":t[17]||(t[17]=o=>e.booking.isFavorite=o)},null,8,["checked","modelValue"])]),a("div",null,[i(x,{label:"¿Incluye desayuno?",checked:e.booking.includeBreakfast,modelValue:e.booking.includeBreakfast,"onUpdate:modelValue":t[18]||(t[18]=o=>e.booking.includeBreakfast=o)},null,8,["checked","modelValue"])]),e.booking.includeBreakfast?(c(),u("div",Ce,[a("div",Ae,[a("div",je,[i(m,{label:"N° Desayunos",type:"text",placeholder:"Ingrese número",modelValue:e.booking.numBreakfasts,"onUpdate:modelValue":t[19]||(t[19]=o=>e.booking.numBreakfasts=o)},null,8,["modelValue"])]),a("div",we,[i(g,{label:"Fecha Inicio",name:"d1"},{default:b(()=>[i(j,{modelValue:e.booking.startDate,"onUpdate:modelValue":t[20]||(t[20]=o=>e.booking.startDate=o),class:"form-control",id:"d1",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1})]),a("div",Te,[i(g,{label:"Fecha Fin",name:"d1"},{default:b(()=>[i(j,{modelValue:e.booking.endDate,"onUpdate:modelValue":t[21]||(t[21]=o=>e.booking.endDate=o),class:"form-control",id:"d1",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1})])])])):p("",!0)])])]),_:1}),i(C,{class:"mt-4",noborder:""},{default:b(()=>[a("div",Re,[a("div",Pe,[a("header",He,[Ue,a("div",Be,[a("div",Ee,[i(h,{options:e.tourOptions,modelValue:e.selectedTour,"onUpdate:modelValue":t[22]||(t[22]=o=>e.selectedTour=o),placeholder:"Seleccionar Tipo",class:"w-full"},null,8,["options","modelValue"])])])]),i(B,{class:"-mx-6 mb-5",columns:e.columns,styleClass:"vgt-table table-head v-middle striped lesspadding2 listview",rows:e.projects,"pagination-options":{enabled:!1,perPage:e.perpage},"sort-options":{enabled:!1}},{"table-row":b(o=>[o.column.field=="abierto"?(c(),u("span",Fe,[a("div",Me,[i(x,{modelValue:e.projects[o.index].esAbierto,"onUpdate:modelValue":d=>e.projects[o.index].esAbierto=d,checked:e.projects[o.index].esAbierto},null,8,["modelValue","onUpdate:modelValue","checked"])])])):p("",!0),o.column.field=="tour"?(c(),u("span",{key:1,style:I({color:e.projects[o.index].esAbierto?"red":""}),class:P([{"text-underline-red":e.projects[o.index].esAbierto},"text-slate-500 dark:text-slate-400 block min-w-[208px]"])},[T(_(o.row.description)+" ",1),e.projects[o.index].esAbierto?(c(),u(Y,{key:0},[T(" (Estado abierto) ")],64)):p("",!0)],6)):p("",!0),o.column.field=="vehiculo"?(c(),u("span",{key:2,class:P([{"text-underline-red":e.projects[o.index].esAbierto&&o.column.field=="vehiculo"},"text-slate-500 dark:text-slate-400 block min-w-[108px]"])},[i(h,{options:e.vehiculos,modelValue:e.projects[o.index].vehiculo,"onUpdate:modelValue":d=>e.projects[o.index].vehiculo=d},null,8,["options","modelValue","onUpdate:modelValue"])],2)):p("",!0),o.column.field=="turno"?(c(),u("span",{key:3,class:P([{"text-underline-red":e.projects[o.index].esAbierto&&o.column.field=="turno"},"text-slate-500 dark:text-slate-400 block min-w-[108px]"])},[i(h,{options:e.turnos,modelValue:e.projects[o.index].turno,"onUpdate:modelValue":d=>e.projects[o.index].turno=d},null,8,["options","modelValue","onUpdate:modelValue"])],2)):p("",!0),o.column.field=="pasajero"?(c(),u("span",Se,[i(m,{type:"text",placeholder:"N° pax",modelValue:e.projects[o.index].nPasajseros,"onUpdate:modelValue":d=>e.projects[o.index].nPasajseros=d},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),o.column.field=="fecha"?(c(),u("span",Ie,[e.projects[o.index].esAbierto?(c(),H(m,{key:1,type:"text",placeholder:"Sin asignar Fecha",disabled:""})):(c(),H(j,{key:0,class:"form-control",id:"d1",placeholder:"yyyy, dd M",modelValue:e.projects[o.index].date_assigned,"onUpdate:modelValue":d=>e.projects[o.index].date_assigned=d},null,8,["modelValue","onUpdate:modelValue"]))])):p("",!0),o.column.field=="observation"?(c(),u("span",Ne,[i(m,{type:"text",placeholder:"Observación",modelValue:e.projects[o.index].observacion,"onUpdate:modelValue":d=>e.projects[o.index].observacion=d},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),o.column.field=="precio_corporativo"?(c(),u("span",ze,[i(m,{type:"text",placeholder:"S/.",modelValue:e.projects[o.index].precio_corporate,"onUpdate:modelValue":d=>e.projects[o.index].precio_corporate=d},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),o.column.field=="cobranza"?(c(),u("span",De,[i(m,{type:"text",placeholder:"S/.",modelValue:e.projects[o.index].cobranza,"onUpdate:modelValue":d=>e.projects[o.index].cobranza=d},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0),o.column.field=="realizado"?(c(),u("span",Oe,[e.projects[o.index].esAbierto?(c(),u("div",qe,[a("span",{style:I({color:e.projects[o.index].esAbierto?"red":""})},[i(m,{type:"text",class:"text-danger-500",placeholder:"---",modelValue:e.projects[o.index].realizado,"onUpdate:modelValue":d=>e.projects[o.index].realizado=d,disabled:""},null,8,["modelValue","onUpdate:modelValue"])],4)])):(c(),H(m,{key:1,type:"text",placeholder:"-",modelValue:e.projects[o.index].realizado,"onUpdate:modelValue":d=>e.projects[o.index].realizado=d,disabled:""},null,8,["modelValue","onUpdate:modelValue"]))])):p("",!0),o.column.field=="action"?(c(),u("div",Ge,[a("div",{class:"text-xl",onClick:d=>r.deleteProject(o.index)},[i(U,{icon:"heroicons-outline:trash",class:"text-danger-500"})],8,Le)])):p("",!0)]),_:1},8,["columns","rows","pagination-options"]),a("div",Je,[i(y,{label:"T. TOURS S/. ",class:"append",name:"hi_Fullname",modelValue:e.tour.totalTour,"onUpdate:modelValue":t[23]||(t[23]=o=>e.tour.totalTour=o),type:"text",placeholder:"",horizontal:"",appendIcon:"heroicons-outline:cash",classInput:"text-right"},null,8,["modelValue"])])])])]),_:1}),i(C,{class:"mt-4",noborder:""},{default:b(()=>[a("div",We,[a("div",Xe,[a("div",Ye,[Ke,a("div",Qe,[i(R,{icon:"heroicons-outline:plus-sm",text:"Agregar Reserva",btnClass:" btn-dark font-normal btn-sm ",iconClass:"text-lg",onClick:N(r.openModalReservaHotel,["prevent"])},null,8,["onClick"])])]),i(B,{class:"-mx-6",columns:e.columnsReservasAlojamiento,styleClass:"vgt-table table-head v-middle striped listview",rows:e.reservasHotel,"sort-options":{enabled:!1}},{"table-row":b(o=>{var d,E,F,M,S;return[o.column.field=="code"?(c(),u("span",Ze,_(o.row.code),1)):p("",!0),o.column.field=="nombreHotel"?(c(),u("span",$e,[a("span",eo,_((d=o.row.hotel)==null?void 0:d.tradename),1),T("( "+_((F=(E=o.row.hotel)==null?void 0:E.citie_turistic)==null?void 0:F.description)+") ",1),oo,T(" Cell: "+_((M=o.row.hotel)==null?void 0:M.cellphone),1)])):p("",!0),o.column.field=="detallehotel"?(c(),u("span",to,_((S=o.row.detailbedrooms)==null?void 0:S.map(w=>`${w.description} (${w.quantity} hab. x
                ${w.nights} noches)`).join(", ")),1)):p("",!0),o.column.field==="action"&&e.showDeleteButton?(c(),u("div",lo,[a("div",so,[i(U,{icon:"heroicons-outline:trash",class:"text-danger-500",onClick:N(w=>r.deleteItem(o.row.id),["prevent"])},null,8,["onClick"])])])):p("",!0)]}),_:1},8,["columns","rows"]),a("div",io,[i(y,{label:"T. HOTEL S/. ",class:"append",name:"hi_Fullname",modelValue:e.totalHotelValue,"onUpdate:modelValue":t[24]||(t[24]=o=>e.totalHotelValue=o),type:"text",placeholder:"",horizontal:"",appendIcon:"heroicons-outline:cash",classInput:"text-right"},null,8,["modelValue"])])])])]),_:1}),i(C,{class:"mt-4",noborder:""},{default:b(()=>[a("div",ao,[a("div",no,[i(m,{label:"Ubicación y referencias para recojo del turista",type:"text",placeholder:"Referencia lugar llegada",modelValue:e.booking.reference_location,"onUpdate:modelValue":t[25]||(t[25]=o=>e.booking.reference_location=o)},null,8,["modelValue"])])])]),_:1}),a("div",ro,[co,a("div",uo,[i(R,{text:"Cancelar",btnClass:"btn-light mr-2",onClick:t[26]||(t[26]=o=>l.closeModal())}),i(R,{type:"submit",text:"Guardar Reserva",onClick:t[27]||(t[27]=o=>r.saveReserva()),btnClass:"btn-dark"})])]),a("div",mo,[i(C,{class:"mb-0 book__summary max-w-md"},{default:b(()=>[a("div",ho,[a("table",po,[a("tr",null,[bo,a("td",null,_(e.formattedTotal),1)]),a("tr",null,[fo,a("td",null,_(e.formattedTotalHotel),1)]),go,a("tr",null,[vo,a("td",_o,_(r.totalReserva),1)])])])]),_:1})]),i(z,{activeModal:e.showEditModal,onClose:t[28]||(t[28]=o=>e.showEditModal=!1),title:"Actualizar Registro de Colaborador",onUpdateClientList:r.fetchClients},null,8,["activeModal","onUpdateClientList"]),i(D,{activeModal:e.showReserveModal,title:"Actualizar Registro de Colaborador",onPostComplete:r.handlePostComplete,idCliente:e.idCliente,code:e.code,onClose:t[29]||(t[29]=o=>e.showReserveModal=!1)},null,8,["activeModal","onPostComplete","idCliente","code"]),i(O,{activeModal:e.showComisionar,title:"Actualizar Registro de Colaborador",onCommissionProcessed:r.handleCommissionProcessed,onClose:t[30]||(t[30]=o=>e.showComisionar=!1)},null,8,["activeModal","onCommissionProcessed"]),i(q,{activeModal:e.showAmortizar,title:"Actualizar Registro de Colaborador",onFormSubmitted:r.handleFormSubmitted,idCliente:e.idCliente,totalBooking:e.booking.total,onClose:t[31]||(t[31]=o=>e.showAmortizar=!1)},null,8,["activeModal","onFormSubmitted","idCliente","totalBooking"])])}const it=Z(pe,[["render",ko],["__scopeId","data-v-932ebc58"]]);export{it as default};
