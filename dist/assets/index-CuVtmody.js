import{b as O,u as h,q as u,H as j,d as i,e as t,h as y,j as r,J as f,o as n,f as s,a0 as _,p as x,F as V,m as C,l as T,w as U}from"./index-BLl1OigC.js";import{C as q}from"./index-Hsd0Z0_R.js";import"./index-BcFOD9Ey.js";/* empty css                                              */import{T as c}from"./index-BTHsGrD3.js";import{B as k}from"./index-DCMPjbua.js";import{A as $}from"./index-CYTRoM9F.js";import{u as A}from"./index.esm-C9Fad0dp.js";import{d as B}from"./data-CrQGmqBe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-cleave.min-DAvglPmz.js";import"./tslib.es6-loakx6tV.js";import"./av-2-D6_jNZbn.js";const F={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},M={class:"lg:col-span-2 md:col-span-2 col-span-1"},P={class:"grid grid-cols-2 gap-4"},G={class:"flex gap-4"},H={class:"w-1/2"},J={class:"w-1/2"},Q={class:"lg:col-span-1 md:col-span-1 col-span-1"},K={key:0},W=["src"],X={key:1,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Y={key:2,class:"text-sm text-slate-500 dark:text-slate-300 font-light"},Z={class:"flex space-x-4"},ee={class:"h-[180px] w-[240px] mx-auto mt-6 rounded-md",key:"{i}"},ae=["src"],oe={class:"mt-4"},le=s("span",{class:"font-semibold"},"Se recomienda 280px * 230px .png",-1),re={class:"mt-5 flex justify-end"},_e={__name:"index",setup(se){const p=O(),g=h().headersMultipart(),w=h().headers(),m=u(null);u(0);const d=u([]),e=u({razonSocial:"",numeroRUC:"",nombreComercial:"",direccion:"",celular:"",telefono:"",correoElectronico:"",acercaDeLaEmpresa:"",queOfrecemos:"",image:m.value});async function E(){try{const o=new FormData;if(d.value.length>0){o.append("image",d.value[0]);const a=await f.post("https://thtbackend-production.up.railway.app/api/v1/company/5/update-image",o,g);p.success(a.data.message)}else{o.append("ruc",e.value.numeroRUC),o.append("social_reason",e.value.razonSocial),o.append("tradename",e.value.nombreComercial),o.append("address",e.value.direccion),o.append("email",e.value.correoElectronico),o.append("cellphone",e.value.celular),o.append("telephone",e.value.telefono),o.append("offers_description",e.value.queOfrecemos),o.append("activity_description",e.value.acercaDeLaEmpresa);const a=await f.post("https://thtbackend-production.up.railway.app/api/v1/company/5/update-fields",o,w);p.success(a.data.message)}}catch(o){console.error("Error al actualizar:",o),p.error("Error al actualizar")}}const R=u(!0),D=u(null);setTimeout(()=>{R.value=!1,D.value=!1},1e3);const I=async()=>{try{const o=await f.get("https://thtbackend-production.up.railway.app/api/v1/company/informacion",g);if(console.log(o),o.data.message){p.success(o.data.message,{timeout:3e3});const a=o.data.data[0];e.value.razonSocial=a.social_reason||"",e.value.numeroRUC=a.ruc||"",e.value.nombreComercial=a.tradename||"",e.value.direccion=a.address||"",e.value.celular=a.cellphone||"",e.value.telefono=a.telephone||"",e.value.correoElectronico=a.email||"",e.value.acercaDeLaEmpresa=a.activity_description||"",e.value.queOfrecemos=a.offers_description||"";const v=(a.url_image||"").split("/").pop();e.value.image=v||"";const b=await f.get(`https://thtbackend-production.up.railway.app/api/v1/company/image/${e.value.image}`,{responseType:"blob",...g});console.log(b),m.value=URL.createObjectURL(b.data),console.log(m.value)}}catch(o){console.error("Error fetching data:",o),p.error("Ocurrió un error al obtener los datos")}};function z(o){d.value=o.map(a=>Object.assign(a,{preview:URL.createObjectURL(a)}))}const{getRootProps:L,getInputProps:S,...te}=A({onDrop:z}),N=()=>{console.log("Acción cancelada")};return j(async()=>{I()}),(o,a)=>(n(),i("div",null,[t(r(q),{title:"Información Empresa"},{default:y(()=>[s("form",{onSubmit:U(E,["prevent"])},[s("div",F,[s("div",M,[s("div",P,[t(r(c),{modelValue:e.value.razonSocial,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.razonSocial=l),label:"Razón social",placeholder:"Ingrese Razón social",disabled:""},null,8,["modelValue"]),t(r(c),{modelValue:e.value.numeroRUC,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.numeroRUC=l),label:"N° RUC",placeholder:"Ingrese N° RUC",disabled:""},null,8,["modelValue"]),t(r(c),{modelValue:e.value.nombreComercial,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.nombreComercial=l),label:"Nombre comercial",placeholder:"Ingrese nombre comercial"},null,8,["modelValue"]),t(r(c),{modelValue:e.value.direccion,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.direccion=l),label:"Dirección",placeholder:"Ingrese direción"},null,8,["modelValue"]),s("div",G,[s("div",H,[t(r(c),{modelValue:e.value.celular,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.celular=l),label:"Celular",placeholder:"N° Celular"},null,8,["modelValue"])]),s("div",J,[t(r(c),{modelValue:e.value.telefono,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.telefono=l),label:"Teléfono",placeholder:"N° Teléfono"},null,8,["modelValue"])])]),t(r(c),{modelValue:e.value.correoElectronico,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.correoElectronico=l),label:"Correo electrónico",placeholder:"Ingrese correo electrónico"},null,8,["modelValue"]),t(r(c),{modelValue:e.value.acercaDeLaEmpresa,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.acercaDeLaEmpresa=l),label:"Acerca de la empresa",placeholder:"Ingrese detalle acerca la empresa"},null,8,["modelValue"]),t(r(c),{modelValue:e.value.queOfrecemos,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.queOfrecemos=l),label:"¿Qué ofrecemos?",placeholder:"Ingresar detalle de lo que se ofrecemos"},null,8,["modelValue"])])]),s("div",Q,[s("div",_(r(L)(),{class:["w-full text-center border-dashed border border-secondary-500 rounded-md py-[52px] flex flex-col justify-center items-center",d.value.length===0?"cursor-pointer":" pointer-events-none"]}),[d.value.length===0?(n(),i("div",K,[s("input",_(r(S)(),{class:"hidden"}),null,16),m.value?(n(),i("img",{key:0,src:m.value,alt:"Imagen de la empresa",class:"mx-auto mb-4 object-cover h-[156px] w-[280px] rounded-md"},null,8,W)):x("",!0),o.isDragActive?(n(),i("p",X," Drop the files here ... ")):(n(),i("p",Y," Seleccionar Imagen "))])):x("",!0),s("div",Z,[(n(!0),i(V,null,C(d.value,(l,v)=>(n(),i("div",{key:v,class:"mb-4 flex-none"},[s("div",ee,[s("img",{src:l.preview,class:"object-cover h-full w-full block rounded-md"},null,8,ae)])]))),128))])],16),s("div",oe,[(n(!0),i(V,null,C(r(B),(l,v)=>(n(),T(r($),{type:l.type,key:v,dismissible:"",icon:l.icon,class:"mb-5 mt-3"},{default:y(()=>[le]),_:2},1032,["type","icon"]))),128))]),s("div",re,[t(r(k),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:U(N,["prevent"])}),t(r(k),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark"})])])])],32)]),_:1})]))}};export{_e as default};
