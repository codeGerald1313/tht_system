import{I as U}from"./index-BffMpWx5.js";/* empty css                                              */import{B as M}from"./index-CvW4wJPB.js";import{T as Z}from"./Table-DeKGPd3l.js";import{C as G}from"./index-COOwjdNO.js";import{D as q}from"./index-Bs_uOHMv.js";import{P as ee}from"./index-DEP2tP3N.js";import{P as O}from"./index-Dr9vJUyq.js";import{a as te}from"./basic-tablle-data-AN7MRnVF.js";import{u as B}from"./project-BEvoPr6t.js";import{I as L}from"./index-2H-cusMd.js";import{b as z,u as A,s as C,y as Q,o as u,l as $,g as n,f as e,w as j,e as a,k as t,d as g,q as k,B as I,c as V,F as R,m as T,p as N,t as w,a as ae,C as W,D as le,E as oe,z as se,A as re}from"./index-BFn_3Gdk.js";import{F as _}from"./index-z1TsTTdr.js";import{M as H}from"./index-2mWc_vCg.js";import{T as y}from"./index-BL9tae9R.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as K}from"./menu-BIf-sRSE.js";import"./index-BaZVwneS.js";import"./user-1-Dmhlt7-s.js";import"./user-4-_9lLfOE2.js";import"./user-6-Bk4CTUVR.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./vue-cleave.min-ClV1fVcS.js";/* empty css                                              */import"./transition-DUAAdbaG.js";import"./focus-management-C7_eiYjk.js";import"./keyboard-CmTzE63w.js";import"./use-outside-click-RVZZ1L_X.js";import"./hidden-Br4jqfTk.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-Bo1bAx4t.js";import"./use-resolve-button-type-0pot5Y2u.js";const ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ie={key:0,class:"text-red-500"},de={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ce={key:0,class:"text-red-500"},ue={key:0,class:"text-red-500"},me={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},pe={class:"form-group col-lg-12 form__footerBtn"},ve={class:"text-right"},X={__name:"PartnerCompanyEditModal",props:{activeModal:Boolean,empresaSociaData:Object},emits:["close","updateEmpresaSociaList"],setup(m,{emit:d}){B();const h=z(),S=A().headers(),o=m,x=d,p=()=>{x("close")},l=C({id:"",tradename:"",document:"",fullname:"",cellphone:"",telephone:"",email:"",address:""}),i=()=>{I.post(`https://thtsystemv2.tech/public/api/v1/partnercompanies/edit/${l.value.id}`,l.value,{...S}).then(s=>{x("updateEmpresaSociaList"),p(),h.success(s.data.message)}).catch(s=>{console.error("Error al guardar los datos:",s)})},b=s=>!!l.value[s],r=s=>b(s);C(!1);const c=()=>{I.post("https://thtsystemv2.tech/public/api/v1/getRucData",{ruc:l.value.document}).then(s=>{l.value.fullname=s.data.data.nombre_o_razon_social,l.value.address=s.data.data.direccion}).catch(s=>{console.error("Error al obtener datos del RUC:",s)})};return Q(()=>o.empresaSociaData,s=>{s&&(l.value.id=s.id,l.value.tradename=s.tradename,l.value.document=s.document,l.value.fullname=s.fullname,l.value.cellphone=s.cellphone,l.value.telephone=s.telephone,l.value.email=s.email,l.value.address=s.address)}),(s,v)=>(u(),$(t(H),{activeModal:o.activeModal,onClose:p,title:"Acualizar Registro de Empresa Socia",sizeClass:"max-w-3xl",centered:""},{default:n(()=>[e("form",{onSubmit:j(i,["prevent"]),class:"space-y-4"},[e("div",ne,[e("div",null,[a(t(_),{label:"N° RUC"},{default:n(()=>[a(t(L),{type:"text",placeholder:"Ingrese el número de RUC",modelValue:l.value.document,"onUpdate:modelValue":v[0]||(v[0]=f=>l.value.document=f),modelModifiers:{trim:!0}},{append:n(()=>[a(t(M),{text:"Sunat",btnClass:"btn-outline-dark ",onClick:j(c,["prevent"])})]),_:1},8,["modelValue"]),r("document")?k("",!0):(u(),g("span",ie,"Por favor ingresa un RUC valido"))]),_:1})]),e("div",null,[a(t(_),{label:"Razón social"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese la razón social",name:"client_fullname",modelValue:l.value.fullname,"onUpdate:modelValue":v[1]||(v[1]=f=>l.value.fullname=f),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})])]),e("div",de,[e("div",null,[a(t(_),{label:"Nombre de la empresa"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese el nombre de la empresa",name:"client_tradename",modelValue:l.value.tradename,"onUpdate:modelValue":v[2]||(v[2]=f=>l.value.tradename=f),modelModifiers:{trim:!0}},null,8,["modelValue"]),r("tradename")?k("",!0):(u(),g("span",ce,"Por favor ingresa un nombre valido"))]),_:1})]),e("div",null,[a(t(_),{label:"Celular"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese el número de celular",modelValue:l.value.cellphone,"onUpdate:modelValue":v[3]||(v[3]=f=>l.value.cellphone=f),modelModifiers:{trim:!0}},null,8,["modelValue"]),r("cellphone")?k("",!0):(u(),g("span",ue,"Por favor ingresa un número valido"))]),_:1})]),e("div",null,[a(t(_),{label:"Teléfono fijo"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese el número de teléfono fijo",name:"client_telephone",modelValue:l.value.telephone,"onUpdate:modelValue":v[4]||(v[4]=f=>l.value.telephone=f),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})])]),e("div",me,[e("div",null,[a(t(_),{label:"Correo electrónico"},{default:n(()=>[a(t(y),{type:"email",placeholder:"Ingrese el correo electrónico",name:"client_email",modelValue:l.value.email,"onUpdate:modelValue":v[5]||(v[5]=f=>l.value.email=f),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),e("div",null,[a(t(_),{label:"Dirección"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Dirección Completa",name:"client_address",modelValue:l.value.address,"onUpdate:modelValue":v[6]||(v[6]=f=>l.value.address=f),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})])]),e("div",pe,[e("div",ve,[a(t(M),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:j(p,["prevent"])}),a(t(M),{type:"submit",text:"Guardar",btnClass:"btn-dark"})])])],32)]),_:1},8,["activeModal"]))}},F=A().headers(),fe={components:{Button:M,InputGroup:L,Pagination:ee,Dropdown:q,EditProject:X,Icon:U,MenuItem:K,Card:G,ProgressBar:O},data(){return{searchTerm:"",empresaSociaData:{},showEditModal:!1,advancedTable:te,current:1,pageRange:10,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:m=>{this.empresaSociaData=m,this.showEditModal=!0}},{name:"delete",icon:"heroicons-outline:trash",doit:async m=>{try{await I.delete(`https://thtsystemv2.tech/public/api/v1/partnercompanies/delete/${m.id}`,F),z().success("Empresa Socia eliminada correctamente",{timeout:1500}),this.listarEmpresasSocias()}catch(d){console.error("Error al eliminar empleado:",d)}}}],columns:[{label:"Nomnre Empresa",field:"tradename"},{label:"N° Documento",field:"document"},{label:"Celular",field:"cellphone"},{label:"Dirección",field:"address"},{label:"Action",field:"action"}],projects:[]}},methods:{async reloadCrmTable(){try{await this.listarEmpresasSocias()}catch(m){console.error("Error al recargar Emresas Socias :",m)}},async listarEmpresasSocias(){try{const m=await I.get("https://thtsystemv2.tech/public/api/v1/partnercompanies/list",F);this.projects=m.data.data,z().success("Empresas Socias listadas correctamente",{timeout:1500})}catch(m){console.error("Error al obtener los datos de los empleados:",m)}}},mounted(){this.listarEmpresasSocias()}},ge={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},he=e("h5",null,"Todos las Empresas Socias ",-1),_e={class:"flex items-center space-x-3"},xe={key:0,class:"action-btn text-end mr-3"},be={class:"text-xl"},ye=["onClick"],Ce={class:"text-base"},ke={class:"py-4 px-3"};function Ve(m,d,h,S,o,x){const p=V("Button"),l=V("InputGroup"),i=V("Icon"),b=V("MenuItem"),r=V("Dropdown"),c=V("Pagination"),s=V("vue-good-table"),v=V("EditProject"),f=V("Card");return u(),g("div",null,[a(f,{noborder:""},{default:n(()=>[e("div",ge,[he,e("div",_e,[a(p,{icon:"heroicons-outline:arrows-up-down",btnClass:"btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm",iconClass:"text-lg",onClick:x.reloadCrmTable},null,8,["onClick"]),a(l,{modelValue:o.searchTerm,"onUpdate:modelValue":d[0]||(d[0]=E=>o.searchTerm=E),placeholder:"Buscar empresa",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])])]),a(s,{class:"-mx-6",columns:o.columns,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.projects,"pagination-options":{enabled:!0,perPage:m.perpage},"search-options":{enabled:!0,externalQuery:o.searchTerm},"sort-options":{enabled:!1}},{"table-row":n(E=>[E.column.field=="action"?(u(),g("div",xe,[a(r,{classMenuItems:" w-[140px]"},{menus:n(()=>[(u(!0),g(R,null,T(o.actions,(D,Y)=>(u(),$(b,{key:Y},{default:n(()=>[e("div",{onClick:dt=>D.doit(E.row),class:N(`
                
                  ${D.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[e("span",Ce,[a(i,{icon:D.icon},null,8,["icon"])]),e("span",null,w(D.name),1)],10,ye)]),_:2},1024))),128))]),default:n(()=>[e("div",be,[a(i,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):k("",!0)]),"pagination-bottom":n(E=>[e("div",ke,[a(c,{total:o.projects.length,current:o.current,"per-page":m.perpage,pageRange:o.pageRange,onPageChanged:d[1]||(d[1]=D=>o.current=D),pageChanged:E.pageChanged,perPageChanged:E.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"]),a(v,{activeModal:o.showEditModal,onClose:d[2]||(d[2]=E=>o.showEditModal=!1),empresaSociaData:o.empresaSociaData,title:"Acualizar Registro de Empresa Socia",onUpdateEmpresaSociaList:x.listarEmpresasSocias},null,8,["activeModal","empresaSociaData","onUpdateEmpresaSociaList"])]),_:1})])}const we=J(fe,[["render",Ve]]),P=m=>(le("data-v-7ac35cf6"),m=m(),oe(),m),Me={class:"grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},Se={class:"flex justify-between items-end"},Ee={class:"flex space-x-4 items-center rtl:space-x-reverse"},$e={class:"flex-none"},De={class:"h-10 w-10 rounded-md text-lg bg-slate-100 text-slate-900 dark:bg-slate-600 dark:text-slate-200 flex flex-col items-center justify-center font-normal capitalize"},je={class:"font-medium text-base leading-6"},Ie={class:"dark:text-slate-200 text-slate-900 max-w-[160px] truncate"},Pe={class:"text-lg inline-flex flex-col items-center justify-center h-8 w-8 rounded-full bg-gray-500-f7 dark:bg-slate-900 dark:text-slate-400"},Ue=["onClick"],Re={class:"text-base"},Te={class:"text-slate-600 dark:text-slate-400 text-sm pt-4 pb-8"},ze={class:"flex space-x-4 rtl:space-x-reverse"},Be=P(()=>e("span",{class:"block date-label"},"Start date",-1)),Le={class:"block date-text"},Ae=P(()=>e("span",{class:"block date-label"},"Start date",-1)),Ne={class:"block date-text"},Fe={class:"ltr:text-right rtl:text-left text-xs text-slate-600 dark:text-slate-300 mb-1 font-medium"},Ge={class:"grid grid-cols-2 gap-4 mt-6"},qe=P(()=>e("div",{class:"text-slate-400 dark:text-slate-400 text-sm font-normal mb-3"}," Assigned to ",-1)),Oe={class:"flex justify-start -space-x-1.5 rtl:space-x-reverse"},Qe=["src","alt"],We=P(()=>e("div",{class:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-300 text-xs ring-2 ring-slate-100 dark:ring-slate-700 rounded-full h-6 w-6 flex flex-col justify-center items-center"}," +2 ",-1)),He={class:"ltr:text-right rtl:text-left"},Je={class:"inline-flex items-center space-x-1 bg-danger-500 bg-opacity-[0.16] text-danger-500 text-xs font-normal px-2 py-1 rounded-full rtl:space-x-reverse"},Ke=P(()=>e("span",null,"days left",-1)),Xe={__name:"Projects-grid",setup(m){const d=B(),h=ae(),S=W(()=>d.projects),o=(p,l)=>{const i=new Date(p);return new Date(l).getDate()-i.getDate()},x=C([{name:"view",icon:"heroicons:eye",doit:()=>{h.push("/app/project-details")}},{name:"Edit",icon:"heroicons-outline:pencil-alt",doit:p=>{d.updateProject(p)}},{name:"Delete",icon:"heroicons-outline:trash",doit:p=>{d.removeProject(p)}}]);return(p,l)=>(u(),g("div",Me,[(u(!0),g(R,null,T(S.value,(i,b)=>(u(),$(t(G),{bodyClass:"p-6",key:b},{default:n(()=>[e("header",Se,[e("div",Ee,[e("div",$e,[e("div",De,w(i.name.charAt(0)+i.name.charAt(1)),1)]),e("div",je,[e("div",Ie,w(i.name),1)])]),e("div",null,[a(t(q),{classMenuItems:" w-[130px]"},{menus:n(()=>[(u(!0),g(R,null,T(x.value,(r,c)=>(u(),$(t(K),{key:c},{default:n(()=>[e("div",{onClick:s=>r.doit(i),class:N(`
                
                  hover:bg-slate-900 dark:hover:bg-slate-600 dark:hover:bg-opacity-70 hover:text-white
                   w-full border-b border-b-gray-500 border-opacity-10   px-4 py-2 text-sm dark:text-slate-300  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center  capitalize rtl:space-x-reverse `)},[e("span",Re,[a(t(U),{icon:r.icon},null,8,["icon"])]),e("span",null,w(r.name),1)],8,Ue)]),_:2},1024))),128))]),default:n(()=>[e("span",Pe,[a(t(U),{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])]),e("div",Te,w(i.des),1),e("div",ze,[e("div",null,[Be,e("span",Le,w(i.startDate),1)]),e("div",null,[Ae,e("span",Ne,w(i.endDate),1)])]),e("div",Fe,w(i.progress)+"% ",1),a(t(O),{value:i.progress,barColor:"bg-primary-500"},null,8,["value"]),e("div",Ge,[e("div",null,[qe,e("div",Oe,[(u(!0),g(R,null,T(i.assignto,(r,c)=>(u(),g("div",{class:"h-6 w-6 rounded-full ring-1 ring-slate-100",key:c},[e("img",{src:r.image,alt:r.title,class:"w-full h-full rounded-full"},null,8,Qe)]))),128)),We])]),e("div",He,[e("span",Je,[e("span",null,[a(t(U),{icon:"heroicons-outline:clock"})]),e("span",null,w(o(i.startDate,i.endDate)),1),Ke])])])]),_:2},1024))),128))]))}},Ye=J(Xe,[["__scopeId","data-v-7ac35cf6"]]),Ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},et={key:0,class:"text-red-500"},tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},at={key:0,class:"text-red-500"},lt={key:0,class:"text-red-500"},ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},st={class:"form-group col-lg-12 form__footerBtn"},rt={class:"text-right"},nt={__name:"PartnerCompanyAddModal",setup(m){const d=B(),h=z(),S=A().headers(),o=C({tradename:"",document:"",fullname:"",cellphone:"",telephone:"",email:"",address:""});C(null),C(null);const x=()=>{I.post("https://thtsystemv2.tech/public/api/v1/partnercompanies/create",o.value,{...S}).then(r=>{i(),h.success(r.data.message)}).catch(r=>{console.error("Error al guardar los datos:",r)})},p=r=>!!o.value[r],l=r=>p(r),i=()=>{d.closeModal()};C(!1);const b=()=>{I.post("https://thtsystemv2.tech/public/api/v1/getRucData",{ruc:o.value.document}).then(r=>{o.value.fullname=r.data.data.nombre_o_razon_social,o.value.address=r.data.data.direccion}).catch(r=>{console.error("Error al obtener datos del RUC:",r)})};return(r,c)=>(u(),$(t(H),{activeModal:t(d).addmodal,onClose:t(d).closeModal,title:"Registrar nueva Empresa Socia",sizeClass:"max-w-4xl",centered:""},{default:n(()=>[e("form",{onSubmit:j(x,["prevent"]),class:"space-y-4"},[e("div",Ze,[e("div",null,[a(t(_),{label:"N° RUC"},{default:n(()=>[a(t(L),{type:"text",placeholder:"Ingrese el número de RUC",modelValue:o.value.document,"onUpdate:modelValue":c[0]||(c[0]=s=>o.value.document=s),modelModifiers:{trim:!0}},{append:n(()=>[a(t(M),{text:"Sunat",btnClass:"btn-outline-dark ",onClick:j(b,["prevent"])})]),_:1},8,["modelValue"]),l("document")?k("",!0):(u(),g("span",et,"Por favor ingresa un RUC valido"))]),_:1})]),e("div",null,[a(t(_),{label:"Razón social"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese la razón social",name:"client_fullname",modelValue:o.value.fullname,"onUpdate:modelValue":c[1]||(c[1]=s=>o.value.fullname=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})])]),e("div",tt,[e("div",null,[a(t(_),{label:"Nombre de la empresa"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese el nombre de la empresa",name:"client_tradename",modelValue:o.value.tradename,"onUpdate:modelValue":c[2]||(c[2]=s=>o.value.tradename=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),l("tradename")?k("",!0):(u(),g("span",at,"Por favor ingresa un nombre valido"))]),_:1})]),e("div",null,[a(t(_),{label:"Celular"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese el número de celular",modelValue:o.value.cellphone,"onUpdate:modelValue":c[3]||(c[3]=s=>o.value.cellphone=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),l("cellphone")?k("",!0):(u(),g("span",lt,"Por favor ingresa un número valido"))]),_:1})]),e("div",null,[a(t(_),{label:"Teléfono fijo"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Ingrese el número de teléfono fijo",name:"client_telephone",modelValue:o.value.telephone,"onUpdate:modelValue":c[4]||(c[4]=s=>o.value.telephone=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})])]),e("div",ot,[e("div",null,[a(t(_),{label:"Correo electrónico"},{default:n(()=>[a(t(y),{type:"email",placeholder:"Ingrese el correo electrónico",name:"client_email",modelValue:o.value.email,"onUpdate:modelValue":c[5]||(c[5]=s=>o.value.email=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),e("div",null,[a(t(_),{label:"Dirección"},{default:n(()=>[a(t(y),{type:"text",placeholder:"Dirección Completa",name:"client_address",modelValue:o.value.address,"onUpdate:modelValue":c[6]||(c[6]=s=>o.value.address=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})])]),e("div",st,[e("div",rt,[a(t(M),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:j(i,["prevent"])}),a(t(M),{type:"submit",text:"Guardar",btnClass:"btn-dark"})])])],32)]),_:1},8,["activeModal","onClose"]))}},it={class:"flex flex-wrap justify-between items-center mb-4"},Gt={__name:"index",setup(m){const d=B();let h=C("list");const S=()=>{d.openProject()},o=C(0),x=()=>{o.value=window.innerWidth};se(()=>{window.addEventListener("resize",x),x()});const p=W(()=>d.projects),l=C(!0),i=C(!1);return setTimeout(()=>{l.value=!1},1e3),Q(h,(b,r)=>{b!==r&&(b==="list"?(l.value=!0,i.value=!1):(l.value=!1,i.value=!0),setTimeout(()=>{l.value=!1,i.value=!1},1e3))}),(b,r)=>(u(),g("div",null,[e("div",it,[e("div",{class:N(["md:flex md:space-x-4 md:justify-end items-center rtl:space-x-reverse",o.value<768?"space-x-rb":""])},[a(t(M),{icon:"heroicons:list-bullet",text:"Vista de Lista",btnClass:`${t(h)==="list"?"bg-slate-900 dark:bg-slate-700  text-white":" bg-white dark:bg-slate-800 dark:text-slate-300"}   h-min text-sm font-normal`,iconClass:" text-lg",onClick:r[0]||(r[0]=c=>re(h)?h.value="list":h="list"),isLoading:l.value,isDisabled:l.value},null,8,["btnClass","isLoading","isDisabled"]),a(t(M),{icon:"heroicons-outline:plus",text:"Agregar Empresa Socia",btnClass:"btn-dark dark:bg-slate-800  h-min text-sm font-normal",iconClass:" text-lg",onClick:S,isLoading:t(d).isLoading},null,8,["isLoading"])],2)]),l.value?(u(),$(t(Z),{key:0,count:p.value.length},null,8,["count"])):k("",!0),t(h)==="grid"&&!i.value?(u(),$(t(Ye),{key:1})):k("",!0),t(h)==="list"&&!l.value?(u(),$(t(we),{key:2})):k("",!0),a(nt),a(X)]))}};export{Gt as default};
