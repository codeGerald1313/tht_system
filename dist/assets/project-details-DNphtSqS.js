import{I as ne}from"./index-DxXSMpKh.js";/* empty css                                              */import{B as D}from"./index-DOAnfiMc.js";import{T as Ie}from"./Table-Cdxfkvcg.js";import{s as c,u as be,b as ie,z as fe,y as J,c as w,o as v,d as g,e as o,g as d,f as a,w as O,k as t,q as I,l as N,B as M,t as k,F as de,m as re,p as he,a as we,C as _e,D as $e,E as Te,A as Be}from"./index-CyQKzwXM.js";import{F as f}from"./index-B8UWVO2a.js";import{I as K}from"./index-BVBpVZEi.js";import{C as ce}from"./index-CoHYOsAq.js";import{M as ge}from"./index-D1RHiM9F.js";import{V as ve}from"./VueSelect-CeaoYkHk.js";import{T as xe}from"./index-B-jw8vvV.js";import{T as L}from"./index-C6OqzQN-.js";import{u as ue}from"./project-7SCfM68f.js";import"./index.esm-CE_rBlP_.js";import{S as H}from"./index-Jp7OXFH1.js";import"./VueSelect.vue_vue_type_style_index_0_lang-XABNT5P5.js";import{D as Se}from"./index-Br1mhpyn.js";import{P as Fe}from"./index-BXlIw-0P.js";import{P as Ve}from"./index-BrRQqvEE.js";import{a as Me}from"./basic-tablle-data-AN7MRnVF.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as Ee}from"./menu-BlqYkBdn.js";import"./vue-cleave.min-BqMPJFk5.js";/* empty css                                              */import"./transition-BehYXQjK.js";import"./focus-management-DKnT3RdX.js";import"./keyboard-C8YEoqI_.js";import"./use-outside-click-WivoOT8p.js";import"./hidden-1JsWbmcm.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-CLDwNzJK.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./tslib.es6-loakx6tV.js";import"./user-1-Dmhlt7-s.js";import"./user-4-_9lLfOE2.js";import"./user-6-Bk4CTUVR.js";import"./use-resolve-button-type-DXZUzXBT.js";const Pe={class:"grid lg:grid-cols-3 gap-4"},Ue={class:"grid lg:grid-cols-3 gap-4"},Ae={class:"flex items-center"},Oe=a("span",{id:"type-document-error",class:"text-red-500",style:{display:"none"}},"Debe seleccionar un tipo de documento",-1),Le={key:0,class:"ml-auto text-red-500"},Ne=a("span",{id:"input-value-error",class:"text-red-500",style:{display:"none"}},"El número de documento es requerido",-1),Re={class:"space-y-4"},qe={class:"flex justify-end space-x-2"},ze=a("span",{id:"client-fullname-error",class:"text-red-500",style:{display:"none"}},"El nombre del empleado es requerido",-1),Je={class:"grid lg:grid-cols-3 gap-4 grid-cols-1"},Ge={class:"form-group col-lg-12 form__footerBtn mt-4"},Ye={class:"text-right"},je={__name:"AddProject",emits:["createEmployeeList"],setup(h,{emit:b}){const x=c(""),$=c(""),p=b;let E=ue();const S=c([]),y=()=>{if(e.value.inputValue.length!==8){_.value=!0;return}M.post("https://thtsystemv2.tech/public/api/v1/getDniData",{dni:e.value.inputValue}).then(r=>{e.value.clientFullname=r.data.data.nombre_completo}).catch(r=>{console.error("Error al obtener datos del DNI:",r)})},u=()=>{M.get("https://thtsystemv2.tech/public/api/v1/jobs/list",T).then(r=>{const l=r.data.data;S.value=l.map(s=>({id:s.id,label:s.description}))}).catch(r=>{console.error("Error al obtener la lista de trabajos:",r)})},V=()=>{E.closeModal()},_=c(!1),C=c(""),T=be().headersMultipart(),B=ie(),P=[{id:1,label:"DNI"},{id:2,label:"RUC"}],m=c("DNI"),e=c({jobSelected:"",typeDocumentSelected:"",inputValue:"",description:"",clientFullname:"",clientAddress:"",clientCellphone:"",clientTelephone:"",clientEmail:"",dateBirthday:"",statusSelected:"",sexSelected:""});e.value.typeDocumentSelected=m;const R=c(null);c(null);const Z=c(null),pe=c(null),ee=()=>{const r=new FormData,l=(j,A,me,Q)=>{if(j){const W=j.textContent.trim(),q=A.find(z=>z.label===W);q&&(me.value=q.id,Q==="sexSelected"?x.value=q.label:Q==="statusSelected"&&($.value=q.label),r.append(Q,q.id))}},s=document.querySelector(".job-select .vs__selected-options");l(s,S.value,R,"jobSelected");const n=document.querySelector(".sexo-select .vs__selected-options");l(n,se,Z,"sexSelected");const i=document.querySelector(".estado-select .vs__selected-options");l(i,ae,pe,"statusSelected");const F=P.find(j=>j.label===m.value);F&&(e.value.typeDocumentSelected=F.id),e.value.jobSelected=R.value,e.value.sexSelected=x.value,e.value.statusSelected=$.value;let Y=!1;e.value.inputValue?document.getElementById("input-value-error").style.display="none":(document.getElementById("input-value-error").style.display="block",Y=!0),e.value.clientFullname?document.getElementById("client-fullname-error").style.display="none":(document.getElementById("client-fullname-error").style.display="block",Y=!0),!Y&&(r.append("companyjob_id",e.value.jobSelected),r.append("typedocument_id",e.value.typeDocumentSelected),r.append("fullname",e.value.clientFullname),r.append("document",e.value.inputValue),r.append("address",e.value.clientAddress),r.append("email",e.value.clientEmail),r.append("telephone",e.value.clientTelephone),r.append("cellphone",e.value.clientCellphone),r.append("date_birthday",e.value.dateBirthday),r.append("sex",e.value.sexSelected),r.append("status",e.value.statusSelected),M.post("https://thtsystemv2.tech/public/api/v1/employees/create",r,{...T}).then(j=>{p("createEmployeeList"),V(),B.success(j.data.message)}).catch(j=>{console.error("Error:",j)}))},te=()=>{M.post("https://thtsystemv2.tech/public/api/v1/jobs/create",{description:C.value},{...T}).then(r=>{B.success(r.data.message),u()}).catch(r=>{console.error("Error:",r),B.error("Error al crear el trabajo.")})},le=()=>{e.value.inputValue&&(document.getElementById("input-value-error").style.display="none"),e.value.clientFullname&&(document.getElementById("client-fullname-error").style.display="none")},oe=()=>{U.value=!1},ae=[{id:1,label:"Seleccione"},{id:2,label:"Soltero"},{id:3,label:"Casado"}],U=c(!1),G=()=>{U.value=!0},se=[{id:1,label:"Seleccione"},{id:2,label:"Masculino"},{id:3,label:"Femenino"}];return fe(()=>{u()}),J(m,(r,l)=>{}),(r,l)=>{const s=w("flat-pickr");return v(),g("div",null,[o(t(ge),{activeModal:t(E).addmodal,onClose:t(E).closeModal,title:"Registrar nuevo empleado",sizeClass:"max-w-4xl",centered:""},{default:d(()=>[a("div",Pe,[a("form",{onSubmit:O(ee,["prevent"]),class:"space-y-4 col-span-3"},[a("div",Ue,[a("div",Ae,[o(t(f),{label:"Puesto de trabajo",class:"flex-1"},{default:d(()=>[o(t(ve),{options:S.value,modelValue:e.value.jobSelected,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value.jobSelected=n),class:"w-full job-select"},null,8,["options","modelValue"])]),_:1}),a("button",{onClick:O(G,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),o(t(f),{label:"Tipo documento"},{default:d(()=>[o(t(H),{options:P,modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=n=>m.value=n),disabled:"",class:"type-document-select"},null,8,["modelValue"]),Oe]),_:1}),a("div",null,[o(t(f),{label:"N° Documento"},{default:d(()=>[o(t(K),{type:"text",placeholder:"DNI",modelValue:e.value.inputValue,"onUpdate:modelValue":l[2]||(l[2]=n=>e.value.inputValue=n),onInput:le},{append:d(()=>[o(t(D),{text:"RENIEC",btnClass:"btn-outline-dark",onClick:O(y,["prevent"])})]),_:1},8,["modelValue"])]),_:1}),_.value?(v(),g("span",Le,"* Debe tener 8 dígitos")):I("",!0),Ne])]),U.value?(v(),N(t(ce),{key:0,title:"Nuevo Registro",class:"bg-slate-800",titleClass:"text-white",noborder:""},{default:d(()=>[a("div",Re,[o(t(K),{label:"Descripcion",name:"hi_Fullname",type:"text",placeholder:"Puesto de Trabajo",horizontal:"",prependIcon:"heroicons-outline:user",merged:"",modelValue:C.value,"onUpdate:modelValue":l[3]||(l[3]=n=>C.value=n)},null,8,["modelValue"]),a("div",qe,[o(t(D),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:oe}),o(t(D),{text:"Guardar",btnClass:"btn-dark",onClick:O(te,["prevent"])})])])]),_:1})):I("",!0),o(t(f),{label:"Nombre del empleado"},{default:d(()=>[o(t(L),{modelValue:e.value.clientFullname,"onUpdate:modelValue":l[4]||(l[4]=n=>e.value.clientFullname=n),placeholder:"Ingrese nombre del empleado",onInput:le},null,8,["modelValue"]),ze]),_:1}),o(t(f),{label:"Dirección"},{default:d(()=>[o(t(xe),{modelValue:e.value.clientAddress,"onUpdate:modelValue":l[5]||(l[5]=n=>e.value.clientAddress=n),placeholder:"Ingrese direción"},null,8,["modelValue"])]),_:1}),a("div",Je,[o(t(f),{label:"Celular"},{default:d(()=>[o(t(L),{modelValue:e.value.clientCellphone,"onUpdate:modelValue":l[6]||(l[6]=n=>e.value.clientCellphone=n),placeholder:"Ingrese celular"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Teléfono fijo"},{default:d(()=>[o(t(L),{modelValue:e.value.clientTelephone,"onUpdate:modelValue":l[7]||(l[7]=n=>e.value.clientTelephone=n),placeholder:"Ingrese telefóno fijo"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Correo electrónico"},{default:d(()=>[o(t(L),{modelValue:e.value.clientEmail,"onUpdate:modelValue":l[8]||(l[8]=n=>e.value.clientEmail=n),placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Fecha de nacimiento"},{default:d(()=>[o(s,{modelValue:e.value.dateBirthday,"onUpdate:modelValue":l[9]||(l[9]=n=>e.value.dateBirthday=n),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Estado"},{default:d(()=>[o(t(ve),{options:ae,modelValue:e.value.statusSelected,"onUpdate:modelValue":l[10]||(l[10]=n=>e.value.statusSelected=n),class:"estado-select"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Sexo"},{default:d(()=>[o(t(ve),{options:se,modelValue:e.value.sexSelected,"onUpdate:modelValue":l[11]||(l[11]=n=>e.value.sexSelected=n),class:"sexo-select"},null,8,["modelValue"])]),_:1})])],32)]),a("div",Ge,[a("div",Ye,[o(t(D),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:V}),o(t(D),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:ee})])])]),_:1},8,["activeModal","onClose"])])}}},Qe={class:"grid lg:grid-cols-3 gap-4"},We={class:"grid lg:grid-cols-3 gap-4"},He={class:"flex items-center"},Ke=a("span",{id:"type-document-error",class:"text-red-500",style:{display:"none"}},"Debe seleccionar un tipo de documento",-1),Xe={key:0,class:"ml-auto text-red-500"},Ze=a("span",{id:"input-value-error",class:"text-red-500",style:{display:"none"}},"El número de documento es requerido",-1),et={class:"space-y-4"},tt={class:"flex justify-end space-x-2"},lt=a("span",{id:"client-fullname-error",class:"text-red-500",style:{display:"none"}},"El nombre del empleado es requerido",-1),ot={class:"grid lg:grid-cols-3 gap-4 grid-cols-1"},at={class:"form-group col-lg-12 form__footerBtn mt-4"},st={class:"text-right"},ke={__name:"EditProject",props:{activeModal:Boolean,employeeData:Object},emits:["close","updateEmployeeList"],setup(h,{emit:b}){const x=h,$=b,p=()=>{$("close")},E=c(""),S=c("");ue();const y=c([]),u=()=>{if(e.value.inputValue.length!==8){_.value=!0;return}M.post("https://thtsystemv2.tech/public/api/v1/getDniData",{dni:e.value.inputValue}).then(l=>{e.clientFullname=l.data.data.nombre_completo}).catch(l=>{console.error("Error al obtener datos del DNI:",l)})},V=()=>{M.get("https://thtsystemv2.tech/public/api/v1/jobs/list",T).then(l=>{const s=l.data.data;y.value=s.map(n=>({id:n.id,label:n.description}))}).catch(l=>{console.error("Error al obtener la lista de trabajos:",l)})},_=c(!1),C=c(""),T=be().headersMultipart(),B=ie(),P=[{id:1,label:"DNI"},{id:2,label:"RUC"}],m=c(P[0].label),e=c({idEmploye:"",jobSelected:"",jobSelectedId:"",typeDocumentSelected:"",inputValue:"",description:"",clientFullname:"",clientAddress:"",clientCellphone:"",clientTelephone:"",clientEmail:"",dateBirthday:"",statusSelected:"",sexSelected:""});e.value.typeDocumentSelected=m;const R=c(null),Z=c(null),pe=c(null),ee=c(null),te=()=>{const l=new FormData,s=(A,me,Q,W)=>{if(A){const q=A.textContent.trim(),z=me.find(De=>De.label===q);z&&(Q.value=z.id,W==="sexSelected"?E.value=z.label:W==="statusSelected"&&(S.value=z.label),l.append(W,z.id))}},n=document.querySelector(".job-select .vs__selected-options");s(n,y.value,R,"jobSelected");const i=document.querySelector(".type-document-select .vs__selected-options");s(i,P,Z,"typeDocumentSelected");const F=document.querySelector(".sexo-select .vs__selected-options");s(F,r,pe,"sexSelected");const Y=document.querySelector(".estado-select .vs__selected-options");s(Y,U,ee,"statusSelected"),e.value.jobSelected=R.value;let j=!1;e.value.typeDocumentSelected?document.getElementById("type-document-error").style.display="none":(document.getElementById("type-document-error").style.display="block",j=!0),e.value.inputValue?document.getElementById("input-value-error").style.display="none":(document.getElementById("input-value-error").style.display="block",j=!0),e.value.clientFullname?document.getElementById("client-fullname-error").style.display="none":(document.getElementById("client-fullname-error").style.display="block",j=!0),!j&&(l.append("companyjob_id",e.value.jobSelectedId),l.append("fullname",e.value.clientFullname),l.append("document",e.value.inputValue),l.append("address",e.value.clientAddress),l.append("email",e.value.clientEmail),l.append("telephone",e.value.clientTelephone),l.append("cellphone",e.value.clientCellphone),l.append("date_birthday",e.value.dateBirthday),l.append("sex",e.value.sexSelected),l.append("status",e.value.statusSelected),M.post(`https://thtsystemv2.tech/public/api/v1/employees/edit/${e.value.idEmploye}`,l,T).then(A=>{$("updateEmployeeList"),p(),B.success(A.data.message)}).catch(A=>{console.error("Error:",A),B.error("Error al actualizar el empleado.")}))},le=()=>{M.post("https://thtsystemv2.tech/public/api/v1/jobs/create",{description:C.value},{...T}).then(l=>{B.success(l.data.message),V()}).catch(l=>{console.error("Error:",l),B.error("Error al crear el trabajo.")})},oe=()=>{e.value.typeDocumentSelected&&(document.getElementById("type-document-error").style.display="none"),e.value.inputValue&&(document.getElementById("input-value-error").style.display="none"),e.value.clientFullname&&(document.getElementById("client-fullname-error").style.display="none")},ae=()=>{G.value=!1},U=[{id:1,label:"Seleccione"},{id:2,label:"Soltero"},{id:3,label:"Casado"}],G=c(!1),se=()=>{G.value=!0},r=[{id:1,label:"Seleccione"},{id:2,label:"Masculino"},{id:3,label:"Femenino"}];return fe(()=>{V()}),J(()=>x.employeeData,l=>{if(l){e.value.idEmploye=l.id,e.value.inputValue=l.document,e.value.clientFullname=l.fullname,e.value.clientAddress=l.address,e.value.clientCellphone=l.cellphone,e.value.clientTelephone=l.telephone,e.value.clientEmail=l.email,e.value.dateBirthday=l.date_birthday;const s=r.find(F=>F.label===l.sex),n=U.find(F=>F.label===l.status);s&&(e.value.sexSelected=s.label),n&&(e.value.statusSelected=n.label);const i=y.value.find(F=>F.id===l.companyjob_id);i?(e.value.jobSelected=i.label,e.value.jobSelectedId=i.id):(e.value.jobSelected="",e.value.jobSelectedId="")}}),J(()=>e.value.jobSelected,l=>{const s=y.value.find(n=>n.label===l);s&&(e.value.jobSelectedId=s.id)}),J(()=>e.value.sexSelected,l=>{const s=r.find(n=>n.label===l);s&&(e.value.sexSelected=s.label)}),J(()=>e.value.statusSelected,l=>{const s=U.find(n=>n.label===l);s&&(e.value.statusSelected=s.label)}),(l,s)=>{const n=w("flat-pickr");return v(),g("div",null,[o(t(ge),{activeModal:x.activeModal,onClose:p,title:"Actualizar Datos Empleado",sizeClass:"max-w-4xl",centered:""},{default:d(()=>[a("div",Qe,[a("form",{onSubmit:O(te,["prevent"]),class:"space-y-4 col-span-3"},[a("div",We,[a("div",He,[o(t(f),{label:"Puesto de trabajo",class:"flex-1"},{default:d(()=>[o(t(H),{options:y.value,modelValue:e.value.jobSelected,"onUpdate:modelValue":s[0]||(s[0]=i=>e.value.jobSelected=i),class:"w-full job-select"},null,8,["options","modelValue"])]),_:1}),a("button",{onClick:O(se,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),o(t(f),{label:"Tipo documento",class:"type-document-select"},{default:d(()=>[o(t(H),{options:P,modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=i=>m.value=i),disabled:""},null,8,["modelValue"]),Ke]),_:1}),a("div",null,[o(t(f),{label:"N° Documento"},{default:d(()=>[o(t(K),{type:"text",placeholder:"DNI",modelValue:e.value.inputValue,"onUpdate:modelValue":s[2]||(s[2]=i=>e.value.inputValue=i),onInput:oe},{append:d(()=>[o(t(D),{text:"RENIEC",btnClass:"btn-outline-dark",onClick:O(u,["prevent"])})]),_:1},8,["modelValue"])]),_:1}),_.value?(v(),g("span",Xe,"* Debe tener 8 dígitos")):I("",!0),Ze])]),G.value?(v(),N(t(ce),{key:0,title:"Nuevo Registro",class:"bg-slate-800",titleClass:"text-white",noborder:""},{default:d(()=>[a("div",et,[o(t(K),{label:"Descripcion",name:"hi_Fullname",type:"text",placeholder:"Puesto de Trabajo",horizontal:"",prependIcon:"heroicons-outline:user",merged:"",modelValue:C.value,"onUpdate:modelValue":s[3]||(s[3]=i=>C.value=i)},null,8,["modelValue"]),a("div",tt,[o(t(D),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:ae}),o(t(D),{text:"Guardar",btnClass:"btn-dark",onClick:O(le,["prevent"])})])])]),_:1})):I("",!0),o(t(f),{label:"Nombre del empleado"},{default:d(()=>[o(t(L),{modelValue:e.value.clientFullname,"onUpdate:modelValue":s[4]||(s[4]=i=>e.value.clientFullname=i),placeholder:"Ingrese nombre del empleado",onInput:oe},null,8,["modelValue"]),lt]),_:1}),o(t(f),{label:"Dirección"},{default:d(()=>[o(t(xe),{modelValue:e.value.clientAddress,"onUpdate:modelValue":s[5]||(s[5]=i=>e.value.clientAddress=i),placeholder:"Ingrese direción"},null,8,["modelValue"])]),_:1}),a("div",ot,[o(t(f),{label:"Celular"},{default:d(()=>[o(t(L),{modelValue:e.value.clientCellphone,"onUpdate:modelValue":s[6]||(s[6]=i=>e.value.clientCellphone=i),placeholder:"Ingrese celular"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Teléfono fijo"},{default:d(()=>[o(t(L),{modelValue:e.value.clientTelephone,"onUpdate:modelValue":s[7]||(s[7]=i=>e.value.clientTelephone=i),placeholder:"Ingrese telefóno fijo"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Correo electrónico"},{default:d(()=>[o(t(L),{modelValue:e.value.clientEmail,"onUpdate:modelValue":s[8]||(s[8]=i=>e.value.clientEmail=i),placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Fecha de nacimiento"},{default:d(()=>[o(n,{modelValue:e.value.dateBirthday,"onUpdate:modelValue":s[9]||(s[9]=i=>e.value.dateBirthday=i),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Estado"},{default:d(()=>[o(t(H),{options:U,modelValue:e.value.statusSelected,"onUpdate:modelValue":s[10]||(s[10]=i=>e.value.statusSelected=i),class:"estado-select"},null,8,["modelValue"])]),_:1}),o(t(f),{label:"Sexo"},{default:d(()=>[o(t(H),{options:r,modelValue:e.value.sexSelected,"onUpdate:modelValue":s[11]||(s[11]=i=>e.value.sexSelected=i),class:"sexo-select"},null,8,["modelValue"])]),_:1})])],32)]),a("div",at,[a("div",st,[o(t(D),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:p}),o(t(D),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:te})])])]),_:1},8,["activeModal"])])}}},ye=be().headers(),nt={components:{InputGroup:K,Button:D,Pagination:Fe,EditProject:ke,AddProject:je,Dropdown:Se,Icon:ne,MenuItem:Ee,Card:ce,ProgressBar:Ve},data(){return{searchTerm:"",advancedTable:Me,current:1,perpage:6,employeeData:{},pageRange:10,showEditModal:!1,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:h=>{this.employeeData=h,this.showEditModal=!0}},{name:"delete",icon:"heroicons-outline:trash",doit:async h=>{try{await M.delete(`https://thtsystemv2.tech/public/api/v1/employees/delete/${h.id}`,ye),ie().success("Empleado eliminado correctamente",{timeout:1500}),this.listarEmpleados()}catch(b){console.error("Error al eliminar empleado:",b)}}}],columns:[{label:"Nombre completo",field:"fullname"},{label:"Documento",field:"document"},{label:"Puesto de Trabajo",field:"company_job.description"},{label:"Celular",field:"cellphone"},{label:"Action",field:"action"}],projects:[]}},methods:{async reloadCrmTable(){try{await this.listarEmpleados()}catch(h){console.error("Error al recargar la tabla de empleados:",h)}},async listarEmpleados(){try{const h=await M.get("https://thtsystemv2.tech/public/api/v1/employees/list",ye);this.projects=h.data.data,ie().success("Empleados listados correctamente",{timeout:1500})}catch(h){console.error("Error al obtener los datos de los empleados:",h)}}},async mounted(){try{await Promise.all([this.listarEmpleados()])}catch(h){console.error("Error al ejecutar operaciones asíncronas:",h)}}},dt={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},rt=a("h5",null,"Todos los Empleados",-1),it={class:"flex items-center space-x-3"},ct={key:0},ut={key:1},pt={key:2,class:"font-bold"},mt={key:3},vt={key:4,class:"action-btn text-end mr-3"},bt={class:"text-xl"},ft=["onClick"],ht={class:"text-base"},yt={class:"py-4 px-3"};function _t(h,b,x,$,p,E){const S=w("Button"),y=w("InputGroup"),u=w("Icon"),V=w("MenuItem"),_=w("Dropdown"),C=w("Pagination"),T=w("vue-good-table"),B=w("EditProject"),P=w("Card");return v(),g("div",null,[o(P,{noborder:""},{default:d(()=>[a("div",dt,[rt,a("div",it,[o(S,{icon:"heroicons-outline:arrows-up-down",btnClass:"btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm",iconClass:"text-lg",onClick:E.reloadCrmTable},null,8,["onClick"]),o(y,{modelValue:p.searchTerm,"onUpdate:modelValue":b[0]||(b[0]=m=>p.searchTerm=m),placeholder:"Buscar Empleado",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])])]),o(T,{class:"-mx-6",columns:p.columns,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:p.projects,"pagination-options":{enabled:!0,perPage:p.perpage},"search-options":{enabled:!0,externalQuery:p.searchTerm},"sort-options":{enabled:!1}},{"table-row":d(m=>[m.column.field=="fullname"?(v(),g("span",ct,k(m.row.fullname),1)):I("",!0),m.column.field=="document"?(v(),g("span",ut,k(m.row.document),1)):I("",!0),m.column.field=="company_job.description"?(v(),g("span",pt,k(m.row.company_job.description),1)):I("",!0),m.column.field=="cellphone"?(v(),g("span",mt,k(m.row.cellphone),1)):I("",!0),m.column.field=="action"?(v(),g("div",vt,[o(_,{classMenuItems:" w-[140px]"},{menus:d(()=>[(v(!0),g(de,null,re(p.actions,(e,R)=>(v(),N(V,{key:R},{default:d(()=>[a("div",{onClick:Z=>e.doit(m.row),class:he(`
              
                ${e.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                 w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[a("span",ht,[o(u,{icon:e.icon},null,8,["icon"])]),a("span",null,k(e.name),1)],10,ft)]),_:2},1024))),128))]),default:d(()=>[a("div",bt,[o(u,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):I("",!0)]),"pagination-bottom":d(m=>[a("div",yt,[o(C,{total:p.projects.length,current:p.current,"per-page":p.perpage,pageRange:p.pageRange,onPageChanged:b[1]||(b[1]=e=>p.current=e),pageChanged:m.pageChanged,perPageChanged:m.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"]),o(B,{activeModal:p.showEditModal,onClose:b[2]||(b[2]=m=>p.showEditModal=!1),employeeData:p.employeeData,title:"Actualizar Datos Empleado",onUpdateEmployeeList:E.listarEmpleados},null,8,["activeModal","employeeData","onUpdateEmployeeList"])]),_:1})])}const gt=Ce(nt,[["render",_t]]),X=h=>($e("data-v-34df6e87"),h=h(),Te(),h),xt={class:"grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},St={class:"flex justify-between items-end"},Vt={class:"flex space-x-4 items-center rtl:space-x-reverse"},Ct={class:"flex-none"},Et={class:"h-10 w-10 rounded-md text-lg bg-slate-100 text-slate-900 dark:bg-slate-600 dark:text-slate-200 flex flex-col items-center justify-center font-normal capitalize"},jt={class:"font-medium text-base leading-6"},kt={class:"dark:text-slate-200 text-slate-900 max-w-[160px] truncate"},Dt={class:"text-lg inline-flex flex-col items-center justify-center h-8 w-8 rounded-full bg-gray-500-f7 dark:bg-slate-900 dark:text-slate-400"},It=["onClick"],wt={class:"text-base"},$t={class:"text-slate-600 dark:text-slate-400 text-sm pt-4 pb-8"},Tt={class:"flex space-x-4 rtl:space-x-reverse"},Bt=X(()=>a("span",{class:"block date-label"},"Start date",-1)),Ft={class:"block date-text"},Mt=X(()=>a("span",{class:"block date-label"},"Start date",-1)),Pt={class:"block date-text"},Ut={class:"ltr:text-right rtl:text-left text-xs text-slate-600 dark:text-slate-300 mb-1 font-medium"},At={class:"grid grid-cols-2 gap-4 mt-6"},Ot=X(()=>a("div",{class:"text-slate-400 dark:text-slate-400 text-sm font-normal mb-3"}," Assigned to ",-1)),Lt={class:"flex justify-start -space-x-1.5 rtl:space-x-reverse"},Nt=["src","alt"],Rt=X(()=>a("div",{class:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-300 text-xs ring-2 ring-slate-100 dark:ring-slate-700 rounded-full h-6 w-6 flex flex-col justify-center items-center"}," +2 ",-1)),qt={class:"ltr:text-right rtl:text-left"},zt={class:"inline-flex items-center space-x-1 bg-danger-500 bg-opacity-[0.16] text-danger-500 text-xs font-normal px-2 py-1 rounded-full rtl:space-x-reverse"},Jt=X(()=>a("span",null,"days left",-1)),Gt={__name:"Projects-grid",setup(h){const b=ue(),x=we(),$=_e(()=>b.projects),p=(S,y)=>{const u=new Date(S);return new Date(y).getDate()-u.getDate()},E=c([{name:"view",icon:"heroicons:eye",doit:()=>{x.push("/app/project-details")}},{name:"Edit",icon:"heroicons-outline:pencil-alt",doit:S=>{b.updateProject(S)}},{name:"Delete",icon:"heroicons-outline:trash",doit:S=>{b.removeProject(S)}}]);return(S,y)=>(v(),g("div",xt,[(v(!0),g(de,null,re($.value,(u,V)=>(v(),N(t(ce),{bodyClass:"p-6",key:V},{default:d(()=>[a("header",St,[a("div",Vt,[a("div",Ct,[a("div",Et,k(u.name.charAt(0)+u.name.charAt(1)),1)]),a("div",jt,[a("div",kt,k(u.name),1)])]),a("div",null,[o(t(Se),{classMenuItems:" w-[130px]"},{menus:d(()=>[(v(!0),g(de,null,re(E.value,(_,C)=>(v(),N(t(Ee),{key:C},{default:d(()=>[a("div",{onClick:T=>_.doit(u),class:he(`
                
                  hover:bg-slate-900 dark:hover:bg-slate-600 dark:hover:bg-opacity-70 hover:text-white
                   w-full border-b border-b-gray-500 border-opacity-10   px-4 py-2 text-sm dark:text-slate-300  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center  capitalize rtl:space-x-reverse `)},[a("span",wt,[o(t(ne),{icon:_.icon},null,8,["icon"])]),a("span",null,k(_.name),1)],8,It)]),_:2},1024))),128))]),default:d(()=>[a("span",Dt,[o(t(ne),{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])]),a("div",$t,k(u.des),1),a("div",Tt,[a("div",null,[Bt,a("span",Ft,k(u.startDate),1)]),a("div",null,[Mt,a("span",Pt,k(u.endDate),1)])]),a("div",Ut,k(u.progress)+"% ",1),o(t(Ve),{value:u.progress,barColor:"bg-primary-500"},null,8,["value"]),a("div",At,[a("div",null,[Ot,a("div",Lt,[(v(!0),g(de,null,re(u.assignto,(_,C)=>(v(),g("div",{class:"h-6 w-6 rounded-full ring-1 ring-slate-100",key:C},[a("img",{src:_.image,alt:_.title,class:"w-full h-full rounded-full"},null,8,Nt)]))),128)),Rt])]),a("div",qt,[a("span",zt,[a("span",null,[o(t(ne),{icon:"heroicons-outline:clock"})]),a("span",null,k(p(u.startDate,u.endDate)),1),Jt])])])]),_:2},1024))),128))]))}},Yt=Ce(Gt,[["__scopeId","data-v-34df6e87"]]),Qt={class:"flex flex-wrap justify-between items-center mb-4"},Wt={class:"flex justify-end"},Fl={__name:"project-details",setup(h){const b=ue();let x=c("list");const $=()=>{b.openProject()},p=c(0),E=()=>{p.value=window.innerWidth};fe(()=>{window.addEventListener("resize",E),E()});const S=_e(()=>b.projects),y=c(!0),u=c(!1);return setTimeout(()=>{y.value=!1},1e3),J(x,(V,_)=>{V!==_&&(V==="list"?(y.value=!0,u.value=!1):(y.value=!1,u.value=!0),setTimeout(()=>{y.value=!1,u.value=!1},1e3))}),(V,_)=>(v(),g("div",null,[a("div",Qt,[a("div",{class:he(["md:flex md:space-x-4 md:justify-end items-center rtl:space-x-reverse",p.value<768?"space-x-rb":""])},[o(t(D),{icon:"heroicons:list-bullet",text:"Vista de lista",btnClass:`${t(x)==="list"?"bg-slate-900 dark:bg-slate-700  text-white":" bg-white dark:bg-slate-800 dark:text-slate-300"}   h-min text-sm font-normal`,iconClass:" text-lg",onClick:_[0]||(_[0]=C=>Be(x)?x.value="list":x="list"),isLoading:y.value,isDisabled:y.value},null,8,["btnClass","isLoading","isDisabled"]),a("div",Wt,[o(t(D),{icon:"heroicons-outline:plus",text:"Agregar Empleado",btnClass:"btn-dark dark:bg-slate-800 h-min text-sm font-normal",iconClass:"text-lg",onClick:$,isLoading:t(b).isLoading},null,8,["isLoading"])])],2)]),y.value?(v(),N(t(Ie),{key:0,count:S.value.length},null,8,["count"])):I("",!0),t(x)==="grid"&&!u.value?(v(),N(t(Yt),{key:1})):I("",!0),t(x)==="list"&&!y.value?(v(),N(t(gt),{key:2})):I("",!0),o(t(je)),o(t(ke))]))}};export{Fl as default};
