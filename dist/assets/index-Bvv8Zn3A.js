import{C as O}from"./index-CoHYOsAq.js";import{B}from"./index-DOAnfiMc.js";import{I as V}from"./index-DxXSMpKh.js";import{I as $}from"./index-BVBpVZEi.js";import{S as T}from"./index-Jp7OXFH1.js";import{V as F}from"./VueSelect-CeaoYkHk.js";import{_ as U,B as C,b as E,u as G,s as y,y as q,c as x,o as p,d as _,e as o,g as f,f as r,t as h,q as b,k as e,C as L,z as M,l as R,m as H,h as S,p as W,F as J}from"./index-CyQKzwXM.js";import{T as A}from"./index-KM0U7dzT.js";import{M as K}from"./index-D1RHiM9F.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as P}from"./index-B8UWVO2a.js";import{C as Q}from"./VueSelect.vue_vue_type_style_index_0_lang-XABNT5P5.js";import{x as X,p as Y,y as I,I as Z,m as ee}from"./tabs-Diuzp1HA.js";import"./vue-cleave.min-BqMPJFk5.js";/* empty css                                              */import"./transition-BehYXQjK.js";import"./focus-management-DKnT3RdX.js";import"./keyboard-C8YEoqI_.js";import"./use-outside-click-WivoOT8p.js";import"./hidden-1JsWbmcm.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-CLDwNzJK.js";import"./use-resolve-button-type-DXZUzXBT.js";const N=U("pack",{state:()=>({packs:[],tourOptions:[],loading:!1,error:null,formData:{nombre:"",slug:"",imgPerfil:null,imgPortada:null,tiempo:"",con_hotel:"",tours:[],con_turs:"",pasaje:"",precio:""}}),actions:{async fetchPacks(){var m,i;try{const c=await C.get("http://192.168.241.238:8001/api/v1/packs/list");c.data.status==="success"&&(this.packs=c.data.data)}catch(c){this.error=((i=(m=c.response)==null?void 0:m.data)==null?void 0:i.message)||"Error fetching packs"}finally{this.loading=!1}},async createPack(){var i,c;const m=E();this.loading=!0,this.error=null,console.log(this.formData);try{const a=await C.post("http://192.168.241.238:8001/api/v1/packs/create",this.formData,{headers:{"Content-Type":"multipart/form-data"}});return this.packs.push(a.data.data),m.success("¡El pack se ha creado exitosamente!"),this.resetForm(),a.data}catch(a){throw this.error=((c=(i=a.response)==null?void 0:i.data)==null?void 0:c.message)||"Error creating pack",m.error(this.error),a}finally{this.loading=!1}},async fetchPackWithTours(m){try{return(await C.get(`http://192.168.241.238:8001/api/v1/packs/tours/${m}`)).data.data}catch(i){return console.error("Error fetching pack with tours:",i),null}},async fetchTours(){var m,i;try{const c=await C.get("http://192.168.241.238:8001/api/v1/tours/list-select");c.data.status==="success"&&(this.tourOptions=c.data.data.map(a=>({value:a.id_tour,label:a.nombre})))}catch(c){this.error=((i=(m=c.response)==null?void 0:m.data)==null?void 0:i.message)||"Error fetching tours"}},resetForm(){this.formData={nombre_pack:"",slug:"",imgPerfil:"",imgPortada:"",tiempo:"",con_hotal:"",tours:"",pasaje:"",precio:""}}}}),te={name:"object_form",id:"object_form",autocomplete:"off",class:"space-y-4"},oe={class:"space-y-4"},ae={key:0},le={key:1},se={key:2},re={__name:"TransportEditModal",props:{activeModal:Boolean,detailData:Object},emits:["close","updateTransportList"],setup(m,{emit:i}){E(),G().headers();const c=m,a=i,l=y({tours:[]}),w=y([{label:"#",field:"number"},{label:"Nombre",field:"name"},{label:"Precio",field:"price"}]),v=y([]),u=()=>{a("close")};return q(()=>c.detailData,k=>{k&&(l.value={...k},v.value=l.value.tours.map((n,d)=>({number:d+1,tour_name:n.tour_name,price:n.price||"No especificado"})))}),(k,n)=>{const d=x("vue-good-table"),s=x("FromGroup");return p(),_("div",null,[o(e(K),{activeModal:c.activeModal,onClose:u,title:"Detalle de Packs",sizeClass:"max-w-3xl",centered:""},{default:f(()=>[r("form",te,[r("div",oe,[o(s,{label:"Detalles del transporte"},{default:f(()=>[o(d,{columns:w.value,rows:v.value,"sort-options":{enabled:!1},class:"custom-table"},{"table-row":f(g=>[g.column.field==="number"?(p(),_("span",ae,h(g.row.number),1)):b("",!0),g.column.field==="name"?(p(),_("span",le,h(g.row.tour_name),1)):b("",!0),g.column.field==="price"?(p(),_("span",se,h(g.row.price),1)):b("",!0)]),_:1},8,["columns","rows"])]),_:1})])])]),_:1},8,["activeModal"])])}}},ne=j(re,[["__scopeId","data-v-beebf41a"]]),ie={components:{Tooltip:A,Icon:V,EditProject:ne},setup(){const m=N(),i=y(!1),c=y(null),a=[{label:"#",field:"number"},{label:"Nombre",field:"name"},{label:"Tiempo",field:"time"},{label:"Hotel",field:"hotel"},{label:"Tours",field:"tours"},{label:"Pasaje",field:"passage"},{label:"Precio",field:"price"},{label:"Opciones",field:"action"}],l=L(()=>m.packs.map(u=>({number:u.id_pack,nombre:u.nombre,tiempo:u.tiempo,con_hotel:u.con_hotel,con_turs:u.con_turs,con_pasaje:u.con_pasaje,precio:u.precio,id_pack:u.id_pack})));return M(()=>{m.fetchPacks()}),{columns:a,rows:l,showEditModal:i,handleDetail:async u=>{const k=await m.fetchPackWithTours(u.id_pack);c.value=k,i.value=!0},handleDelete:u=>{console.log(`Eliminar registro con ID: ${u}`)},detailData:c}}},ce={class:"overflow-x-auto"},ue={key:0,class:"flex items-center justify-center p-2"},de={key:1,class:"flex items-center justify-center p-2"},me={key:2,class:"flex items-center justify-center p-2"},fe={key:3,class:"flex items-center justify-center p-2"},pe={key:4,class:"flex items-center justify-center p-2"},_e={key:5,class:"flex items-center justify-center p-2"},be={key:6,class:"flex items-center justify-center p-2"},he={key:7,class:"flex items-center justify-center p-2 space-x-2"},ve=["onClick"],ge=["onClick"];function ke(m,i,c,a,l,w){const v=x("Icon"),u=x("vue-good-table"),k=x("EditProject");return p(),_("div",ce,[o(u,{columns:a.columns,rows:a.rows,"sort-options":{enabled:!1},class:"custom-table"},{"table-row":f(n=>[n.column.field==="number"?(p(),_("span",ue,h(n.row.number),1)):b("",!0),n.column.field==="name"?(p(),_("span",de,h(n.row.nombre),1)):b("",!0),n.column.field==="time"?(p(),_("span",me,h(n.row.tiempo),1)):b("",!0),n.column.field==="hotel"?(p(),_("span",fe,h(n.row.con_hotel),1)):b("",!0),n.column.field==="tours"?(p(),_("span",pe,h(n.row.con_turs),1)):b("",!0),n.column.field==="passage"?(p(),_("span",_e,h(n.row.con_pasaje),1)):b("",!0),n.column.field==="price"?(p(),_("span",be,h(n.row.precio),1)):b("",!0),n.column.field==="action"?(p(),_("span",he,[r("button",{type:"button",class:"btn btn-outline-dark",onClick:d=>a.handleDetail(n.row)},[o(v,{icon:"heroicons:document-text",class:"w-8 h-8"})],8,ve),r("button",{type:"button",class:"btn btn-danger",onClick:d=>a.handleDelete(n.row.id_pack)},[o(v,{icon:"heroicons:pencil-square",class:"w-8 h-8"})],8,ge)])):b("",!0)]),_:1},8,["columns","rows"]),o(k,{activeModal:a.showEditModal,onClose:i[0]||(i[0]=n=>a.showEditModal=!1),detailData:a.detailData},null,8,["activeModal","detailData"])])}const ye=j(ie,[["render",ke],["__scopeId","data-v-2385cb9f"]]),xe={class:"text-base relative top-[1px] ltr:mr-1 rtl:ml-1"},we={class:"text-slate-600 dark:text-slate-400 text-sm font-normal"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te={class:"grid grid-cols-2 gap-4 mb-4"},Ce={class:"grid grid-cols-2 gap-4 mb-4"},$e={class:"grid grid-cols-3 gap-4 mb-4"},Pe={class:"grid grid-cols-2 gap-4 mb-4"},Ve={class:"flex justify-end mt-4"},je={class:"mb-4"},Se={class:"overflow-x-auto"},Ie={key:0,class:"flex items-center justify-center p-2 center-content"},Ee={key:1,class:"flex items-center justify-center p-2 center-content"},qe={key:2,class:"flex items-center justify-center p-2 center-content"},Me=["onClick"],Ae=r("span",null,"Eliminar",-1),Ne={class:"overflow-x-auto"},ze={__name:"TabIcon",setup(m){const i=y([{label:"#",field:"num"},{label:"Tours",field:"tours"},{label:"Acciones",field:"action"}]),c=[{title:"Registro de datos",icon:"heroicons-outline:home"},{title:"Lista de Packs",icon:"heroicons-outline:user"}],a=y([]),l=N();function w(d,s){const g=s.target.files[0];g&&(l.formData[d]=g)}const v=y(l.formData.tours);q(v,d=>{(Array.isArray(d)?d:[d]).map(t=>({id_tour:t.value,tours:t.label})).forEach(t=>{a.value.find(D=>D.id_tour===t.id_tour)||a.value.push(t)})});const u=d=>{console.log("Selected tour value:",d)},k=d=>{a.value=a.value.filter(s=>s.id_tour!==d),console.log("Updated tours:",a.value)};async function n(){try{l.formData.tours=a.value.map(d=>d.id_tour),await l.createPack(),a.value=[]}catch(d){console.error("Error creating pack:",d)}}return M(()=>{l.fetchTours()}),(d,s)=>{const g=x("vue-good-table");return p(),R(e(ee),null,{default:f(()=>[o(e(Y),{class:"lg:space-x-8 md:space-x-4 space-x-0 rtl:space-x-reverse"},{default:f(()=>[(p(),_(J,null,H(c,(t,D)=>o(e(X),{as:"template",key:D},{default:f(({selected:z})=>[r("button",{class:W([[z?"text-primary-500 before:w-full":"text-slate-500 before:w-0 dark:text-slate-300"],"inline-flex items-start text-sm font-medium mb-7 capitalize bg-white dark:bg-slate-800 ring-0 foucs:ring-0 focus:outline-none px-2 transition duration-150 before:transition-all before:duration-150 relative before:absolute before:left-1/2 before:bottom-[-6px] before:h-[1.5px] before:bg-primary-500 before:-translate-x-1/2"])},[r("span",xe,[o(e(V),{icon:t.icon},null,8,["icon"])]),S(h(t.title),1)],2)]),_:2},1024)),64))]),_:1}),o(e(Z),null,{default:f(()=>[o(e(I),null,{default:f(()=>[r("div",we,[r("div",De,[r("div",null,[r("div",Te,[r("div",null,[o(e($),{label:"Nombre del Paquete",modelValue:e(l).formData.nombre,"onUpdate:modelValue":s[0]||(s[0]=t=>e(l).formData.nombre=t),placeholder:"Pack 001",required:""},null,8,["modelValue"])]),r("div",null,[o(e($),{label:"Slug",modelValue:e(l).formData.slug,"onUpdate:modelValue":s[1]||(s[1]=t=>e(l).formData.slug=t),placeholder:"Slug",required:""},null,8,["modelValue"])])]),r("div",Ce,[o(e(P),{label:"Imagen de Perfil"},{default:f(()=>[r("input",{type:"file",onChange:s[2]||(s[2]=t=>w("img_perfil",t)),required:""},null,32)]),_:1}),o(e(P),{label:"Imagen de Portada"},{default:f(()=>[r("input",{type:"file",onChange:s[3]||(s[3]=t=>w("img_portada",t)),required:""},null,32)]),_:1})]),r("div",$e,[o(e(T),{label:"Alimentación",modelValue:e(l).formData.tiempo,"onUpdate:modelValue":s[4]||(s[4]=t=>e(l).formData.tiempo=t),placeholder:"Seleccionar",options:[{value:"Desayuno + Almuerzo y Cena",label:"Desayuno + Almuerzo y Cena"},{value:"Almuerzo a la Carta en Tour",label:"Almuerzo a la Carta en Tour"},{value:"Desayunos + Almuerzo a la Carta",label:"Desayunos + Almuerzo a la Carta"}],required:""},null,8,["modelValue"]),o(e(T),{label:"Hotel",modelValue:e(l).formData.con_hotel,"onUpdate:modelValue":s[5]||(s[5]=t=>e(l).formData.con_hotel=t),placeholder:"Seleccionar",options:[{value:"NO",label:"NO"},{value:"SI",label:"SI"}],required:""},null,8,["modelValue"]),o(e(T),{label:"Tours",modelValue:e(l).formData.con_turs,"onUpdate:modelValue":s[6]||(s[6]=t=>e(l).formData.con_turs=t),placeholder:"Seleccionar",options:[{value:"3 Tours",label:"3 Tours"},{value:"4 Tours",label:"4 Tours"},{value:"5 Tours",label:"5 Tours"},{value:"6 Tours",label:"6 Tours"},{value:"7 Tours",label:"7 Tours"},{value:"8 Tours",label:"8 Tours"}],required:""},null,8,["modelValue"])]),r("div",Pe,[r("div",null,[o(e(T),{label:"Pasaje Aéreos",modelValue:e(l).formData.con_pasaje,"onUpdate:modelValue":s[7]||(s[7]=t=>e(l).formData.con_pasaje=t),placeholder:"Seleccionar",options:[{value:"NO",label:"NO"},{value:"SI",label:"SI"}],required:""},null,8,["modelValue"])]),r("div",null,[o(e($),{label:"Precio",modelValue:e(l).formData.precio,"onUpdate:modelValue":s[8]||(s[8]=t=>e(l).formData.precio=t),type:"number",min:"1",max:"999999",step:"0.01",required:""},null,8,["modelValue"])])]),r("div",Ve,[o(e(B),{onClick:n,class:"btn-success"},{default:f(()=>[S(" Registrar Pack ")]),_:1})])]),r("div",null,[r("div",je,[o(e(P),{label:"Busqueda de Reservas",class:"flex-1"},{default:f(()=>[o(e(F),null,{default:f(()=>[o(e(Q),{options:e(l).tourOptions,modelValue:v.value,"onUpdate:modelValue":s[9]||(s[9]=t=>v.value=t),placeholder:"Seleccionar",onSearch:u},null,8,["options","modelValue"])]),_:1})]),_:1})]),r("div",Se,[o(g,{columns:i.value,rows:a.value,"sort-options":{enabled:!1},class:"custom-table"},{"table-row":f(t=>[t.column.field=="num"?(p(),_("span",Ie,h(t.row.id_tour),1)):b("",!0),t.column.field=="tours"?(p(),_("span",Ee,h(t.row.tours),1)):b("",!0),t.column.field=="action"?(p(),_("span",qe,[o(e(A),{placement:"top",arrow:"",theme:"dark"},{button:f(()=>[r("div",{onClick:D=>k(t.row.id_tour),class:"action-btn bg-red-500 text-white p-3 rounded-full hover:bg-red-600 transition-colors"},[o(e(V),{icon:"heroicons:trash",class:"w-8 h-8"})],8,Me)]),default:f(()=>[Ae]),_:2},1024)])):b("",!0)]),_:1},8,["columns","rows"])])])])])]),_:1}),o(e(I),null,{default:f(()=>[r("div",Ne,[o(e(ye),{packs:e(l).packs},null,8,["packs"])])]),_:1})]),_:1})]),_:1})}}},Oe={components:{Card:O,TabIcon:ze}},Be={class:"grid xl:grid-cols-1 grid-cols-1 gap-6 full-height"};function Fe(m,i,c,a,l,w){const v=x("TabIcon"),u=x("Card");return p(),_("div",Be,[o(u,{title:"Gestión de Paquetes"},{default:f(()=>[o(v)]),_:1})])}const dt=j(Oe,[["render",Fe]]);export{dt as default};
