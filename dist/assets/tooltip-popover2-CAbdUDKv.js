import{D as A}from"./index-Bs_uOHMv.js";import{B as F}from"./index-CvW4wJPB.js";import{C as G}from"./index-COOwjdNO.js";import{I as z}from"./index-BffMpWx5.js";import{I as E}from"./index-2H-cusMd.js";import{P as L}from"./index-DEP2tP3N.js";import{w as U}from"./window-Ds9AqdYU.js";import{M as Y}from"./index-2mWc_vCg.js";import{u as $,B as x,b as c,d as r,e as l,g as p,c as d,o as n,f as a,p as M,n as D,t as u,q as _,h as I,F as C,m as O,l as j}from"./index-BFn_3Gdk.js";import{q as J}from"./vue-tailwind-datepicker-CG1Mmuub.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as H}from"./menu-BIf-sRSE.js";import"./vue-cleave.min-ClV1fVcS.js";/* empty css                                              */import"./index-BaZVwneS.js";import"./transition-DUAAdbaG.js";import"./focus-management-C7_eiYjk.js";import"./keyboard-CmTzE63w.js";import"./use-outside-click-RVZZ1L_X.js";import"./hidden-Br4jqfTk.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-Bo1bAx4t.js";import"./use-resolve-button-type-0pot5Y2u.js";const y=$().headers(),K={mixins:[U],components:{Pagination:L,InputGroup:E,Dropdown:A,Icon:z,VueTailwindDatePicker:J,Card:G,MenuItem:H,Button:F,Modal:Y},data(){const t=new Date,f=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",o=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{advancedTable:[],current:1,perpage:10,show:!1,startDateVariable:"",endDateVariable:"",dateValue:{startDate:f,endDate:o},pageRange:5,searchTerm:"",actions:[{name:"edit",icon:"heroicons:pencil-square",doit:i=>{const h=i.id,g=i;this.$router.push({name:"traspaso-edit",params:{id:h},query:{otherData:JSON.stringify(g)}})}},{name:"delete",icon:"heroicons-outline:trash",doit:i=>{x.post("https://thtsystemv2.tech/public/api/v1/bookings/anular-traspase",{booking_id:i.id},{...y}).then(h=>{const g=h.data.message;c().success(g,{timeout:1500}),this.listarEmpleados()}).catch(h=>{console.error("Error al eliminar empleado:",h)})}}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"C贸digo",field:"code"},{label:"Agencia Operador	",field:"client_id"},{label:"Reserva",field:"nro_pax"},{label:"Programa	",field:"amount"},{label:"Action",field:"action"}]}},methods:{async reloadCrmTable(){x.get(`https://thtsystemv2.tech/public/api/v1/bookings/list-traspase?start_date=${this.dateValue.startDate}&end_date=${this.dateValue.endDate}`,y).then(t=>{c().success(t.data.message),this.advancedTable=t.data.data}).catch(t=>{console.error(t),t.response&&t.response.status===404?c().info("No se encontraron reservas traspasadas dentro del rango de fechas proporcionado."):c().error("Ocurri贸 un error al obtener las reservas."),this.advancedTable=[]})},openModal(t){this.$router.push(`/app/reserve-preview/${t}`)}},watch:{dateValue(t,s){if(!t.startDate||!t.endDate)this.advancedTable=[];else{const f=t.startDate.split(" ")[0],w=t.endDate.split(" ")[0];x.get(`https://thtsystemv2.tech/public/api/v1/bookings/list-traspase?start_date=${f}&end_date=${w}`,y).then(o=>{c().success(o.data.message),this.advancedTable=o.data.data}).catch(o=>{console.error(o),o.response&&o.response.status===404?c().info("No se encontraron reservas traspasadas dentro del rango de fechas proporcionado."):c().error("Ocurri贸 un error al obtener las reservas."),this.advancedTable=[]})}}},mounted(){x.get(`https://thtsystemv2.tech/public/api/v1/bookings/list-traspase?start_date=${this.dateValue.startDate}&end_date=${this.dateValue.endDate}`,y).then(t=>{c().success(t.data.message),this.advancedTable=t.data.data}).catch(t=>{console.error(t),t.response&&t.response.status===404?c().info("No se encontraron reservas traspasadas dentro del rango de fechas proporcionado."):c().error("Ocurri贸 un error al obtener las reservas."),this.advancedTable=[]})}},W={class:"md:flex pb-6 items-center"},X=a("h6",{class:"flex-1 md:mb-0 mb-3"},"Traspasos",-1),Z={class:"-mx-6"},ee=["onClick"],te={style:{"margin-top":"5px","font-weight":"bold"}},oe=a("br",null,null,-1),ae={key:0},se=a("span",{style:{color:"red","font-weight":"bold"}},"Tours Anulados",-1),ne=[se],re={key:1},le={key:4,class:"text-slate-500 dark:text-slate-400"},ie={key:0,class:"text-success-500"},ce={key:1,class:"font-bold"},de={key:2},ue={key:5,class:"action-btn text-end mr-3"},me={class:"text-xl"},pe=["onClick"],he={class:"text-base"},_e={class:"py-4 px-3"},ge={name:"client_form",id:"client_form",autocomplete:"off",class:"mx-auto space-y-4"},fe={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},be=a("div",{class:"lg:col-span-1"},null,-1),ve={class:"lg:col-span-3 flex justify-end"};function xe(t,s,f,w,o,i){const h=d("InputGroup"),g=d("VueTailwindDatePicker"),b=d("Button"),T=d("Icon"),P=d("MenuItem"),S=d("Dropdown"),B=d("Pagination"),N=d("vue-good-table"),R=d("Card"),q=d("Modal");return n(),r("div",null,[l(R,{noborder:""},{default:p(()=>[a("div",W,[X,a("div",{class:M(["md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse",t.window.width<768?"space-x-rb":""])},[l(h,{modelValue:o.searchTerm,"onUpdate:modelValue":s[0]||(s[0]=e=>o.searchTerm=e),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"]),a("div",null,[l(g,{modelValue:o.dateValue,"onUpdate:modelValue":s[1]||(s[1]=e=>o.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),l(b,{icon:"heroicons-outline:arrows-up-down",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg",onClick:i.reloadCrmTable},null,8,["onClick"])],2)]),a("div",Z,[l(N,{columns:o.columns,styleClass:" vgt-table  centered ",rows:o.advancedTable,"sort-options":{enabled:!1},"pagination-options":{enabled:!0,perPage:o.perpage},"search-options":{enabled:!0,externalQuery:o.searchTerm}},{"table-row":p(e=>{var v,V;return[e.column.field=="code"?(n(),r("span",{key:0,class:"font-medium",onClick:m=>i.openModal(e.row.id),style:D({color:e.row.is_checkout===1?"red":"inherit",display:"flex",flexDirection:"column"})},[a("span",null,u(e.row.code),1),a("span",te,"Reg: "+u(e.row.date_arrival)+u(e.row.is_checkout===1?" (ANULADO)":""),1)],12,ee)):_("",!0),e.column.field=="nro_pax"?(n(),r("span",{key:1,class:"text-slate-500 dark:text-slate-400",style:D({color:e.row.is_checkout===1?"red":"inherit"})},[I(u(e.row.origintransfer?e.row.origintransfer.code:"Sin reserva de origen")+" ",1),oe],4)):_("",!0),e.column.field=="client_id"?(n(),r("span",{key:2,class:"text-slate-500 dark:text-slate-400",style:D({color:e.row.is_checkout===1?"red":"inherit",display:"flex",flexDirection:"column"})},[a("span",null,u((v=e.row.agency)==null?void 0:v.fullname),1),a("span",null,u((V=e.row.agency)==null?void 0:V.document),1)],4)):_("",!0),e.column.field==="amount"?(n(),r(C,{key:3},[!e.row.program_transfer||e.row.is_checkout===1?(n(),r("div",ae,ne)):(n(),r("div",re,[(n(!0),r(C,null,O(e.row.program_transfer,(m,k)=>(n(),r("div",{key:k,style:{display:"flex","flex-direction":"column","margin-bottom":"10px"}},[a("span",null,u(m.description)+" ("+u(m.pivot.quantity)+" pax) "+u(m.pivot.date_assigned),1)]))),128))]))],64)):_("",!0),e.column.field=="checking"?(n(),r("span",le,[e.row.is_checkin?(n(),r("span",ie," Confirmado ")):e.row.is_checkout?(n(),r("span",ce," Checkou ")):(n(),r("span",de," Pendiente "))])):_("",!0),e.column.field=="action"&&e.row.is_checkout!==1?(n(),r("div",ue,[l(S,{classMenuItems:" w-[140px]"},{menus:p(()=>[(n(!0),r(C,null,O(o.actions,(m,k)=>(n(),j(P,{key:k},{default:p(()=>[a("div",{onClick:ye=>m.doit(e.row),class:M(`
                
                  ${m.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[a("span",he,[l(T,{icon:m.icon},null,8,["icon"])]),a("span",null,u(m.name),1)],10,pe)]),_:2},1024))),128))]),default:p(()=>[a("div",me,[l(T,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):_("",!0)]}),"pagination-bottom":p(e=>[a("div",_e,[l(B,{total:o.advancedTable.length,current:o.current,"per-page":o.perpage,pageRange:o.pageRange,onPageChanged:s[2]||(s[2]=v=>o.current=v),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:"",options:o.options},{default:p(()=>[I(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1}),l(q,{title:"Datos de reserva | R2024-000643",label:"Modal title",activeModal:o.show,onClose:s[3]||(s[3]=e=>o.show=!1),sizeClass:"max-w-4xl"},{default:p(()=>[a("form",ge,[a("div",fe,[be,a("div",ve,[l(b,{text:"Cancelar",btnClass:"btn-light mr-2"}),l(b,{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark"})])])])]),_:1},8,["activeModal"])])}const $e=Q(K,[["render",xe]]);export{$e as default};
