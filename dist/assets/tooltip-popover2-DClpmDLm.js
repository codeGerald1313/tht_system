import{D as R}from"./index-DFq5MbAK.js";import{B as N}from"./index-DCMPjbua.js";import{C as F}from"./index-Hsd0Z0_R.js";import{I as q}from"./index-BcFOD9Ey.js";import{I as G}from"./index-DCC49QXr.js";import{P as z}from"./index-vl95iEIB.js";import{w as A}from"./window-Ds9AqdYU.js";import{M as E}from"./index-MSlXG-Ka.js";import{u as J,J as v,b as w,d as s,e as l,h as p,c,o as n,f as o,n as k,t as d,p as u,i as C,F as D,m as T,l as L}from"./index-BLl1OigC.js";import{q as U}from"./vue-tailwind-datepicker-DbcSElnr.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as j}from"./menu-CM83wd2-.js";import"./vue-cleave.min-DAvglPmz.js";import"./index-DPFbVGd7.js";import"./transition-CNElC_4N.js";import"./focus-management-Dc3XsveG.js";import"./keyboard-9WePWYgZ.js";import"./use-outside-click-CPWvQZIF.js";import"./hidden-BR_kr5_G.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-0CPOhxDd.js";import"./use-resolve-button-type-BwPomRAb.js";const M=J().headers(),Q={mixins:[A],components:{Pagination:z,InputGroup:G,Dropdown:R,Icon:q,VueTailwindDatePicker:U,Card:F,MenuItem:j,Button:N,Modal:E},data(){const a=new Date,h=new Date(a.getFullYear(),a.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",t=new Date(a.getFullYear(),a.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{advancedTable:[],current:1,perpage:10,show:!1,startDateVariable:"",endDateVariable:"",dateValue:{startDate:h,endDate:t},pageRange:5,searchTerm:"",actions:[{name:"edit",icon:"heroicons:pencil-square",doit:m=>{const f=m.id,b=m;this.$router.push({name:"traspaso-edit",params:{id:f,otherData:JSON.stringify(b)}})}}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Código",field:"code"},{label:"Agencia Operador	",field:"client_id"},{label:"Reserva",field:"nro_pax"},{label:"Programa	",field:"amount"},{label:"Action",field:"action"}]}},methods:{openModal(a){this.$router.push(`/app/reserve-preview/${a}`)}},watch:{dateValue(a,i){if(!a.startDate||!a.endDate)this.advancedTable=[];else{const h=a.startDate.split(" ")[0],g=a.endDate.split(" ")[0];v.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/list-traspase?start_date=${h}&end_date=${g}`,M).then(t=>{console.log(t.data),this.advancedTable=t.data.data}).catch(t=>{console.error(t),t.response&&t.response.status===404?w().info("No se encontraron reservas dentro del rango de fechas proporcionado."):w().error("Ocurrió un error al obtener las reservas."),this.advancedTable=[]})}}},mounted(){v.get(`https://thtbackend-production.up.railway.app/api/v1/bookings/list-traspase?start_date=${this.dateValue.startDate}&end_date=${this.dateValue.endDate}`,M).then(a=>{console.log(a.data),this.advancedTable=a.data.data}).catch(a=>{console.error(a)})}},H={class:"md:flex pb-6 items-center"},K=o("h6",{class:"flex-1 md:mb-0 mb-3"},"Traspasos",-1),W={class:"-mx-6"},X=["onClick"],Z={style:{"margin-top":"5px"}},$={key:1,class:"text-slate-500 dark:text-slate-400"},ee=o("br",null,null,-1),te={key:2,class:"text-slate-500 dark:text-slate-400",style:{display:"flex","flex-direction":"column"}},oe={key:4,class:"text-slate-500 dark:text-slate-400"},ae={key:0,class:"text-primary-500"},ne={key:1},se={key:5,class:"text-slate-500 dark:text-slate-400"},le={key:0,class:"text-success-500"},re={key:1,class:"font-bold"},ie={key:2},ce={key:6,class:"action-btn text-end mr-3"},de={class:"text-xl"},pe=["onClick"],ue={class:"text-base"},me={class:"py-4 px-3"},he={name:"client_form",id:"client_form",autocomplete:"off",class:"mx-auto space-y-4"},_e={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},ge=o("div",{class:"lg:col-span-1"},null,-1),fe={class:"lg:col-span-3 flex justify-end"};function be(a,i,h,g,t,m){const f=c("InputGroup"),b=c("VueTailwindDatePicker"),_=c("Button"),y=c("Icon"),V=c("MenuItem"),I=c("Dropdown"),P=c("Pagination"),O=c("vue-good-table"),S=c("Card"),B=c("Modal");return n(),s("div",null,[l(S,{noborder:""},{default:p(()=>[o("div",H,[K,o("div",{class:k(["md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse",a.window.width<768?"space-x-rb":""])},[l(f,{modelValue:t.searchTerm,"onUpdate:modelValue":i[0]||(i[0]=e=>t.searchTerm=e),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"]),o("div",null,[l(b,{modelValue:t.dateValue,"onUpdate:modelValue":i[1]||(i[1]=e=>t.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),l(_,{icon:"heroicons-outline:arrows-up-down",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg"}),l(_,{icon:"heroicons-outline:document-text",text:"",onClick:a.exportToExcel,btnClass:"bg-green-500 hover:bg-green-600 text-white font-normal py-2 px-4 rounded-sm text-sm",iconClass:"text-lg",title:"Exportar"},null,8,["onClick"])],2)]),o("div",W,[l(O,{columns:t.columns,styleClass:" vgt-table  centered ",rows:t.advancedTable,"sort-options":{enabled:!1},"pagination-options":{enabled:!0,perPage:t.perpage},"search-options":{enabled:!0,externalQuery:t.searchTerm}},{"table-row":p(e=>[e.column.field=="code"?(n(),s("span",{key:0,class:"font-medium",onClick:r=>m.openModal(e.row.id),style:{display:"flex","flex-direction":"column"}},[o("span",null,d(e.row.code),1),o("span",Z,"Reg.: "+d(e.row.date_arrival),1)],8,X)):u("",!0),e.column.field=="nro_pax"?(n(),s("span",$,[C(d(e.row.origintransfer.code)+" ",1),ee])):u("",!0),e.column.field=="client_id"?(n(),s("span",te,[o("span",null,d(e.row.agency.fullname),1),o("span",null,d(e.row.agency.document),1)])):u("",!0),e.column.field==="amount"?(n(!0),s(D,{key:3},T(e.row.program_transfer,(r,x)=>(n(),s("div",{key:x,style:{display:"flex","flex-direction":"column","margin-bottom":"10px"}},[o("span",null,d(r.description)+" ("+d(r.pivot.quantity)+" pax) "+d(r.pivot.date_assigned),1)]))),128)):u("",!0),e.column.field=="status"?(n(),s("span",oe,[e.row.pending_tours>0?(n(),s("span",ae," Por realizar "+d(e.row.pending_tours)+" Tours ",1)):(n(),s("span",ne," Sin tours pendientes "))])):u("",!0),e.column.field=="checking"?(n(),s("span",se,[e.row.is_checkin?(n(),s("span",le," Confirmado ")):e.row.is_checkout?(n(),s("span",re," Checkou ")):(n(),s("span",ie," Pendiente "))])):u("",!0),e.column.field=="action"?(n(),s("div",ce,[l(I,{classMenuItems:" w-[140px]"},{menus:p(()=>[(n(!0),s(D,null,T(t.actions,(r,x)=>(n(),L(V,{key:x},{default:p(()=>[o("div",{onClick:xe=>r.doit(e.row),class:k(`
                
                  ${r.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[o("span",ue,[l(y,{icon:r.icon},null,8,["icon"])]),o("span",null,d(r.name),1)],10,pe)]),_:2},1024))),128))]),default:p(()=>[o("div",de,[l(y,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):u("",!0)]),"pagination-bottom":p(e=>[o("div",me,[l(P,{total:t.advancedTable.length,current:t.current,"per-page":t.perpage,pageRange:t.pageRange,onPageChanged:i[2]||(i[2]=r=>t.current=r),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:"",options:t.options},{default:p(()=>[C(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1}),l(B,{title:"Datos de reserva | R2024-000643",label:"Modal title",activeModal:t.show,onClose:i[3]||(i[3]=e=>t.show=!1),sizeClass:"max-w-4xl"},{default:p(()=>[o("form",he,[o("div",_e,[ge,o("div",fe,[l(_,{text:"Cancelar",btnClass:"btn-light mr-2"}),l(_,{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark"})])])])]),_:1},8,["activeModal"])])}const Je=Y(Q,[["render",be]]);export{Je as default};
