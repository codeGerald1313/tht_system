import{C as S}from"./index-Hsd0Z0_R.js";import{I as B}from"./index-BcFOD9Ey.js";import{S as O}from"./index-DPFbVGd7.js";import{T as P}from"./index-BTHsGrD3.js";import{C as F}from"./index-lgafHr2M.js";import{B as E}from"./index-DCMPjbua.js";import{F as M}from"./index-I9bOp0dW.js";import{q as R}from"./vue-tailwind-datepicker-DbcSElnr.js";import{u as x,J as u,d as n,e as s,h as m,c as p,o as r,f as h,w as _,t as c,p as d}from"./index-BLl1OigC.js";import{P as U}from"./index-vl95iEIB.js";import{V as I}from"./VueSelect-DI5dOEtm.js";import{C as L}from"./VueSelect.vue_vue_type_style_index_0_lang-B1s-zvio.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as j,p as q,x as A,I as G,y as Y}from"./tabs-CkhIUISu.js";import"./vue-cleave.min-DAvglPmz.js";import"./keyboard-9WePWYgZ.js";import"./use-resolve-button-type-BwPomRAb.js";import"./hidden-BR_kr5_G.js";import"./focus-management-Dc3XsveG.js";import"./micro-task-CxIZtCgj.js";const g=x().headers();x().headersMultipart();const J={components:{vSelect:L,VueSelect:I,Card:S,TabGroup:j,Textinput:P,FromGroup:M,VueTailwindDatePicker:R,Checkbox:F,Button:E,TabList:q,Tab:A,Pagination:U,TabPanels:G,TabPanel:Y,Select:O,Icon:B},data(){const o=new Date,l=new Date(o.getFullYear(),o.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",t=new Date(o.getFullYear(),o.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{searchTerm:"",current:1,perpage:3,pageRange:10,selectedHotel:null,dateValue:null,selectedTypeBedroom:null,hotelsOptions:[{label:"Hotel A",value:"hotel_a_id"},{label:"Hotel B",value:"hotel_b_id"},{label:"Hotel C",value:"hotel_c_id"}],typeBedromsOptions:[{label:"Suite",value:"suite_id"},{label:"Standard",value:"standard_id"},{label:"Económica",value:"economic_id"}],branchOptions:[{value:1,label:"Caja  Principal"}],conceptOptions:[],conceptExpenseOptions:[],paymentOptions:[],documentTypeOptions:[{value:"tipo1",label:"Tipo 1"},{value:"tipo2",label:"Tipo 2"},{value:"tipo3",label:"Tipo 3"}],selectedBranch:1,selectedConcept:"",selectedPaymentMethod:"",selectedDocumentType:"",includeVoucher:!1,buttons:[{title:"Ingresos",icon:"heroicons-outline:currency-dollar",content:"Contenido de la pestaña Ingresos"},{title:"Egresos",icon:"heroicons-outline:arrow-circle-down",content:"Contenido de la pestaña Egresos"}],dateValue:{startDate:l,endDate:t},selectedTabIndex:null,ingresos:[],egresos:[],columns:[{label:"Codigo",field:"hotelsbooking"},{label:"Fecha de Entrada",field:"check_in"},{label:"Fecha de Salida",field:"check_out"},{label:" Cantidad",field:"cantidad"},{label:"Noches",field:"noches"},{label:"Precio",field:"price"},{label:"Cliente",field:"client"},{label:"Hotel",field:"hotel"},{label:"  Descripción de la Habitación",field:"decrip_abitacion"},{label:"Total ",field:"total"}],columnsExpense:[{label:"N° egreso",field:"NumeroIngreso"},{label:"Usuario",field:"Usuario"},{label:"Fecha",field:"Fecha"},{label:"Caja",field:"Caja"},{label:"Receptor",field:"Receptor"},{label:"Concepto",field:"Concepto"},{label:"Método pago	",field:"MetodoPago"},{label:"Monto ",field:"Monto"}],isVoucherChecked:!1}},methods:{async getData(){const o=this.selectedHotel?this.selectedHotel.label:null;console.log(o);try{const a=await u.get("https://thtbackend-production.up.railway.app/api/v1/exports-hotelsbooking/filters-reservas-hotel",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,tradename:o,typebedroom_id:this.selectedTypeBedroom},...g});this.ingresos=Object.values(a.data),console.log(a)}catch(a){console.error("Error al obtener datos:",a)}},async downloadFile(){try{const o=this.selectedHotel?this.selectedHotel.label:null,a=await u.get("https://thtbackend-production.up.railway.app/api/v1/export-reservas-hotel",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,tradename:o,typebedroom_id:this.selectedTypeBedroom},responseType:"blob"});console.log(a);const l=a.request.responseURL,i=new URL(l),t=document.createElement("a");t.href=i,t.setAttribute("download","archivo.xlsx"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("Descarga iniciada automáticamente.")}catch(o){console.error("Error al descargar el archivo:",o)}},async downloadFile2(){try{const o=await u.get("https://thtbackend-production.up.railway.app/api/v1/export-money-excel-expense",{params:{start_range:this.dateValue.startDate,end_range:this.dateValue.endDate,branchoffice:this.selectedBranch,is_voucher_external:this.isVoucherChecked?1:0,concept_income:this.selectedConcept,payment_method:this.selectedPaymentMethod},responseType:"blob"});console.log(o);const a=o.request.responseURL,l=new URL(a),i=document.createElement("a");i.href=l,i.setAttribute("download","archivo.xlsx"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),console.log("Descarga iniciada automáticamente.")}catch(o){console.error("Error al descargar el archivo:",o)}},toggleVoucher(){this.isVoucherChecked=!this.isVoucherChecked,console.log(this.isVoucherChecked)},async fetchTypeBedroms(){try{const a=(await u.get("https://thtbackend-production.up.railway.app/api/v1/typebedrooms/list",g)).data.data.map(l=>({value:l.id,label:l.description}));console.log(a),this.typeBedromsOptions=a}catch(o){console.error("Error al obtener datos:",o)}},async fetchHotels(){try{const o=await u.get("https://thtbackend-production.up.railway.app/api/v1/exports-hotelsbooking/hotels",g),a=o.data.map(l=>({value:l.hotelsbooking_id,label:l.tradename}));console.log(o),this.hotelsOptions=a}catch(o){console.error("Error al obtener datos:",o)}}},mounted(){this.fetchTypeBedroms(),this.fetchHotels()},watch:{selectedHotel(o,a){console.log("Hotel seleccionado:",o)}}},Q={class:"grid grid-cols-1 gap-5 charts"},z={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5"},K={class:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 mt-5"},W={class:"col-span-full flex justify-center items-center"},X={key:0,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},Z={key:1,class:"text-base text-gray-800 dark:text-gray-400 block min-w-[108px]"},$={key:2,class:"text-base text-gray-800 dark:text-gray-400 block min-w-[108px]"},ee={key:3,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[40px]"},te={key:4,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[40px]"},oe={key:5,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[80px]"},ae={key:6,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},le={key:7,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},ne={key:8,class:"text-base font-bold text-gray-800 dark:text-gray-400 block min-w-[108px]"},se={key:9,class:"text-base font-bold text-center text-gray-800 dark:text-gray-400 block min-w-[80px]"},re={class:"py-4 px-3"};function ie(o,a,l,i,t,b){const k=p("vSelect"),w=p("VueSelect"),C=p("VueTailwindDatePicker"),v=p("FromGroup"),y=p("Select"),f=p("Button"),V=p("Pagination"),T=p("vue-good-table"),D=p("Card");return r(),n("div",Q,[s(D,{title:"Control de Reservas de Hotel"},{default:m(()=>[h("div",null,[h("div",z,[s(w,{label:"Buscar Hotel"},{default:m(()=>[s(k,{options:t.hotelsOptions,modelValue:t.selectedHotel,"onUpdate:modelValue":a[0]||(a[0]=e=>t.selectedHotel=e)},null,8,["options","modelValue"])]),_:1}),s(v,{label:"Rango de Fechas",name:"d1"},{default:m(()=>[s(C,{modelValue:t.dateValue,"onUpdate:modelValue":a[1]||(a[1]=e=>t.dateValue=e),"input-classes":"form-control"},null,8,["modelValue"])]),_:1}),s(y,{label:"Tipo de Habitación",name:"incomeConcept",options:t.typeBedromsOptions,modelValue:t.selectedTypeBedroom,"onUpdate:modelValue":a[2]||(a[2]=e=>t.selectedTypeBedroom=e)},null,8,["options","modelValue"])]),h("div",K,[h("div",W,[s(f,{icon:"heroicons-outline:filter",text:"Filtar",onClick:_(b.getData,["prevent"]),btnClass:"bg-green-500 text-white mr-4 text-sm",iconClass:"text-lg"},null,8,["onClick"]),s(y,{name:"documentType",options:t.documentTypeOptions,modelValue:t.selectedDocumentType,"onUpdate:modelValue":a[3]||(a[3]=e=>t.selectedDocumentType=e)},null,8,["options","modelValue"]),s(f,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",onClick:_(b.downloadFile,["prevent"]),iconClass:"text-lg"},null,8,["onClick"])])]),s(T,{class:"-mx-6 mt-5",columns:t.columns,rows:this.ingresos,"pagination-options":{enabled:!0,perPage:t.perpage},"search-options":{enabled:!0,externalQuery:t.searchTerm},"sort-options":{enabled:!1}},{"table-row":m(e=>[e.column.field=="hotelsbooking"?(r(),n("span",X,c(e.row.hotelsbooking.code),1)):d("",!0),e.column.field=="check_in"?(r(),n("span",Z,c(e.row.date_checkin),1)):d("",!0),e.column.field=="check_out"?(r(),n("span",$,c(e.row.date_checkout),1)):d("",!0),e.column.field=="cantidad"?(r(),n("span",ee,c(e.row.quantity),1)):d("",!0),e.column.field=="noches"?(r(),n("span",te,c(e.row.nights),1)):d("",!0),e.column.field=="price"?(r(),n("span",oe," S/. "+c(e.row.price),1)):d("",!0),e.column.field=="client"?(r(),n("span",ae,c(e.row.hotelsbooking.client),1)):d("",!0),e.column.field=="hotel"?(r(),n("span",le,c(e.row.hotelsbooking.hotel),1)):d("",!0),e.column.field=="decrip_abitacion"?(r(),n("span",ne,c(e.row.room_descriptions),1)):d("",!0),e.column.field=="total"?(r(),n("span",se," S/. "+c(e.row.total),1)):d("",!0)]),"pagination-bottom":m(e=>[h("div",re,[s(V,{total:t.ingresos.length,current:t.current,"per-page":t.perpage,pageRange:t.pageRange,onPageChanged:a[4]||(a[4]=H=>t.current=H),pageChanged:e.pageChanged,perPageChanged:e.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1})])}const Se=N(J,[["render",ie]]);export{Se as default};
