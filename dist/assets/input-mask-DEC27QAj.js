import{B as j}from"./index-DOAnfiMc.js";import{C as kl}from"./index-CoHYOsAq.js";import{T as $}from"./index-C6OqzQN-.js";import{u as Be,b as fe,s as r,y as M,z as wl,c as D,o as _,d as x,e,g as o,f as t,k as l,q as U,w as T,A as se,F as ge,h as Ce,B as V,t as J,m as yl,l as Ee,p as Vl,D as st,E as nt,C as Yl}from"./index-CyQKzwXM.js";import{D as Al}from"./index-Br1mhpyn.js";import{I as El}from"./index-DxXSMpKh.js";import{P as Il}from"./index-BXlIw-0P.js";import{P as Jl}from"./index-BrRQqvEE.js";import{T as Sl}from"./index-KM0U7dzT.js";import{F as s}from"./index-B8UWVO2a.js";import{I as Le}from"./index-BVBpVZEi.js";import{M as _e}from"./index-D1RHiM9F.js";import{u as _l}from"./project-7SCfM68f.js";import{S as C}from"./index-Jp7OXFH1.js";import{T as Ul}from"./index-B-jw8vvV.js";import{C as Ml}from"./index-2iT3jdVW.js";import{q as Tl}from"./vue-tailwind-datepicker-Dofq1ohm.js";import{_ as xl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as Ol}from"./menu-BlqYkBdn.js";import{s as Zl,a as Ql,b as Wl,c as Kl}from"./shade-4-BPphsoTg.js";import"./vue-cleave.min-BqMPJFk5.js";import{B as dt}from"./index-CHzOSQ-h.js";import{A as rt}from"./index-D-NvQkV9.js";import{V as Gl}from"./VueSelect-CeaoYkHk.js";import{C as zl}from"./VueSelect.vue_vue_type_style_index_0_lang-XABNT5P5.js";import{S as it,a as ct}from"./swiper.min-DSH4ArgB.js";import{E as ut,_ as mt}from"./visa-card-bg-C9aa7FF6.js";import{S as pt}from"./index-uRZTIp-K.js";/* empty css                                              */import"./transition-BehYXQjK.js";import"./focus-management-DKnT3RdX.js";import"./keyboard-C8YEoqI_.js";import"./use-outside-click-WivoOT8p.js";import"./hidden-1JsWbmcm.js";import"./micro-task-CxIZtCgj.js";import"./open-closed-CLDwNzJK.js";import"./av-2-D6_jNZbn.js";import"./v4-D8aEg3BZ.js";import"./use-resolve-button-type-DXZUzXBT.js";/* empty css                                              */import"./effect-virtual-transition-end-DQxSYi8n.js";const vt={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},bt={key:0,class:"text-red-500"},ht={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},ft={key:0,class:"text-red-500"},gt={class:"grid lg:grid-cols-1 gap-4 grid-cols-1"},_t={key:0,class:"flex items-center"},yt={key:1,class:"flex items-center"},xt={key:2,class:"flex items-center"},Vt={name:"client_form",id:"client_form",autocomplete:"off",class:"mx-auto space-y-4"},Ct={class:"grid grid-cols-3 lg:grid-cols-3 gap-4"},kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},wt={class:"lg:col-span-3"},Et=t("div",{class:"lg:hidden"},null,-1),$t={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},It={class:"lg:col-span-3"},St=t("div",{class:"lg:hidden"},null,-1),Ut={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Dt={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Pt=t("div",{class:"lg:col-span-1"},null,-1),Nt={class:"lg:col-span-3 flex justify-end"},Rt={name:"providerForm",id:"providerForm",autocomplete:"off",class:"space-y-4"},jt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},At={class:"md:col-span-1 lg:col-span-2"},Ot={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},qt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ft={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Bt=t("div",{class:"lg:col-span-3"},null,-1),Lt={class:"lg:col-span-1 flex justify-end"},Gt={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},zt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ht={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Yt={class:"flex items-center"},Jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Zt={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Qt=t("div",{class:"lg:col-span-3"},null,-1),Wt={class:"lg:col-span-1 flex justify-end"},Kt={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},Xt={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},eo=t("div",{class:"lg:col-span-3"},null,-1),lo={class:"lg:col-span-1 flex justify-end"},to={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},oo=t("label",{for:"payment-type",class:"block text-sm font-medium text-gray-700 flex items-center"},[Ce(" Método de pago "),t("span",{class:"text-red-500 ml-1"},"*")],-1),ao={class:"flex items-center"},so={class:"flex items-center"},no={class:"flex-1"},ro={key:0,class:"text-red-500"},io={class:"ml-2 flex items-center"},co={class:"form-group col-lg-12 form__footerBtn mt-4"},uo={class:"text-right"},Xl={__name:"ClientEditModal",props:{activeModal:Boolean,ingresoData:Object},emits:["close","updateIngresoList"],setup(f,{emit:c}){const I=Be().headers();_l();const w=fe(),g=r(!1),S=r(!1),P=r(!1),O=r(!1),A=r([]),B=r([]),K=r([]),le=f,R=c,ue=()=>{R("close")},z=r({id:"",receptor_module:"",receptor_fullname:"",receptor_document:"",is_paycredit:"",available_edit:"",user_id:"",branchoffice_id:"",moneybox_id:"",concept_id:"",paymentmethod_id:"",currency_id:"",voucher_id:"",client_id:"",provider_id:"",employee_id:"",accountbank_id:"",date_movement:"",amount:"",text_amount:"",gloss:"",reference_operation:"",nro_voucher:"",serie:"",correlative:"",billing_external_id:"",billing_hash:"",motive_cancelled:"",billing_cancelled:"",date_repayment:"",repaymentmovement_id:"",dischargedocument_id:"",is_voucher_external:"",voucher_external:"",nro_voucher_external:"",booking_id:"",commision_id:"",observation:"",is_visible:""}),ye=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/ubigeo/departments",I);A.value=a.data.data.map(d=>({value:d.id,label:d.name}))}catch(a){console.error("Error fetching departments:",a)}},k=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/clients/list",I);Ze.value=a.data.data.map(d=>({value:d.id,label:d.fullname}))}catch(a){console.error("Error fetching departments:",a)}},q=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/moneys/income-concepts",I);Ke.value=a.data.data.map(d=>({value:d.id,label:d.description}))}catch(a){console.error("Error fetching departments:",a)}},E=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/banks/list",I);fl.value=a.data.data.map(d=>({value:d.id,label:d.description}))}catch(a){console.error("Error fetching departments:",a)}},oe=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/accountbanks/list",I);re.value=a.data.data.map(d=>({value:d.id,label:d.name}))}catch(a){console.error("Error fetching departments:",a)}},he=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/providers/list",I);te.value=a.data.data.map(d=>({value:d.id,label:d.fullname}))}catch(a){console.error("Error fetching departments:",a)}},xe=async()=>{try{const a=await V.get("https://thtsystemv2.tech/public/api/v1/employees/list",I);N.value=a.data.data.map(d=>({value:d.id,label:d.fullname}))}catch(a){console.error("Error fetching departments:",a)}},F=[{value:501,label:"SOL"},{value:502,label:"DÓLAR"},{value:503,label:"EURO"}],te=r([]),N=r([]),$e=r({description:""}),ce=r({branchoffice_id:"",bank_id:"",typeaccount_id:"",currency_id:"",name:"",number_account:"",cci_account:"",balance:"",headline:"",description:""}),Ze=r([]),cl=[{value:1,label:"Caja Principal"}],Ge=[{value:500,label:"Oficina Principal"}],me=[{value:504,label:"CUENTA SIMPLE"},{value:505,label:"CUENTA CORRIENTE"},{value:506,label:"TARJETA DE CRÉDITO"}],Ne=r(null),Se=r(null),Ue=r(null),Re=r(null),ke=r(null),Te=r(null),Me=r(F[0].value),de=r(me[0].value),ze=r(Ge[0].value),el=r(cl[0].value),ll=()=>{},rl=()=>{g.value=!g.value},He=()=>{g.value=!1},Ye=()=>{S.value=!1},Qe=()=>{P.value=!1},tl=()=>{O.value=!1},ul=()=>{S.value=!S.value},Oe=()=>{P.value=!P.value},ml=()=>{const a=document.querySelector(".cajonci-select select");if(a){const v=a.selectedIndex,ie=a.options[v].text;z.value.branchoffice_id=v,z.value.branchbox=ie}const d=document.querySelector(".pago-select select");if(a){const v=d.selectedIndex,ie=d.options[v].text;z.value.paymentmethod_id=v,z.value.paymethod=ie}const G=Ne.value;z.value.client_id=G;const b=Se.value;z.value.provider_id=b;const m=Ue.value;z.value.employee_id=m;const i=Re.value;z.value.concept_id=i;const Z=ke.value;z.value.accountbank_id=Z,V.post(`https://thtsystemv2.tech/public/api/v1/moneys-akemy/edit/${z.value.id}`,z.value,{...I}).then(v=>{R("updateIngresoList"),ue(),w.success(v.data.message)}).catch(v=>{console.error("Error al guardar los datos:",v)})},ae=r(!1),We=()=>{O.value=!O.value},ne=r({typedocument_id:"",document:"",department_id:"",province_id:"",district_id:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:""}),ol=r("cash"),fl=r([]),Je=a=>!!z.value[a],pl=a=>Je(a),re=r([]),al=[{value:1,label:"Natural"},{value:2,label:"Jurídico"}],vl=[{value:1,label:"DNI"},{value:2,label:"RUC"},{value:3,label:"PASAPORTE"}],ee=[{value:1,label:"Soltero"},{value:2,label:"Casado"},{value:2,label:"Viudo"},{value:2,label:"Divorciado"}],gl=[{value:1,label:"Masculino"},{value:2,label:"Femenino"}],Q=r({typedocument_id:"",department_id:"",province_id:"",district_id:"",type_client:"",fullname:"",document:"",tradename:"",address:"",email:"",telephone:"",cellphone:"",date_birthday:"",sex:"",status:"",typeDocument:""}),De=r(al[0].value),W=r(vl[0].value);let pe=r(null),we=r(null),L=r(null),sl=r(null),qe=r(null),Ve="";const Ie=[{value:"clients",label:"Clientes"},{value:"providers",label:"Proveedores"},{value:"employees",label:"Empleados"}],be=r(Ie[0].value),Ke=r([]),nl=[{value:1,label:"Efectivo"},{value:2,label:"Visa"},{value:3,label:"Cheque"},{value:4,label:"Depósito a cuenta"}],X=async()=>{try{const a=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/provinces/${Q.value.department_id}`,I);K.value=a.data.data.map(d=>({value:d.id,label:d.name}))}catch(a){console.error("Error fetching provinces:",a)}},bl=async()=>{try{const a=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/districts/${Q.value.province_id}`,I);B.value=a.data.data.map(d=>({value:d.id,label:d.name}))}catch(a){console.error("Error fetching provinces:",a)}},Pe=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getRucData",{ruc:ne.value.document}).then(a=>{ne.value.fullname=a.data.data.nombre_o_razon_social,ne.value.address=a.data.data.direccion}).catch(a=>{console.error("Error al obtener datos del RUC:",a)})},je=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getDniData",{dni:Q.value.document}).then(a=>{Q.value.fullname=a.data.data.nombre_completo}).catch(a=>{console.error("Error al obtener datos del DNI:",a)})},Fe=()=>{V.post("https://thtsystemv2.tech/public/api/v1/banks/create",$e.value,{...I}).then(a=>{tl(),E(),w.success(a.data.message)}).catch(a=>{console.error("Error al guardar los datos:",a)})},Ae=()=>{V.post("https://thtsystemv2.tech/public/api/v1/providers/create",ne.value,{...I}).then(a=>{Ye(),he(),w.success(a.data.message)}).catch(a=>{console.error("Error al guardar los datos:",a)})},Xe=()=>{const a=document.querySelector(".typecliente-select select");if(a){const G=a.selectedIndex,b=G.toString();a.options[G].text,Q.value.type_client=b}const d=document.querySelector(".typedocument-select select");if(a){const G=d.selectedIndex,b=d.options[G].text;Q.value.typedocument_id=G,Q.value.typeDocument=b}V.post("https://thtsystemv2.tech/public/api/v1/clients/create",Q.value,{...I}).then(G=>{He(),k(),w.success(G.data.message)}).catch(G=>{console.error("Error al guardar los datos:",G)})},dl=()=>{const a=document.querySelector(".oficinaprincipal-select select");if(a){const m=a.selectedIndex;a.options[m].text,ce.value.branchoffice_id=m}const d=document.querySelector(".typeaccount-select select");if(a){const m=d.selectedIndex;d.options[m].text,ce.value.typeaccount_id=m}const G=document.querySelector(".banck-select select");if(a){const m=G.selectedIndex;G.options[m].text,ce.value.bank_id=m}const b=document.querySelector(".money-select select");if(a){const m=b.selectedIndex;b.options[m].text,ce.value.currency_id=m}V.post("https://thtsystemv2.tech/public/api/v1/accountbanks/create",ce.value,{...I}).then(m=>{Qe(),oe(),w.success(m.data.message)}).catch(m=>{console.error("Error al guardar los datos:",m)})};M(()=>Ne.value,(a,d)=>{}),M(()=>el.value,(a,d)=>{}),M(()=>Re.value,(a,d)=>{}),M(()=>Me.value,(a,d)=>{}),M(()=>Se.value,(a,d)=>{}),M(()=>ol.value,(a,d)=>{}),M(()=>ke.value,(a,d)=>{}),M(()=>de.value,(a,d)=>{}),M(()=>Te.value,(a,d)=>{}),M(()=>Ue.value,(a,d)=>{}),M(()=>ze.value,(a,d)=>{}),M(be,(a,d)=>{const G=document.querySelector(".emisor-select select");if(G){const b=G.selectedIndex;G.options[b].text}}),M(()=>L.value,(a,d)=>{if(document.querySelector(".district-select select")){const b=a.toString().padStart(6,"0");Q.value.district_id=b,ne.value.district_id=b}}),M(()=>we.value,(a,d)=>{if(document.querySelector(".province-select select")){const b=a.toString().padStart(4,"0");Q.value.province_id=b,ne.value.province_id=b}}),M(()=>pe.value,(a,d)=>{if(document.querySelector(".department-select select")){const b=a.toString().padStart(2,"0");Q.value.department_id=b,ne.value.department_id=b}});const y=r("N° DNI"),u=r("RENIEC");M(()=>W.value,a=>{const d=document.querySelector(".typedocument-select select");if(d){const G=d.selectedIndex,b=d.options[G],m=d.options[G].text;Q.value.typedocument_id=G,Q.value.typeDocument=m,y.value=`N° ${b.textContent}`,u.value=a==="1"?"RENIEC":a==="2"?"SUNAT":"Validar"}}),M(()=>qe.value,(a,d)=>{const G=document.querySelector(".sexo-select select");if(G){const b=G.selectedIndex,m=G.options[b].text;Q.value.sex=m}}),M(()=>sl.value,(a,d)=>{const G=document.querySelector(".state-select select");if(G){const b=G.selectedIndex,m=G.options[b].text;Q.value.status=m}}),wl(async()=>{try{await q(),await oe(),await he(),await E(),await k(),await xe(),await ye()}catch(a){console.error("Error al realizar llamadas a la API:",a)}});const Y=r(!1);return M(()=>le.ingresoData,a=>{a&&(Ne.value=null,Ue.value=null,Se.value=null,a.client_id?(be.value="clients",Ne.value=a.client_id):a.employee_id?(be.value="employees",Ue.value=a.employee_id):a.provider_id&&(be.value="providers",Se.value=a.provider_id),z.value.id=a.id,z.value.gloss=a.gloss,z.value.reference_operation=a.reference_operation,Re.value=a.concept_id,ol.value=a.paymentmethod_id,ke.value=a.accountbank_id,z.value.amount=a.amount,Y.value=a.paymentmethod_id===4)}),(a,d)=>{const G=D("flat-pickr");return _(),x("div",null,[e(l(_e),{activeModal:le.activeModal,onClose:ue,title:"Actualizar Registro de Ingreso",centered:""},{default:o(()=>[t("form",{onSubmit:T(ll,["prevent"]),class:"space-y-4"},[t("div",vt,[e(l(s),{name:"d1",error:l(Ve)},{default:o(()=>[e(l(C),{label:"Caja aperturada",options:cl,modelValue:el.value,"onUpdate:modelValue":d[0]||(d[0]=b=>el.value=b),disabled:"",class:"cajonci-select"},null,8,["modelValue"])]),_:1},8,["error"]),e(l(s),{label:"Descripción ingreso",name:"d2"},{default:o(()=>[e(l($),{type:"text",placeholder:"Descripción ingreso",modelValue:z.value.gloss,"onUpdate:modelValue":d[1]||(d[1]=b=>z.value.gloss=b),modelModifiers:{trim:!0}},null,8,["modelValue"]),pl("gloss")?U("",!0):(_(),x("span",bt,"Por favor ingrese descripción"))]),_:1})]),t("div",ht,[e(l(s),{name:"d3"},{default:o(()=>[e(l(C),{label:"Emisor (opcional)",options:Ie,modelValue:be.value,"onUpdate:modelValue":d[2]||(d[2]=b=>be.value=b),class:"emisor-select"},null,8,["modelValue"])]),_:1}),e(l(s),{name:"d4"},{default:o(()=>[e(l(C),{label:"Concepto ingreso",options:Ke.value,modelValue:Re.value,"onUpdate:modelValue":d[3]||(d[3]=b=>Re.value=b),class:"concept-select",placeholder:"Seleccione ingreso"},null,8,["options","modelValue"]),Re.value?U("",!0):(_(),x("span",ft,"Por favor selecciona un concepto"))]),_:1})]),t("div",gt,[be.value==="clients"?(_(),x("div",_t,[e(l(s),{label:"Clientes",class:"flex-1"},{default:o(()=>[e(l(C),{options:Ze.value,modelValue:Ne.value,"onUpdate:modelValue":d[4]||(d[4]=b=>Ne.value=b),class:"client-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:rl,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):be.value==="providers"?(_(),x("div",yt,[e(l(s),{label:"Proveedores",class:"flex-1"},{default:o(()=>[e(l(C),{options:te.value,modelValue:Se.value,"onUpdate:modelValue":d[5]||(d[5]=b=>Se.value=b),class:"provider-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:ul,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):be.value==="employees"?(_(),x("div",xt,[e(l(s),{label:"Empleados",class:"flex-1"},{default:o(()=>[e(l(C),{options:N.value,modelValue:Ue.value,"onUpdate:modelValue":d[6]||(d[6]=b=>Ue.value=b),class:"employee-select"},null,8,["options","modelValue"])]),_:1})])):U("",!0)]),e(l(_e),{title:"Registrar nuevo Cliente",label:"Modal title",activeModal:g.value,onClose:d[21]||(d[21]=b=>g.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",Vt,[t("div",Ct,[t("div",null,[e(l(s),{label:"Tipo de cliente"},{default:o(()=>[e(l(C),{options:al,modelValue:De.value,"onUpdate:modelValue":d[7]||(d[7]=b=>De.value=b),class:"typecliente-select",placeholder:"Selccione Cliente"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo documento"},{default:o(()=>[e(l(C),{options:vl,modelValue:W.value,"onUpdate:modelValue":d[8]||(d[8]=b=>W.value=b),class:"typedocument-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° Documento"},{default:o(()=>[e(l(Le),{type:"text",placeholder:y.value,modelValue:Q.value.document,"onUpdate:modelValue":d[9]||(d[9]=b=>Q.value.document=b)},{append:o(()=>[e(l(j),{text:u.value,btnClass:"btn-outline-dark",onClick:T(je,["prevent"])},null,8,["text"])]),_:1},8,["placeholder","modelValue"])]),_:1})])]),t("div",kt,[t("div",wt,[e(l(s),{label:"Nombre ó Razón Social"},{default:o(()=>[e(l($),{type:"text",id:"client_fullname",modelValue:Q.value.fullname,"onUpdate:modelValue":d[10]||(d[10]=b=>Q.value.fullname=b),modelModifiers:{trim:!0},placeholder:"Ingrese Nombre ó Razón Social "},null,8,["modelValue"])]),_:1})]),Et]),t("div",$t,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:A.value,label:"Departamento",modelValue:l(pe),"onUpdate:modelValue":d[11]||(d[11]=b=>se(pe)?pe.value=b:pe=b),class:"department-select",onChange:X,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:K.value,label:"Provincias",modelValue:l(we),"onUpdate:modelValue":d[12]||(d[12]=b=>se(we)?we.value=b:we=b),class:"province-select",onChange:bl,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:B.value,label:"Distritos",modelValue:l(L),"onUpdate:modelValue":d[13]||(d[13]=b=>se(L)?L.value=b:L=b),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",Mt,[t("div",It,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{type:"text",modelValue:Q.value.address,"onUpdate:modelValue":d[14]||(d[14]=b=>Q.value.address=b),modelModifiers:{trim:!0},placeholder:"Ingrese Direción"},null,8,["modelValue"])]),_:1})]),St]),t("div",Ut,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{type:"text",modelValue:Q.value.cellphone,"onUpdate:modelValue":d[15]||(d[15]=b=>Q.value.cellphone=b),modelModifiers:{trim:!0},placeholder:"Ingrese N° de celular"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono fijo"},{default:o(()=>[e(l($),{type:"text",modelValue:Q.value.telephone,"onUpdate:modelValue":d[16]||(d[16]=b=>Q.value.telephone=b),modelModifiers:{trim:!0},placeholder:"Ingrese N° de telefono fijo"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{type:"email",modelValue:Q.value.email,"onUpdate:modelValue":d[17]||(d[17]=b=>Q.value.email=b),modelModifiers:{trim:!0},placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1})])]),t("div",Tt,[t("div",null,[e(l(s),{label:"Fecha de nacimiento"},{default:o(()=>[e(G,{modelValue:Q.value.date_birthday,"onUpdate:modelValue":d[18]||(d[18]=b=>Q.value.date_birthday=b),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:ee,label:"Estado",modelValue:l(sl),"onUpdate:modelValue":d[19]||(d[19]=b=>se(sl)?sl.value=b:sl=b),class:"state-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:gl,label:"Sexo",modelValue:l(qe),"onUpdate:modelValue":d[20]||(d[20]=b=>se(qe)?qe.value=b:qe=b),class:"sexo-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})])]),t("div",Dt,[Pt,t("div",Nt,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(He,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Xe,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar nuevo Proveedor",label:"Modal title",activeModal:S.value,onClose:d[32]||(d[32]=b=>S.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",Rt,[t("div",jt,[t("div",null,[e(l(s),{label:"N° RUC"},{default:o(()=>[e(l(Le),{type:"text",placeholder:"RUC",modelValue:ne.value.document,"onUpdate:modelValue":d[22]||(d[22]=b=>ne.value.document=b),modelModifiers:{trim:!0}},{append:o(()=>[e(l(j),{text:"SUNAT",btnClass:"btn-outline-dark ",onClick:T(Pe,["prevent"])})]),_:1},8,["modelValue"])]),_:1})]),t("div",At,[e(l(s),{label:"Razón social del proveedor"},{default:o(()=>[e(l($),{modelValue:ne.value.fullname,"onUpdate:modelValue":d[23]||(d[23]=b=>ne.value.fullname=b),modelModifiers:{trim:!0},placeholder:"Razón social del proveedor",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre comercial"},{default:o(()=>[e(l($),{modelValue:ne.value.tradename,"onUpdate:modelValue":d[24]||(d[24]=b=>ne.value.tradename=b),modelModifiers:{trim:!0},placeholder:"Nombre comercial",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",Ot,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:A.value,label:"Departamento",modelValue:l(pe),"onUpdate:modelValue":d[25]||(d[25]=b=>se(pe)?pe.value=b:pe=b),class:"department-select",onChange:X,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:K.value,label:"Provincias",modelValue:l(we),"onUpdate:modelValue":d[26]||(d[26]=b=>se(we)?we.value=b:we=b),class:"province-select",onChange:bl,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:B.value,label:"Distritos",modelValue:l(L),"onUpdate:modelValue":d[27]||(d[27]=b=>se(L)?L.value=b:L=b),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{modelValue:ne.value.address,"onUpdate:modelValue":d[28]||(d[28]=b=>ne.value.address=b),modelModifiers:{trim:!0},placeholder:"Dirección",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",qt,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{modelValue:ne.value.cellphone,"onUpdate:modelValue":d[29]||(d[29]=b=>ne.value.cellphone=b),modelModifiers:{trim:!0},placeholder:"Celular","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono"},{default:o(()=>[e(l($),{modelValue:ne.value.telephone,"onUpdate:modelValue":d[30]||(d[30]=b=>ne.value.telephone=b),modelModifiers:{trim:!0},placeholder:"Teléfono","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{modelValue:ne.value.email,"onUpdate:modelValue":d[31]||(d[31]=b=>ne.value.email=b),modelModifiers:{trim:!0},placeholder:"Correo electrónico",type:"email",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",Ft,[Bt,t("div",Lt,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(Ye,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Ae,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar cuenta bancaria",label:"Modal title",activeModal:P.value,onClose:d[44]||(d[44]=b=>P.value=!1)},{default:o(()=>[t("form",Gt,[t("div",zt,[t("div",null,[e(l(s),{label:"Sucursal",class:"block"},{default:o(()=>[e(l(C),{modelValue:ze.value,"onUpdate:modelValue":d[33]||(d[33]=b=>ze.value=b),options:Ge,required:"",class:"oficinaprincipal-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo de cuenta",class:"block"},{default:o(()=>[e(l(C),{modelValue:de.value,"onUpdate:modelValue":d[34]||(d[34]=b=>de.value=b),options:me,required:"",class:"typeaccount-select"},null,8,["modelValue"])]),_:1})])]),t("div",Ht,[t("div",Yt,[e(l(s),{label:"Banco",class:"flex-1"},{default:o(()=>[e(l(C),{options:fl.value,modelValue:Te.value,"onUpdate:modelValue":d[35]||(d[35]=b=>Te.value=b),class:"banck-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:T(We,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),t("div",null,[e(l(s),{label:"Moneda",class:"block"},{default:o(()=>[e(l(C),{modelValue:Me.value,"onUpdate:modelValue":d[36]||(d[36]=b=>Me.value=b),options:F,required:"",class:"money-select"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:ce.value.name,"onUpdate:modelValue":d[37]||(d[37]=b=>ce.value.name=b),modelModifiers:{trim:!0},placeholder:"Nombre cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",Jt,[t("div",null,[e(l(s),{label:"N° de cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:ce.value.number_account,"onUpdate:modelValue":d[38]||(d[38]=b=>ce.value.number_account=b),modelModifiers:{trim:!0},placeholder:"N° de cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° CCI (Código interbancario)",class:"block"},{default:o(()=>[e(l($),{modelValue:ce.value.cci_account,"onUpdate:modelValue":d[39]||(d[39]=b=>ce.value.cci_account=b),modelModifiers:{trim:!0},placeholder:"N° CCI",required:""},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Titular cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:ce.value.headline,"onUpdate:modelValue":d[40]||(d[40]=b=>ce.value.headline=b),modelModifiers:{trim:!0},placeholder:"Titular cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Descripción",class:"block"},{default:o(()=>[e(l(Ul),{modelValue:ce.value.description,"onUpdate:modelValue":d[41]||(d[41]=b=>ce.value.description=b),modelModifiers:{trim:!0},placeholder:"Descripción"},null,8,["modelValue"])]),_:1})]),t("div",Zt,[Qt,t("div",Wt,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(Qe,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(dl,["prevent"])})])])]),e(l(_e),{title:"Registrar banco",label:"Modal title",activeModal:O.value,onClose:d[43]||(d[43]=b=>O.value=!1)},{default:o(()=>[t("form",Kt,[e(l($),{label:"Nombre",name:"pn",type:"text",placeholder:"Ingresar nombre ",modelValue:$e.value.description,"onUpdate:modelValue":d[42]||(d[42]=b=>$e.value.description=b)},null,8,["modelValue"]),t("div",Xt,[eo,t("div",lo,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(tl,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Fe,["prevent"])})])])])]),_:1},8,["activeModal"])]),_:1},8,["activeModal"]),t("div",to,[e(l(s),{name:"d5",class:"mt-1"},{default:o(()=>[oo,e(l(C),{id:"payment-type",options:nl,modelValue:ol.value,"onUpdate:modelValue":d[45]||(d[45]=b=>ol.value=b),class:"pago-select mt-2",disabled:""},null,8,["modelValue"])]),_:1}),Y.value?(_(),x(ge,{key:0},[t("div",ao,[e(l(s),{label:"Cuenta destino",class:"flex-1"},{default:o(()=>[e(l(C),{options:re.value,modelValue:ke.value,"onUpdate:modelValue":d[46]||(d[46]=b=>ke.value=b),class:"cuentadestino-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:Oe,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),e(l(s),{label:"N° de Operación"},{default:o(()=>[e(l($),{type:"text",modelValue:z.value.reference_operation,"onUpdate:modelValue":d[47]||(d[47]=b=>z.value.reference_operation=b),modelModifiers:{trim:!0},placeholder:"Ingrese N° de Operación"},null,8,["modelValue"])]),_:1})],64)):U("",!0),t("div",so,[t("div",no,[e(l(s),{label:"Monto",name:"d6"},{default:o(()=>[e(l($),{type:"text",placeholder:"Monto",modelValue:z.value.amount,"onUpdate:modelValue":d[48]||(d[48]=b=>z.value.amount=b),modelModifiers:{trim:!0},disabled:!ae.value},null,8,["modelValue","disabled"]),pl("amount")?U("",!0):(_(),x("span",ro,"Por favor ingrese monto"))]),_:1})]),t("div",io,[e(l(Ml),{active:"",label:"Modificar",class:"font-bold",modelValue:ae.value,"onUpdate:modelValue":d[49]||(d[49]=b=>ae.value=b)},null,8,["modelValue"])])])]),t("div",co,[t("div",uo,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(ue,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:ml})])])],32)]),_:1},8,["activeModal"])])}}},Nl=Be().headers();function mo(){const f=new Date;return f.setHours(f.getHours()-5),f.toISOString().slice(0,10)}const po={components:{InputGroup:Le,Tooltip:Sl,FromGroup:s,Button:j,Pagination:Il,Dropdown:Al,Icon:El,EditProject:Xl,VueTailwindDatePicker:Tl,MenuItem:Ol,Card:kl,ProgressBar:Jl},data(){const c=new Date;new Date(c.getTime()+-300*6e4).toISOString().split("T")[0];const w=new Date,S=new Date(w.getFullYear(),w.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",O=new Date(w.getFullYear(),w.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{searchTerm:"",ingresoData:{},showEditModal:!1,current:1,perpage:10,dateDefault:mo(),dateValue:{startDate:S,endDate:O},pageRange:10,actions:[{name:"edit",icon:"heroicons:pencil-square",doit:A=>{this.ingresoData=A,this.showEditModal=!0}},{name:"delete",icon:"heroicons-outline:trash",doit:async A=>{try{await V.delete(`https://thtsystemv2.tech/public/api/v1/hotels/delete/${A.id}`,Nl),fe().success("Hotel eliminado correctamente",{timeout:1500}),this.listarHoteles()}catch(B){console.error("Error al eliminar empleado:",B)}}}],columns:[{label:"N° ingreso",field:"nro_voucher"},{label:"Fecha",field:"date_movement"},{label:"Caja",field:"branch_office"},{label:"Emisor",field:"client"},{label:"Concepto",field:"concept"},{label:"Método pago	",field:"payment_method"},{label:"Monto ",field:"amount"},{label:"Action",field:"action"}],projects:[]}},methods:{async reloadCrmTable(){try{await this.listarIngresos()}catch(f){console.error("Error al recargar Ingresos :",f)}},handleVerDocumento(f){V.get(`https://thtsystemv2.tech/public/api/v1/list-movements-pdf/${f}`).then(c=>{}).catch(c=>{console.error("Error al obtener la URL del PDF:",c),window.open(c.config.url,"_blank")})},async downloadFile2(){try{const c=(await V.get("https://thtsystemv2.tech/public/api/v1/export-money-por-dia",{params:{date:this.dateDefault},responseType:"blob"})).request.responseURL,I=new URL(c),w=document.createElement("a");w.href=I,w.setAttribute("download","archivo.xlsx"),w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w)}catch(f){console.error("Error al descargar el archivo:",f)}},async listarIngresos(){try{const f=await V.get("https://thtsystemv2.tech/public/api/v1/moneys-akemy/list",{params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate},...Nl});this.projects=f.data,this.projects&&this.projects.length>0?fe().success("Ingresos listados correctamente",{timeout:1500}):fe().info("Para el día de hoy, todavía no exiten registros de ingreso",{timeout:2500})}catch(f){console.error("Error al obtener los datos de los ingresos:",f),fe().error("Ocurrió un error al obtener los ingresos. Por favor, inténtalo de nuevo.",{timeout:1500})}}},mounted(){Promise.all([this.listarIngresos()]).then(()=>{}).catch(f=>{console.error("Error al realizar llamadas a la API:",f)})},watch:{async dateValue(f,c){try{const I=await V.get("https://thtsystemv2.tech/public/api/v1/moneys-akemy/list",{params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate},...Nl});this.projects=I.data,this.projects&&this.projects.length>0?fe().success("Ingresos listados correctamente",{timeout:1500}):fe().info("Para este día, no hay registros de ingreso",{timeout:2500})}catch(I){console.error("Error al obtener los datos de los empleados:",I),fe().error("Ocurrió un error al obtener los ingresos. Por favor, inténtalo de nuevo.",{timeout:1500})}}}},vo={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},bo=t("h5",null,"Ingresos Caja General",-1),ho={class:"flex items-center"},fo={class:"w-[370px]"},go={key:0},_o={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},yo={class:"font-bold text-blue-700"},xo={key:1},Vo={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},Co={key:2,class:"block"},ko=t("br",null,null,-1),wo=["innerHTML"],Eo=t("br",null,null,-1),$o=["innerHTML"],Mo=t("br",null,null,-1),Io=["innerHTML"],So={key:3},Uo={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},To={key:4},Do={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},Po={key:5,class:"action-btn text-end mr-3"},No=["onClick"],Ro=t("span",null,"Ver documento",-1),jo={class:"text-xl"},Ao=["onClick"],Oo={class:"text-base"},qo={class:"py-4 px-3"};function Fo(f,c,I,w,g,S){const P=D("Button"),O=D("VueTailwindDatePicker"),A=D("FromGroup"),B=D("InputGroup"),K=D("Icon"),le=D("Tooltip"),R=D("MenuItem"),ue=D("Dropdown"),z=D("Pagination"),ye=D("vue-good-table"),k=D("EditProject"),q=D("Card");return _(),x("div",null,[e(q,{noborder:""},{default:o(()=>[t("div",vo,[bo,t("div",ho,[e(P,{icon:"heroicons-outline:arrow-path",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm mr-3",iconClass:"text-lg",onClick:S.reloadCrmTable},null,8,["onClick"]),e(A,{name:"d1"},{default:o(()=>[t("div",fo,[e(O,{modelValue:g.dateValue,"onUpdate:modelValue":c[0]||(c[0]=E=>g.dateValue=E),"input-classes":"form-control "},null,8,["modelValue"])])]),_:1}),e(B,{modelValue:g.searchTerm,"onUpdate:modelValue":c[1]||(c[1]=E=>g.searchTerm=E),placeholder:"Ingrese N° de recibo para buscar",type:"text",prependIcon:"heroicons-outline:search",merged:"",class:"ml-3 w-[280px]"},null,8,["modelValue"]),e(P,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",iconClass:"text-lg",onClick:T(S.downloadFile2,["prevent"])},null,8,["onClick"])])]),e(ye,{class:"-mx-6",columns:g.columns,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.projects,"pagination-options":{enabled:!0,perPage:g.perpage},"search-options":{enabled:!0,externalQuery:g.searchTerm},"sort-options":{enabled:!1}},{"table-row":o(E=>[E.column.field=="nro_voucher"?(_(),x("span",go,[t("div",_o,[t("span",yo,J(E.row.nro_voucher),1)])])):U("",!0),E.column.field=="branch_office"?(_(),x("span",xo,[t("div",Vo,J(E.row.branch_office.description),1)])):U("",!0),E.column.field==="client"?(_(),x("span",Co,[t("div",null,[E.row.client?(_(),x(ge,{key:0},[Ce(" C- "+J(E.row.client.fullname),1),ko,t("span",{class:"font-bold",innerHTML:"N° Doc "+E.row.client.document},null,8,wo)],64)):E.row.employee?(_(),x(ge,{key:1},[Ce(" E- "+J(E.row.employee.fullname),1),Eo,t("span",{class:"font-bold",innerHTML:"N° Doc "+E.row.employee.document},null,8,$o)],64)):E.row.provider?(_(),x(ge,{key:2},[Ce(" P- "+J(E.row.provider.fullname),1),Mo,t("span",{class:"font-bold",innerHTML:"N° Doc "+E.row.provider.document},null,8,Io)],64)):(_(),x(ge,{key:3},[Ce(" No hay información disponible ")],64))])])):U("",!0),E.column.field=="concept"?(_(),x("span",So,[t("div",Uo,J(E.row.concept.description),1)])):U("",!0),E.column.field=="payment_method"?(_(),x("span",To,[t("div",Do,J(E.row.payment_method.description),1)])):U("",!0),E.column.field=="action"?(_(),x("div",Po,[e(le,{placement:"top",arrow:"",theme:"info-500"},{button:o(()=>[t("div",{class:"action-btn",onClick:T(oe=>S.handleVerDocumento(E.row.id),["prevent"])},[e(K,{class:"text-2xl",icon:"heroicons:clipboard-document-list"})],8,No)]),default:o(()=>[Ro]),_:2},1024),e(ue,{classMenuItems:" w-[150px]"},{menus:o(()=>[(_(!0),x(ge,null,yl(g.actions,(oe,he)=>(_(),Ee(R,{key:he},{default:o(()=>[t("div",{onClick:xe=>oe.doit(E.row),class:Vl(`
                
                  ${oe.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[t("span",Oo,[e(K,{icon:oe.icon},null,8,["icon"])]),t("span",null,J(oe.name),1)],10,Ao)]),_:2},1024))),128))]),default:o(()=>[t("div",jo,[e(K,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):U("",!0)]),"pagination-bottom":o(E=>[t("div",qo,[e(z,{total:g.projects.length,current:g.current,"per-page":g.perpage,pageRange:g.pageRange,onPageChanged:c[2]||(c[2]=oe=>g.current=oe),pageChanged:E.pageChanged,perPageChanged:E.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"]),e(k,{activeModal:g.showEditModal,onClose:c[3]||(c[3]=E=>g.showEditModal=!1),ingresoData:g.ingresoData,title:"Actualizar Datos Ingreso",onUpdateIngresoList:S.listarIngresos},null,8,["activeModal","ingresoData","onUpdateIngresoList"])]),_:1})])}const Bo=xl(po,[["render",Fo]]),Lo={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Go={key:0,class:"text-red-500"},zo={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Ho={key:0,class:"text-red-500"},Yo={class:"grid lg:grid-cols-1 gap-4 grid-cols-1"},Jo={key:0,class:"flex items-center"},Zo={key:1,class:"flex items-center"},Qo={key:2,class:"flex items-center"},Wo={key:3,class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Ko={name:"client_form",id:"client_form",autocomplete:"off",class:"mx-auto space-y-4"},Xo={class:"grid grid-cols-3 lg:grid-cols-3 gap-4"},ea={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},la={class:"lg:col-span-3"},ta=t("div",{class:"lg:hidden"},null,-1),oa={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},aa={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},sa={class:"lg:col-span-3"},na=t("div",{class:"lg:hidden"},null,-1),da={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ra={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ia={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},ca=t("div",{class:"lg:col-span-1"},null,-1),ua={class:"lg:col-span-3 flex justify-end"},ma={name:"providerForm",id:"providerForm",autocomplete:"off",class:"space-y-4"},pa={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},va={class:"md:col-span-1 lg:col-span-2"},ba={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ha={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fa={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},ga=t("div",{class:"lg:col-span-3"},null,-1),_a={class:"lg:col-span-1 flex justify-end"},ya={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},xa={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Va={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ca={class:"flex items-center"},ka={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},wa={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Ea=t("div",{class:"lg:col-span-3"},null,-1),$a={class:"lg:col-span-1 flex justify-end"},Ma={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},Ia={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Sa=t("div",{class:"lg:col-span-3"},null,-1),Ua={class:"lg:col-span-1 flex justify-end"},Ta={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Da=t("label",{for:"payment-type",class:"block text-sm font-medium text-gray-700 flex items-center"},[Ce(" Método de pago "),t("span",{class:"text-red-500 ml-1"},"*")],-1),Pa={class:"flex items-center"},Na={class:"flex items-center"},Ra={class:"flex-1"},ja={key:0,class:"text-red-500"},Aa={class:"ml-2 flex items-center"},Oa={class:"form-group col-lg-12 form__footerBtn mt-4"},qa={class:"text-right"},et={__name:"ClientEditModal-Egreso-A",props:{activeModal:Boolean,egresoData:Object},emits:["close","updateEgresoList"],setup(f,{emit:c}){const I=Be().headers();_l();const w=fe(),g=r(!1),S=r(!1),P=r(!1),O=r(!1),A=r(!1),B=r([]),K=r([]),le=r([]),R=f,ue=c,z=()=>{ue("close")},ye=()=>{z()},k=r({receptor_module:"",receptor_fullname:"",receptor_document:"",is_paycredit:"",available_edit:"",user_id:"",branchoffice_id:"",moneybox_id:"",concept_id:"",paymentmethod_id:"",currency_id:"",voucher_id:"",client_id:"",provider_id:"",employee_id:"",accountbank_id:"",date_movement:"",amount:"",text_amount:"",gloss:"",reference_operation:"",nro_voucher:"",serie:"",correlative:"",billing_external_id:"",billing_hash:"",motive_cancelled:"",billing_cancelled:"",date_repayment:"",repaymentmovement_id:"",dischargedocument_id:"",is_voucher_external:"",voucher_external:"",nro_voucher_external:"",booking_id:"",commision_id:"",observation:"",is_visible:""}),q=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/ubigeo/departments",I);B.value=m.data.data.map(i=>({value:i.id,label:i.name}))}catch(m){console.error("Error fetching departments:",m)}},E=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/clients/list",I);Ne.value=m.data.data.map(i=>({value:i.id,label:i.fullname}))}catch(m){console.error("Error fetching departments:",m)}},oe=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/moneys/expense-concepts",I);je.value=m.data.data.map(i=>({value:i.id,label:i.description}))}catch(m){console.error("Error fetching departments:",m)}},he=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/banks/list",I);vl.value=m.data.data.map(i=>({value:i.id,label:i.description}))}catch(m){console.error("Error fetching departments:",m)}},xe=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/typevouchers/list",I);cl.value=m.data.data.map(i=>({value:i.id,label:i.description}))}catch(m){console.error("Error fetching departments:",m)}},F=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/accountbanks/list",I);Q.value=m.data.data.map(i=>({value:i.id,label:i.name}))}catch(m){console.error("Error fetching departments:",m)}},te=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/providers/list",I);ce.value=m.data.data.map(i=>({value:i.id,label:i.fullname}))}catch(m){console.error("Error fetching departments:",m)}},N=async()=>{try{const m=await V.get("https://thtsystemv2.tech/public/api/v1/employees/list",I);Ze.value=m.data.data.map(i=>({value:i.id,label:i.fullname}))}catch(m){console.error("Error fetching departments:",m)}},$e=[{value:501,label:"SOL"},{value:502,label:"DÓLAR"},{value:503,label:"EURO"}],ce=r([]),Ze=r([]),cl=r([]),Ge=r({description:""}),me=r({branchoffice_id:"",bank_id:"",typeaccount_id:"",currency_id:"",name:"",number_account:"",cci_account:"",balance:"",headline:"",description:""}),Ne=r([]),Se=[{value:2,label:"Caja General"}],Ue=[{value:500,label:"Oficina Principal"}],Re=[{value:504,label:"CUENTA SIMPLE"},{value:505,label:"CUENTA CORRIENTE"},{value:506,label:"TARJETA DE CRÉDITO"}],ke=r(null),Te=r(null),Me=r(null),de=r(null),ze=r(null),el=r(null),ll=r(null),rl=r($e[0].value),He=r(Re[0].value),Ye=r(Ue[0].value),Qe=r(Se[0].value),tl=()=>{},ul=()=>{g.value=!g.value},Oe=r(!1),ml=()=>{g.value=!1},ae=()=>{S.value=!1},We=()=>{P.value=!1},ne=()=>{O.value=!1},ol=()=>{S.value=!S.value},fl=()=>{const m=document.querySelector(".cajonci-select select");if(m){const il=m.selectedIndex,Cl=m.options[il].text;k.value.branchoffice_id=il,k.value.branchbox=Cl}const i=document.querySelector(".pago-select select");if(m){const il=i.selectedIndex,Cl=i.options[il].text;k.value.paymentmethod_id=il,k.value.paymethod=Cl}const Z=ke.value;k.value.client_id=Z;const v=Te.value;k.value.provider_id=v;const ie=Me.value;k.value.employee_id=ie;const Dl=de.value;k.value.concept_id=Dl;const Pl=ze.value;k.value.accountbank_id=Pl,k.value.voucher_external=ll.value,k.value.is_voucher_external=Oe.value,Oe.value||(k.value.nro_voucher_external=null,k.value.voucher_external=null),V.post(`https://thtsystemv2.tech/public/api/v1/moneys-akemy/edit/${k.value.id}`,k.value,{...I}).then(il=>{ue("updateEgresoList"),z(),w.success(il.data.message)}).catch(il=>{console.error("Error al guardar los datos:",il)})},Je=r(!1),pl=()=>{O.value=!O.value},re=r({typedocument_id:"",document:"",department_id:"",province_id:"",district_id:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:""}),al=r("cash"),vl=r([]),ee=m=>!!k.value[m],gl=m=>ee(m),Q=r([]),De=[{value:1,label:"Natural"},{value:2,label:"Jurídico"}],W=[{value:1,label:"DNI"},{value:2,label:"RUC"},{value:3,label:"PASAPORTE"}],pe=[{id:1,label:"Soltero"},{id:2,label:"Casado"},{id:2,label:"Viudo"},{id:2,label:"Divorciado"}],we=[{id:1,label:"Masculino"},{id:2,label:"Femenino"}],L=r({typedocument_id:"",department_id:"",province_id:"",district_id:"",type_client:"",fullname:"",document:"",tradename:"",address:"",email:"",telephone:"",cellphone:"",date_birthday:"",sex:"",status:"",typeDocument:""}),sl=r(De[0].value),qe=r(W[0].value);let Ve=r(null),Ie=r(null),be=r(null),Ke=r(null),nl=r(null),X="";const bl=[{value:"clients",label:"Clientes"},{value:"providers",label:"Proveedores"},{value:"employees",label:"Empleados"}],Pe=r(bl[0].value),je=r([]),Fe=[{value:1,label:"Efectivo"},{value:2,label:"Visa"},{value:3,label:"Cheque"},{value:4,label:"Depósito a cuenta"}],Ae=async()=>{try{const m=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/provinces/${L.value.department_id}`,I);le.value=m.data.data.map(i=>({value:i.id,label:i.name}))}catch(m){console.error("Error fetching provinces:",m)}},Xe=async()=>{try{const m=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/districts/${L.value.province_id}`,I);K.value=m.data.data.map(i=>({value:i.id,label:i.name}))}catch(m){console.error("Error fetching provinces:",m)}},dl=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getRucData",{ruc:re.value.document}).then(m=>{re.value.fullname=m.data.data.nombre_o_razon_social,re.value.address=m.data.data.direccion}).catch(m=>{console.error("Error al obtener datos del RUC:",m)})},y=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getDniData",{dni:L.value.document}).then(m=>{L.value.fullname=m.data.data.nombre_completo}).catch(m=>{console.error("Error al obtener datos del DNI:",m)})},u=()=>{V.post("https://thtsystemv2.tech/public/api/v1/banks/create",Ge.value,{...I}).then(m=>{ne(),he(),w.success(m.data.message)}).catch(m=>{console.error("Error al guardar los datos:",m)})},Y=()=>{V.post("https://thtsystemv2.tech/public/api/v1/providers/create",re.value,{...I}).then(m=>{ae(),te(),w.success(m.data.message)}).catch(m=>{console.error("Error al guardar los datos:",m)})},a=()=>{const m=document.querySelector(".typecliente-select select");if(m){const Z=m.selectedIndex,v=Z.toString();m.options[Z].text,L.value.type_client=v}const i=document.querySelector(".typedocument-select select");if(m){const Z=i.selectedIndex,v=i.options[Z].text;L.value.typedocument_id=Z,L.value.typeDocument=v}V.post("https://thtsystemv2.tech/public/api/v1/clients/create",L.value,{...I}).then(Z=>{ml(),E(),w.success(Z.data.message)}).catch(Z=>{console.error("Error al guardar los datos:",Z)})},d=()=>{const m=document.querySelector(".oficinaprincipal-select select");if(m){const ie=m.selectedIndex;m.options[ie].text,me.value.branchoffice_id=ie}const i=document.querySelector(".typeaccount-select select");if(m){const ie=i.selectedIndex;i.options[ie].text,me.value.typeaccount_id=ie}const Z=document.querySelector(".banck-select select");if(m){const ie=Z.selectedIndex;Z.options[ie].text,me.value.bank_id=ie}const v=document.querySelector(".money-select select");if(m){const ie=v.selectedIndex;v.options[ie].text,me.value.currency_id=ie}V.post("https://thtsystemv2.tech/public/api/v1/accountbanks/create",me.value,{...I}).then(ie=>{We(),F(),w.success(ie.data.message)}).catch(ie=>{console.error("Error al guardar los datos:",ie)})};M(()=>ke.value,(m,i)=>{}),M(()=>Qe.value,(m,i)=>{}),M(()=>de.value,(m,i)=>{}),M(()=>rl.value,(m,i)=>{}),M(()=>Te.value,(m,i)=>{}),M(()=>al.value,(m,i)=>{}),M(()=>ze.value,(m,i)=>{}),M(()=>He.value,(m,i)=>{}),M(()=>el.value,(m,i)=>{}),M(()=>Me.value,(m,i)=>{}),M(()=>Ye.value,(m,i)=>{}),M(Pe,(m,i)=>{const Z=document.querySelector(".emisor-select select");if(Z){const v=Z.selectedIndex;Z.options[v].text}}),M(()=>be.value,(m,i)=>{if(document.querySelector(".district-select select")){const v=m.toString().padStart(6,"0");L.value.district_id=v,re.value.district_id=v}}),M(()=>Ie.value,(m,i)=>{if(document.querySelector(".province-select select")){const v=m.toString().padStart(4,"0");L.value.province_id=v,re.value.province_id=v}}),M(()=>Ve.value,(m,i)=>{if(document.querySelector(".department-select select")){const v=m.toString().padStart(2,"0");L.value.department_id=v,re.value.department_id=v}});const G=r("N° DNI"),b=r("RENIEC");return M(()=>qe.value,m=>{const i=document.querySelector(".typedocument-select select");if(i){const Z=i.selectedIndex,v=i.options[Z],ie=i.options[Z].text;L.value.typedocument_id=Z,L.value.typeDocument=ie,G.value=`N° ${v.textContent}`,b.value=m==="1"?"RENIEC":m==="2"?"SUNAT":"Validar"}}),M(()=>nl.value,(m,i)=>{const Z=document.querySelector(".sexo-select select");if(Z){const v=Z.selectedIndex,ie=Z.options[v].text;L.value.sex=ie}}),M(()=>Ke.value,(m,i)=>{const Z=document.querySelector(".state-select select");if(Z){const v=Z.selectedIndex,ie=Z.options[v].text;L.value.status=ie}}),wl(async()=>{try{await oe(),await F(),await te(),await he(),await E(),await N(),await q(),await xe()}catch(m){console.error("Error al realizar llamadas a la API:",m)}}),M(()=>R.egresoData,m=>{m&&(ke.value=null,Me.value=null,Te.value=null,m.client_id?(Pe.value="clients",ke.value=m.client_id):m.employee_id?(Pe.value="employees",Me.value=m.employee_id):m.provider_id&&(Pe.value="providers",Te.value=m.provider_id),k.value.id=m.id,k.value.gloss=m.gloss,k.value.nro_voucher_external=m.nro_voucher_external,k.value.reference_operation=m.reference_operation,de.value=m.concept_id,al.value=m.paymentmethod_id,ze.value=m.accountbank_id,k.value.amount=m.amount,Oe.value=m.is_voucher_external===1,ll.value=m.voucher_external,A.value=m.paymentmethod_id===4)}),(m,i)=>{const Z=D("flat-pickr");return _(),x("div",null,[e(l(_e),{activeModal:R.activeModal,onClose:z,title:"Actualizar Registro de Egreso - Caja General",centered:""},{default:o(()=>[t("form",{onSubmit:T(tl,["prevent"]),class:"space-y-4"},[t("div",Lo,[e(l(s),{name:"d1",error:l(X)},{default:o(()=>[e(l(C),{label:"Caja aperturada",options:Se,modelValue:Qe.value,"onUpdate:modelValue":i[0]||(i[0]=v=>Qe.value=v),disabled:"",class:"cajonci-select"},null,8,["modelValue"])]),_:1},8,["error"]),e(l(s),{label:"Descripción egreso",name:"d2"},{default:o(()=>[e(l($),{type:"text",placeholder:"Descripción egreso",modelValue:k.value.gloss,"onUpdate:modelValue":i[1]||(i[1]=v=>k.value.gloss=v),modelModifiers:{trim:!0}},null,8,["modelValue"]),gl("gloss")?U("",!0):(_(),x("span",Go,"Por favor ingrese descripción"))]),_:1})]),t("div",zo,[e(l(s),{name:"d3"},{default:o(()=>[e(l(C),{label:"Emisor (opcional)",options:bl,modelValue:Pe.value,"onUpdate:modelValue":i[2]||(i[2]=v=>Pe.value=v),class:"emisor-select"},null,8,["modelValue"])]),_:1}),e(l(s),{name:"d4"},{default:o(()=>[e(l(C),{label:"Concepto egreso",options:je.value,modelValue:de.value,"onUpdate:modelValue":i[3]||(i[3]=v=>de.value=v),class:"concept-select",placeholder:"Seleccione concepto"},null,8,["options","modelValue"]),de.value?U("",!0):(_(),x("span",Ho,"Por favor selecciona un concepto"))]),_:1})]),t("div",Yo,[Pe.value==="clients"?(_(),x("div",Jo,[e(l(s),{label:"Clientes",class:"flex-1"},{default:o(()=>[e(l(C),{options:Ne.value,modelValue:ke.value,"onUpdate:modelValue":i[4]||(i[4]=v=>ke.value=v),class:"client-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:ul,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):Pe.value==="providers"?(_(),x("div",Zo,[e(l(s),{label:"Proveedores",class:"flex-1"},{default:o(()=>[e(l(C),{options:ce.value,modelValue:Te.value,"onUpdate:modelValue":i[5]||(i[5]=v=>Te.value=v),class:"provider-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:ol,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):Pe.value==="employees"?(_(),x("div",Qo,[e(l(s),{label:"Empleados",class:"flex-1"},{default:o(()=>[e(l(C),{options:Ze.value,modelValue:Me.value,"onUpdate:modelValue":i[6]||(i[6]=v=>Me.value=v),class:"employee-select"},null,8,["options","modelValue"])]),_:1})])):U("",!0),e(l(Ml),{label:"Incluye Comprobante",modelValue:Oe.value,"onUpdate:modelValue":i[7]||(i[7]=v=>Oe.value=v),checked:Oe.value},null,8,["modelValue","checked"]),Oe.value?(_(),x("div",Wo,[e(l(s),{label:"Tipo de Comprobante"},{default:o(()=>[e(l(C),{options:cl.value,modelValue:ll.value,"onUpdate:modelValue":i[8]||(i[8]=v=>ll.value=v)},null,8,["options","modelValue"])]),_:1}),e(l(s),{label:"N° de Comprobante"},{default:o(()=>[e(l($),{type:"text",modelValue:k.value.nro_voucher_external,"onUpdate:modelValue":i[9]||(i[9]=v=>k.value.nro_voucher_external=v),placeholder:"Ingrese N° de Comprobante"},null,8,["modelValue"])]),_:1})])):U("",!0)]),e(l(_e),{title:"Registrar nuevo Cliente",label:"Modal title",activeModal:g.value,onClose:i[24]||(i[24]=v=>g.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",Ko,[t("div",Xo,[t("div",null,[e(l(s),{label:"Tipo de cliente"},{default:o(()=>[e(l(C),{options:De,modelValue:sl.value,"onUpdate:modelValue":i[10]||(i[10]=v=>sl.value=v),class:"typecliente-select",placeholder:"Selccione Cliente"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo documento"},{default:o(()=>[e(l(C),{options:W,modelValue:qe.value,"onUpdate:modelValue":i[11]||(i[11]=v=>qe.value=v),class:"typedocument-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° Documento"},{default:o(()=>[e(l(Le),{type:"text",placeholder:G.value,modelValue:L.value.document,"onUpdate:modelValue":i[12]||(i[12]=v=>L.value.document=v)},{append:o(()=>[e(l(j),{text:b.value,btnClass:"btn-outline-dark",onClick:T(y,["prevent"])},null,8,["text"])]),_:1},8,["placeholder","modelValue"])]),_:1})])]),t("div",ea,[t("div",la,[e(l(s),{label:"Nombre ó Razón Social"},{default:o(()=>[e(l($),{type:"text",id:"client_fullname",modelValue:L.value.fullname,"onUpdate:modelValue":i[13]||(i[13]=v=>L.value.fullname=v),modelModifiers:{trim:!0},placeholder:"Ingrese Nombre ó Razón Social "},null,8,["modelValue"])]),_:1})]),ta]),t("div",oa,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:B.value,label:"Departamento",modelValue:l(Ve),"onUpdate:modelValue":i[14]||(i[14]=v=>se(Ve)?Ve.value=v:Ve=v),class:"department-select",onChange:Ae,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:le.value,label:"Provincias",modelValue:l(Ie),"onUpdate:modelValue":i[15]||(i[15]=v=>se(Ie)?Ie.value=v:Ie=v),class:"province-select",onChange:Xe,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:K.value,label:"Distritos",modelValue:l(be),"onUpdate:modelValue":i[16]||(i[16]=v=>se(be)?be.value=v:be=v),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",aa,[t("div",sa,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{type:"text",modelValue:L.value.address,"onUpdate:modelValue":i[17]||(i[17]=v=>L.value.address=v),modelModifiers:{trim:!0},placeholder:"Ingrese Direción"},null,8,["modelValue"])]),_:1})]),na]),t("div",da,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{type:"text",modelValue:L.value.cellphone,"onUpdate:modelValue":i[18]||(i[18]=v=>L.value.cellphone=v),modelModifiers:{trim:!0},placeholder:"Ingrese N° de celular"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono fijo"},{default:o(()=>[e(l($),{type:"text",modelValue:L.value.telephone,"onUpdate:modelValue":i[19]||(i[19]=v=>L.value.telephone=v),modelModifiers:{trim:!0},placeholder:"Ingrese N° de telefono fijo"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{type:"email",modelValue:L.value.email,"onUpdate:modelValue":i[20]||(i[20]=v=>L.value.email=v),modelModifiers:{trim:!0},placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1})])]),t("div",ra,[t("div",null,[e(l(s),{label:"Fecha de nacimiento"},{default:o(()=>[e(Z,{modelValue:L.value.date_birthday,"onUpdate:modelValue":i[21]||(i[21]=v=>L.value.date_birthday=v),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:pe,label:"Estado",modelValue:l(Ke),"onUpdate:modelValue":i[22]||(i[22]=v=>se(Ke)?Ke.value=v:Ke=v),class:"state-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:we,label:"Sexo",modelValue:l(nl),"onUpdate:modelValue":i[23]||(i[23]=v=>se(nl)?nl.value=v:nl=v),class:"sexo-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})])]),t("div",ia,[ca,t("div",ua,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(ml,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(a,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar nuevo Proveedor",label:"Modal title",activeModal:S.value,onClose:i[35]||(i[35]=v=>S.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",ma,[t("div",pa,[t("div",null,[e(l(s),{label:"N° RUC"},{default:o(()=>[e(l(Le),{type:"text",placeholder:"RUC",modelValue:re.value.document,"onUpdate:modelValue":i[25]||(i[25]=v=>re.value.document=v),modelModifiers:{trim:!0}},{append:o(()=>[e(l(j),{text:"SUNAT",btnClass:"btn-outline-dark ",onClick:T(dl,["prevent"])})]),_:1},8,["modelValue"])]),_:1})]),t("div",va,[e(l(s),{label:"Razón social del proveedor"},{default:o(()=>[e(l($),{modelValue:re.value.fullname,"onUpdate:modelValue":i[26]||(i[26]=v=>re.value.fullname=v),modelModifiers:{trim:!0},placeholder:"Razón social del proveedor",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre comercial"},{default:o(()=>[e(l($),{modelValue:re.value.tradename,"onUpdate:modelValue":i[27]||(i[27]=v=>re.value.tradename=v),modelModifiers:{trim:!0},placeholder:"Nombre comercial",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",ba,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:B.value,label:"Departamento",modelValue:l(Ve),"onUpdate:modelValue":i[28]||(i[28]=v=>se(Ve)?Ve.value=v:Ve=v),class:"department-select",onChange:Ae,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:le.value,label:"Provincias",modelValue:l(Ie),"onUpdate:modelValue":i[29]||(i[29]=v=>se(Ie)?Ie.value=v:Ie=v),class:"province-select",onChange:Xe,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:K.value,label:"Distritos",modelValue:l(be),"onUpdate:modelValue":i[30]||(i[30]=v=>se(be)?be.value=v:be=v),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{modelValue:re.value.address,"onUpdate:modelValue":i[31]||(i[31]=v=>re.value.address=v),modelModifiers:{trim:!0},placeholder:"Dirección",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",ha,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{modelValue:re.value.cellphone,"onUpdate:modelValue":i[32]||(i[32]=v=>re.value.cellphone=v),modelModifiers:{trim:!0},placeholder:"Celular","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono"},{default:o(()=>[e(l($),{modelValue:re.value.telephone,"onUpdate:modelValue":i[33]||(i[33]=v=>re.value.telephone=v),modelModifiers:{trim:!0},placeholder:"Teléfono","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{modelValue:re.value.email,"onUpdate:modelValue":i[34]||(i[34]=v=>re.value.email=v),modelModifiers:{trim:!0},placeholder:"Correo electrónico",type:"email",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",fa,[ga,t("div",_a,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(ae,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Y,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar cuenta bancaria",label:"Modal title",activeModal:P.value,onClose:i[47]||(i[47]=v=>P.value=!1)},{default:o(()=>[t("form",ya,[t("div",xa,[t("div",null,[e(l(s),{label:"Sucursal",class:"block"},{default:o(()=>[e(l(C),{modelValue:Ye.value,"onUpdate:modelValue":i[36]||(i[36]=v=>Ye.value=v),options:Ue,required:"",class:"oficinaprincipal-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo de cuenta",class:"block"},{default:o(()=>[e(l(C),{modelValue:He.value,"onUpdate:modelValue":i[37]||(i[37]=v=>He.value=v),options:Re,required:"",class:"typeaccount-select"},null,8,["modelValue"])]),_:1})])]),t("div",Va,[t("div",Ca,[e(l(s),{label:"Banco",class:"flex-1"},{default:o(()=>[e(l(C),{options:vl.value,modelValue:el.value,"onUpdate:modelValue":i[38]||(i[38]=v=>el.value=v),class:"banck-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:T(pl,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),t("div",null,[e(l(s),{label:"Moneda",class:"block"},{default:o(()=>[e(l(C),{modelValue:rl.value,"onUpdate:modelValue":i[39]||(i[39]=v=>rl.value=v),options:$e,required:"",class:"money-select"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:me.value.name,"onUpdate:modelValue":i[40]||(i[40]=v=>me.value.name=v),modelModifiers:{trim:!0},placeholder:"Nombre cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",ka,[t("div",null,[e(l(s),{label:"N° de cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:me.value.number_account,"onUpdate:modelValue":i[41]||(i[41]=v=>me.value.number_account=v),modelModifiers:{trim:!0},placeholder:"N° de cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° CCI (Código interbancario)",class:"block"},{default:o(()=>[e(l($),{modelValue:me.value.cci_account,"onUpdate:modelValue":i[42]||(i[42]=v=>me.value.cci_account=v),modelModifiers:{trim:!0},placeholder:"N° CCI",required:""},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Titular cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:me.value.headline,"onUpdate:modelValue":i[43]||(i[43]=v=>me.value.headline=v),modelModifiers:{trim:!0},placeholder:"Titular cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Descripción",class:"block"},{default:o(()=>[e(l(Ul),{modelValue:me.value.description,"onUpdate:modelValue":i[44]||(i[44]=v=>me.value.description=v),modelModifiers:{trim:!0},placeholder:"Descripción"},null,8,["modelValue"])]),_:1})]),t("div",wa,[Ea,t("div",$a,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(We,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(d,["prevent"])})])])]),e(l(_e),{title:"Registrar banco",label:"Modal title",activeModal:O.value,onClose:i[46]||(i[46]=v=>O.value=!1)},{default:o(()=>[t("form",Ma,[e(l($),{label:"Nombre",name:"pn",type:"text",placeholder:"Ingresar nombre ",modelValue:Ge.value.description,"onUpdate:modelValue":i[45]||(i[45]=v=>Ge.value.description=v)},null,8,["modelValue"]),t("div",Ia,[Sa,t("div",Ua,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(ne,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(u,["prevent"])})])])])]),_:1},8,["activeModal"])]),_:1},8,["activeModal"]),t("div",Ta,[e(l(s),{name:"d5",class:"mt-1"},{default:o(()=>[Da,e(l(C),{id:"payment-type",options:Fe,disabled:"",modelValue:al.value,"onUpdate:modelValue":i[48]||(i[48]=v=>al.value=v),class:"pago-select mt-2"},null,8,["modelValue"])]),_:1}),A.value?(_(),x(ge,{key:0},[t("div",Pa,[e(l(s),{label:"Cuenta Origen",class:"flex-1"},{default:o(()=>[e(l(C),{options:Q.value,modelValue:ze.value,"onUpdate:modelValue":i[49]||(i[49]=v=>ze.value=v),class:"cuentadestino-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),e(l(s),{label:"N° de Operación"},{default:o(()=>[e(l($),{type:"text",modelValue:k.value.reference_operation,"onUpdate:modelValue":i[50]||(i[50]=v=>k.value.reference_operation=v),modelModifiers:{trim:!0},placeholder:"Ingrese N° de Operación"},null,8,["modelValue"])]),_:1})],64)):U("",!0),t("div",Na,[t("div",Ra,[e(l(s),{label:"Monto",name:"d6"},{default:o(()=>[e(l($),{type:"text",placeholder:"Monto",modelValue:k.value.amount,"onUpdate:modelValue":i[51]||(i[51]=v=>k.value.amount=v),modelModifiers:{trim:!0},disabled:!Je.value},null,8,["modelValue","disabled"]),gl("amount")?U("",!0):(_(),x("span",ja,"Por favor ingrese monto"))]),_:1})]),t("div",Aa,[e(l(Ml),{active:"",label:"Modificar",class:"font-bold",modelValue:Je.value,"onUpdate:modelValue":i[52]||(i[52]=v=>Je.value=v)},null,8,["modelValue"])])])]),t("div",Oa,[t("div",qa,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(ye,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:fl})])])],32)]),_:1},8,["activeModal"])])}}},Rl=Be().headers();function Fa(){const f=new Date;return f.setHours(f.getHours()-5),f.toISOString().slice(0,10)}const Ba={components:{InputGroup:Le,Tooltip:Sl,VueTailwindDatePicker:Tl,FromGroup:s,Button:j,Pagination:Il,Dropdown:Al,Icon:El,EditProject:et,MenuItem:Ol,Card:kl,ProgressBar:Jl},data(){const c=new Date;new Date(c.getTime()+-300*6e4).toISOString().split("T")[0];const w=new Date,S=new Date(w.getFullYear(),w.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",O=new Date(w.getFullYear(),w.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{searchTerm:"",egresoData:{},showEditModal:!1,current:1,dateDefault:Fa(),perpage:10,pageRange:10,dateValue:{startDate:S,endDate:O},actions:[{name:"edit",icon:"heroicons:pencil-square",doit:A=>{this.egresoData=A,this.showEditModal=!0}},{name:"delete",icon:"heroicons-outline:trash",doit:async A=>{try{await V.delete(`https://thtsystemv2.tech/public/api/v1/hotels/delete/${A.id}`,Rl),fe().success("Hotel eliminado correctamente",{timeout:1500}),this.listarHoteles()}catch(B){console.error("Error al eliminar empleado:",B)}}}],columns:[{label:"N° ingreso",field:"nro_voucher"},{label:"Fecha",field:"date_movement"},{label:"Caja",field:"branch_office"},{label:"Receptor",field:"client"},{label:"Concepto",field:"concept"},{label:"Método pago	",field:"payment_method"},{label:"Monto ",field:"amount"},{label:"Action",field:"action"}],projects:[]}},methods:{async reloadCrmTable(){try{await this.listarIngresos()}catch(f){console.error("Error al recargar Egresos :",f)}},async listarIngresos(){try{const f=await V.get("https://thtsystemv2.tech/public/api/v1/moneys-akemy/list-expense",{params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate},...Rl});this.projects=f.data,this.projects&&this.projects.length>0?fe().success("Egresos listados correctamente",{timeout:1500}):fe().info("Para el día de hoy, todavía no exiten registros de egreso",{timeout:2500})}catch(f){console.error("Error al obtener los datos de los egresos:",f),fe().error("Ocurrió un error al obtener los egresos. Por favor, inténtalo de nuevo.",{timeout:1500})}},async downloadFile2(){try{const c=(await V.get("https://thtsystemv2.tech/public/api/v1/export-money-por-dia-expense",{params:{date:this.dateDefault},responseType:"blob"})).request.responseURL,I=new URL(c),w=document.createElement("a");w.href=I,w.setAttribute("download","archivo.xlsx"),w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w)}catch(f){console.error("Error al descargar el archivo:",f)}},handleVerDocumento(f){V.get(`https://thtsystemv2.tech/public/api/v1/list-movements-pdf/${f}`).then(c=>{}).catch(c=>{console.error("Error al obtener la URL del PDF:",c),window.open(c.config.url,"_blank")})}},watch:{async dateValue(f,c){try{const I=await V.get("https://thtsystemv2.tech/public/api/v1/moneys-akemy/list-expense",{params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate},...Rl});this.projects=I.data,this.projects&&this.projects.length>0?fe().success("Egresos listados correctamente",{timeout:1500}):fe().info("Para este día, no hay registros de egreso",{timeout:2500})}catch(I){console.error("Error al obtener los datos de los egresos:",I),fe().error("Ocurrió un error al obtener los egresos. Por favor, inténtalo de nuevo.",{timeout:1500})}}},mounted(){this.listarIngresos()}},La={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},Ga=t("h5",null,"Egresos Caja General",-1),za={class:"flex items-center"},Ha={class:"w-[370px]"},Ya={key:0},Ja={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},Za={class:"font-bold text-purple-700"},Qa={key:1},Wa={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},Ka={key:2,class:"block"},Xa=t("br",null,null,-1),es=["innerHTML"],ls=t("br",null,null,-1),ts=["innerHTML"],os=t("br",null,null,-1),as=["innerHTML"],ss={key:3},ns={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},ds={key:4},rs={class:"flex space-x-3 items-center text-left rtl:space-x-reverse"},is={class:"font-bold"},cs={class:"text-gray-600"},us={key:5,class:"action-btn text-end mr-3"},ms=["onClick"],ps=t("span",null,"Ver documento",-1),vs={class:"text-xl"},bs=["onClick"],hs={class:"text-base"},fs={class:"py-4 px-3"};function gs(f,c,I,w,g,S){const P=D("Button"),O=D("VueTailwindDatePicker"),A=D("FromGroup"),B=D("InputGroup"),K=D("Icon"),le=D("Tooltip"),R=D("MenuItem"),ue=D("Dropdown"),z=D("Pagination"),ye=D("vue-good-table"),k=D("EditProject"),q=D("Card");return _(),x("div",null,[e(q,{noborder:""},{default:o(()=>[t("div",La,[Ga,t("div",za,[e(P,{icon:"heroicons-outline:arrow-path",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm mr-3",iconClass:"text-lg",onClick:S.reloadCrmTable},null,8,["onClick"]),e(A,{name:"d1"},{default:o(()=>[t("div",Ha,[e(O,{modelValue:g.dateValue,"onUpdate:modelValue":c[0]||(c[0]=E=>g.dateValue=E),"input-classes":"form-control "},null,8,["modelValue"])])]),_:1}),e(B,{modelValue:g.searchTerm,"onUpdate:modelValue":c[1]||(c[1]=E=>g.searchTerm=E),placeholder:"Ingrese N° de recibo para buscar",type:"text",prependIcon:"heroicons-outline:search",merged:"",class:"ml-3 w-[280px]"},null,8,["modelValue"]),e(P,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",iconClass:"text-lg",onClick:T(S.downloadFile2,["prevent"])},null,8,["onClick"])])]),e(ye,{class:"-mx-6",columns:g.columns,styleClass:" vgt-table  table-head   v-middle striped  listview",rows:this.projects,"pagination-options":{enabled:!0,perPage:g.perpage},"search-options":{enabled:!0,externalQuery:g.searchTerm},"sort-options":{enabled:!1}},{"table-row":o(E=>{var oe,he,xe;return[E.column.field=="nro_voucher"?(_(),x("span",Ya,[t("div",Ja,[t("span",Za,J(E.row.nro_voucher),1)])])):U("",!0),E.column.field=="branch_office"?(_(),x("span",Qa,[t("div",Wa,J((oe=E.row.branch_office)==null?void 0:oe.description),1)])):U("",!0),E.column.field==="client"?(_(),x("span",Ka,[t("div",null,[E.row.client?(_(),x(ge,{key:0},[Ce(" C- "+J(E.row.client.fullname),1),Xa,t("span",{class:"font-bold",innerHTML:"N° Doc "+E.row.client.document},null,8,es)],64)):E.row.employee?(_(),x(ge,{key:1},[Ce(" E- "+J(E.row.employee.fullname),1),ls,t("span",{class:"font-bold",innerHTML:"N° Doc "+E.row.employee.document},null,8,ts)],64)):E.row.provider?(_(),x(ge,{key:2},[Ce(" P- "+J(E.row.provider.fullname),1),os,t("span",{class:"font-bold",innerHTML:"N° Doc "+E.row.provider.document},null,8,as)],64)):(_(),x(ge,{key:3},[Ce(" No hay información disponible ")],64))])])):U("",!0),E.column.field=="concept"?(_(),x("span",ss,[t("div",ns,J(E.row.concept.description),1)])):U("",!0),E.column.field=="payment_method"?(_(),x("span",ds,[t("div",rs,[t("div",null,[t("span",is,J((he=E.row.payment_method)==null?void 0:he.description),1),t("span",cs,"("+J((xe=E.row.account_bank)==null?void 0:xe.name)+")",1)])])])):U("",!0),E.column.field=="action"?(_(),x("div",us,[e(le,{placement:"top",arrow:"",theme:"info-500"},{button:o(()=>[t("div",{class:"action-btn",onClick:T(F=>S.handleVerDocumento(E.row.id),["prevent"])},[e(K,{class:"text-2xl",icon:"heroicons:clipboard-document-list"})],8,ms)]),default:o(()=>[ps]),_:2},1024),e(ue,{classMenuItems:" w-[150px]"},{menus:o(()=>[(_(!0),x(ge,null,yl(g.actions,(F,te)=>(_(),Ee(R,{key:te},{default:o(()=>[t("div",{onClick:N=>F.doit(E.row),class:Vl(`
                
                  ${F.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30  hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
                   w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center `)},[t("span",hs,[e(K,{icon:F.icon},null,8,["icon"])]),t("span",null,J(F.name),1)],10,bs)]),_:2},1024))),128))]),default:o(()=>[t("div",vs,[e(K,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):U("",!0)]}),"pagination-bottom":o(E=>[t("div",fs,[e(z,{total:g.projects.length,current:g.current,"per-page":g.perpage,pageRange:g.pageRange,onPageChanged:c[2]||(c[2]=oe=>g.current=oe),pageChanged:E.pageChanged,perPageChanged:E.perPageChanged,enableSearch:"",enableSelect:""},null,8,["total","current","per-page","pageRange","pageChanged","perPageChanged"])])]),_:1},8,["columns","rows","pagination-options","search-options"]),e(k,{activeModal:g.showEditModal,onClose:c[3]||(c[3]=E=>g.showEditModal=!1),egresoData:g.egresoData,title:"Actualizar Datos Ingreso",onUpdateEgresoList:S.listarIngresos},null,8,["activeModal","egresoData","onUpdateEgresoList"])]),_:1})])}const _s=xl(Ba,[["render",gs]]),ys=Be().headers(),xs={components:{Card:kl,Button:j,Tooltip:Sl,Pagination:Il,Icon:El,FromGroup:s},data(){return{advancedTable:[],toast:fe(),current:1,perpage:10,pageRange:5,searchTerm:"",options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Caja",field:"branch_box"},{label:"Fecha Apertura	",field:"date_opening"},{label:"Monto Apertura	",field:"amount_opening"},{label:"Fecha Cierre	",field:"date_closing"},{label:"Monto Cierre	",field:"amount_closing"},{label:"Usuario	",field:"user"},{label:"Action",field:"action"}],reloadKey:0,rangeDate:null,statistics:[{title:"Sales",count:"354",bg:"bg-warning-500",text:"text-primary-500",percent:"25.67% ",icon:"heroicons:arrow-trending-up",img:Zl,percentClass:"text-primary-500"},{title:"Revenue ",count:"$86,954",bg:"bg-info-500",text:"text-primary-500",percent:"8.67%",icon:"heroicons:arrow-trending-up",img:Ql,percentClass:"text-primary-500"},{title:"Conversion",count:"15%",bg:"bg-primary-500",text:"text-danger-500",percent:"1.67%  ",icon:"heroicons:arrow-trending-down",img:Wl,percentClass:"text-danger-500"},{title:"Leads",count:"654",bg:"bg-success-500",text:"text-primary-500",percent:"11.67%  ",icon:"heroicons:arrow-trending-up",img:Kl,percentClass:"text-primary-500"}],Campaigns:[{name:"Channel",value:"roi"},{name:"Email",value:"40%"},{name:"Website",value:"28%"},{name:"Facebook",value:"34%"},{name:"Offline",value:"17%"}]}},methods:{handleVerDocumento(f){V.get(`https://thtsystemv2.tech/public/api/v1/list-box-cuadre-akemy/${f}`).then(c=>{}).catch(c=>{console.error("Error al obtener la URL del PDF:",c),window.open(c.config.url,"_blank")})},async reloadCrmTable(){try{await this.fetchMoneyBoxes()}catch(f){console.error("Error al recargar Cajas de Dinero :",f)}},showSuccessToast(f){this.toast.success(f,{position:"top-right",timeout:3e3})},showErrorToast(f){this.toast.error(f,{position:"top-right",timeout:3e3})},fetchMoneyBoxes(){V.get("https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/list-normally",ys).then(f=>{this.advancedTable=f.data.data,this.showSuccessToast("Historial de caja recuperado correctamente!")}).catch(f=>{console.error("Error al obtener los registros de dinero:",f),this.showErrorToast("Error al obtener el Historial de caja. Por favor, inténtalo de nuevo.")})}},mounted(){this.fetchMoneyBoxes()}},Vs={class:"card-auto space-y-5"},Cs={class:"-mx-6"},ks={key:0,class:"font-medium",style:{fontWeight:"bold"}},ws={key:1,class:"font-medium text-blue-500"},Es={key:2,class:"font-medium text-purple-500"},$s={key:3,class:"font-medium"},Ms=t("br",null,null,-1),Is={key:4},Ss={class:"flex space-x-3 justify-center rtl:space-x-reverse"},Us=["onClick"],Ts=t("span",null,"Ver Cuadre",-1),Ds={class:"py-4 px-3 flex justify-center"};function Ps(f,c,I,w,g,S){const P=D("Button"),O=D("Icon"),A=D("Tooltip"),B=D("Pagination"),K=D("vue-good-table"),le=D("Card");return _(),x("div",null,[t("div",Vs,[e(le,{title:"Historial de Caja",noborder:""},{header:o(()=>[e(P,{icon:"heroicons-outline:arrow-path",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg",onClick:S.reloadCrmTable},null,8,["onClick"])]),default:o(()=>[t("div",Cs,[t("div",null,[e(K,{columns:g.columns,styleClass:" vgt-table  lesspadding2 centered ",rows:g.advancedTable,"pagination-options":{enabled:!0,perPage:g.perpage},"sort-options":{enabled:!1}},{"table-row":o(R=>[R.column.field=="branch_box"?(_(),x("span",ks,J(R.row.branch_box.description),1)):U("",!0),R.column.field=="amount_opening"?(_(),x("span",ws," S/. "+J(R.row.amount_opening),1)):U("",!0),R.column.field=="amount_closing"?(_(),x("span",Es," S/. "+J(R.row.amount_closing),1)):U("",!0),R.column.field=="user"?(_(),x("span",$s,[Ce(J(R.row.user.name)+" ",1),Ms])):U("",!0),R.column.field=="action"?(_(),x("span",Is,[t("div",Ss,[e(A,{placement:"top",arrow:"",theme:"info-500"},{button:o(()=>[t("div",{class:"action-btn",onClick:T(ue=>S.handleVerDocumento(R.row.id),["prevent"])},[e(O,{class:"text-2xl",icon:"heroicons-outline:clipboard-document-check"})],8,Us)]),default:o(()=>[Ts]),_:2},1024)])])):U("",!0)]),"pagination-bottom":o(R=>[t("div",Ds,[e(B,{total:g.advancedTable.length,current:g.current,"per-page":g.perpage,pageRange:g.pageRange,onPageChanged:c[0]||(c[0]=ue=>g.current=ue),pageChanged:R.pageChanged,perPageChanged:R.perPageChanged,enableSearch:"",enableSelect:"",options:g.options},{default:o(()=>[Ce(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options"])])])]),_:1})])])}const Ns=xl(xs,[["render",Ps]]),Hl=Be().headers(),Rs={components:{Pagination:Il,InputGroup:Le,VueTailwindDatePicker:Tl,Tooltip:Sl,Dropdown:Al,FromGroup:s,Icon:El,Card:kl,MenuItem:Ol,Button:j},data(){const c=new Date,w=new Date(c.getTime()+-300*6e4).toISOString().split("T")[0],g=new Date,P=new Date(g.getFullYear(),g.getMonth(),1).toISOString().split("T")[0]+" 00:00:00",A=new Date(g.getFullYear(),g.getMonth()+1,0).toISOString().split("T")[0]+" 23:59:59";return{advancedTable:[],toast:fe(),current:1,perpage:10,dateValue:{startDate:P,endDate:A},dateDefault:w,pageRange:5,searchTerm:"",actions:[{name:"anular",icon:"heroicons-outline:trash",doit:()=>{}}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Tipo de Vaucher",field:"nro_voucher"},{label:"Concepto",field:"concept.description"},{label:"Responsable",field:"client.fullname"},{label:"Monto",field:"amount"},{label:"Metódo de pago",field:"payment_method.description"},{label:"Fecha del movimiento",field:"date_movement"},{label:"Action",field:"action"}]}},methods:{async reloadCrmTable(){try{await this.fetchMoneyRecords(this.dateDefault)}catch(f){console.error("Error al recargar Movimientos :",f)}},handleVerDocumento(f){V.get(`https://thtsystemv2.tech/public/api/v1/list-movements-pdf/${f}`).then(c=>{}).catch(c=>{console.error("Error al obtener la URL del PDF:",c),window.open(c.config.url,"_blank")})},showSuccessToast(f){this.toast.success(f,{position:"top-right",timeout:3e3})},showErrorToast(f){this.toast.error(f,{position:"top-right",timeout:3e3})},showInfoToast(f){this.toast.info(f,{position:"top-right",timeout:5e3})},fetchMoneyRecords(f){V.get("https://thtsystemv2.tech/public/api/v1/moneys-akemy/list-movements/",{...Hl,params:{start_date:this.dateValue.startDate,end_date:this.dateValue.endDate}}).then(c=>{c.data&&c.data.data&&c.data.data.length>0?(this.advancedTable=c.data.data,this.showSuccessToast("¡Registros de dinero obtenidos correctamente!")):(this.advancedTable=[],this.showInfoToast("No se registraron movimientos de dinero para este día o aún no hay registros."))}).catch(c=>{console.error("Error al obtener los registros de dinero:",c),this.showErrorToast("Error al obtener los registros de dinero. Por favor, inténtalo de nuevo.")})},async downloadFile(){try{const c=(await V.get("https://thtsystemv2.tech/public/api/v1/export-money-por-dia-income-and-expense",{params:{date:this.dateDefault},responseType:"blob"})).request.responseURL,I=new URL(c),w=document.createElement("a");w.href=I,w.setAttribute("download","archivo.xlsx"),w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w)}catch(f){console.error("Error al descargar el archivo:",f)}}},mounted(){this.fetchMoneyRecords(this.dateDefault)},watch:{dateDefault(f,c){this.fetchMoneyRecords(f)},dateValue:{handler(f){console.log("El objeto dateValue ha cambiado:",f),V.get("https://thtsystemv2.tech/public/api/v1/moneys-akemy/list-movements/",{...Hl,params:{start_date:f.startDate,end_date:f.endDate}}).then(c=>{c.data&&c.data.data&&c.data.data.length>0?(this.advancedTable=c.data.data,this.showSuccessToast("¡Registros de dinero obtenidos correctamente!")):(this.advancedTable=[],this.showInfoToast("No se registraron movimientos de dinero para este día o aún no hay registros."))}).catch(c=>{console.error("Error al obtener los registros de dinero:",c),this.showErrorToast("Error al obtener los registros de dinero. Por favor, inténtalo de nuevo.")})},deep:!0}},computed:{filteredRows(){if(!this.searchTerm)return this.advancedTable;const f=this.searchTerm.toLowerCase();return this.advancedTable.filter(c=>{var I,w;return c.concept.description.toLowerCase().includes(f)||String(c.amount).toLowerCase().includes(f)||String((I=c.client)==null?void 0:I.fullname).toLowerCase().includes(f)||((w=c.payment_method)==null?void 0:w.description.toLowerCase().includes(f))||c.voucher.description.toLowerCase().includes(f)||c.nro_voucher.toLowerCase().includes(f)||c.date_movement.toLowerCase().includes(f)})}}},js={class:"md:flex pb-6 items-center"},As=t("h6",{class:"flex-1 md:mb-0 mb-3"},"Movimientos de Caja General",-1),Os={class:"md:flex md:space-x-3 items-center flex-none rtl:space-x-reverse"},qs={class:"w-[370px]"},Fs={class:"-mx-6"},Bs={key:0,class:"font-medium"},Ls=t("br",null,null,-1),Gs={class:"font-bold"},zs={key:1,class:"font-medium"},Hs=t("br",null,null,-1),Ys={key:2,class:"font-medium w-[100px]"},Js={key:3,class:"font-medium"},Zs=t("br",null,null,-1),Qs=["innerHTML"],Ws=t("br",null,null,-1),Ks=["innerHTML"],Xs=t("br",null,null,-1),en=["innerHTML"],ln={key:4,class:"font-bold"},tn={key:5,class:"flex items-center"},on={class:"text-xl"},an=["onClick"],sn={class:"text-base"},nn=["onClick"],dn=t("span",null,"Ver Documento",-1),rn={class:"py-4 px-3"};function cn(f,c,I,w,g,S){const P=D("Button"),O=D("VueTailwindDatePicker"),A=D("FromGroup"),B=D("InputGroup"),K=D("Icon"),le=D("MenuItem"),R=D("Dropdown"),ue=D("Tooltip"),z=D("Pagination"),ye=D("vue-good-table"),k=D("Card");return _(),x("div",null,[e(k,{noborder:""},{default:o(()=>[t("div",js,[As,t("div",Os,[e(P,{icon:"heroicons-outline:arrow-path",btnClass:" btn-outline-secondary text-slate-600 dark:border-slate-700 dark:text-slate-300 font-normal btn-sm ",iconClass:"text-lg",onClick:S.reloadCrmTable},null,8,["onClick"]),e(A,{name:"d1"},{default:o(()=>[t("div",qs,[e(O,{modelValue:g.dateValue,"onUpdate:modelValue":c[0]||(c[0]=q=>g.dateValue=q),"input-classes":"form-control "},null,8,["modelValue"])])]),_:1}),e(B,{modelValue:g.searchTerm,"onUpdate:modelValue":c[1]||(c[1]=q=>g.searchTerm=q),placeholder:"Ingrese el N° de voucher, ó N° de venta, ó datos del emisor o receptor",type:"text",prependIcon:"heroicons-outline:search",merged:"",class:"ml-3 w-[513px]"},null,8,["modelValue"]),e(P,{icon:"heroicons-outline:download",btnClass:"bg-green-700 text-white ml-4 text-sm",onClick:T(S.downloadFile,["prevent"]),iconClass:"text-lg"},null,8,["onClick"])])]),t("div",Fs,[e(ye,{columns:g.columns,styleClass:" vgt-table bordered centered ",rows:S.filteredRows,"sort-options":{enabled:!1},"pagination-options":{enabled:!0,perPage:g.perpage},"search-options":{enabled:!0,externalQuery:g.searchTerm}},{"table-row":o(q=>{var E,oe,he;return[q.column.field=="nro_voucher"?(_(),x("span",Bs,[Ce(J((E=q.row.voucher)==null?void 0:E.description)+" ",1),Ls,t("span",Gs,J(q.row.nro_voucher),1)])):U("",!0),q.column.field=="concept"?(_(),x("span",zs,[Ce(J((oe=q.row.concept)==null?void 0:oe.description)+" ",1),Hs])):U("",!0),q.column.field=="amount"?(_(),x("div",Ys,[t("span",null,"S/ "+J(q.row.amount),1)])):U("",!0),q.column.field=="client.fullname"?(_(),x("span",Js,[t("div",null,[q.row.client?(_(),x(ge,{key:0},[Ce(" C- "+J(q.row.client.fullname),1),Zs,t("span",{class:"font-bold",innerHTML:"N° Doc "+q.row.client.document},null,8,Qs)],64)):q.row.employee?(_(),x(ge,{key:1},[Ce(" E- "+J(q.row.employee.fullname),1),Ws,t("span",{class:"font-bold",innerHTML:"N° Doc "+q.row.employee.document},null,8,Ks)],64)):q.row.provider?(_(),x(ge,{key:2},[Ce(" P- "+J(q.row.provider.fullname),1),Xs,t("span",{class:"font-bold",innerHTML:"N° Doc "+q.row.provider.document},null,8,en)],64)):(_(),x(ge,{key:3},[Ce(" No hay información disponible ")],64))])])):U("",!0),q.column.field=="payment_method.description"?(_(),x("span",ln,J((he=q.row.payment_method)==null?void 0:he.description),1)):U("",!0),q.column.field=="action"?(_(),x("span",tn,[e(R,{classMenuItems:"w-[140px]"},{menus:o(()=>[(_(!0),x(ge,null,yl(g.actions,(xe,F)=>(_(),Ee(le,{key:F},{default:o(()=>[t("div",{onClick:xe.doit,class:Vl(`
            ${xe.name==="anular"?"bg-danger-500 text-danger-500 bg-opacity-30 hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white"}
            w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex space-x-2 items-center rtl:space-x-reverse `)},[t("span",sn,[e(K,{icon:xe.icon},null,8,["icon"])]),t("span",null,J(xe.name),1)],10,an)]),_:2},1024))),128))]),default:o(()=>[t("span",on,[e(K,{icon:"heroicons-outline:dots-vertical"})])]),_:1}),e(ue,{placement:"top",arrow:"",theme:"info-500"},{button:o(()=>[t("div",{class:"action-btn",onClick:T(xe=>S.handleVerDocumento(q.row.id),["prevent"])},[e(K,{class:"text-2xl",icon:"heroicons-outline:arrow-down-on-square-stack"})],8,nn)]),default:o(()=>[dn]),_:2},1024)])):U("",!0)]}),"pagination-bottom":o(q=>[t("div",rn,[e(z,{total:this.advancedTable.length,current:g.current,"per-page":g.perpage,pageRange:g.pageRange,onPageChanged:c[2]||(c[2]=E=>g.current=E),pageChanged:q.pageChanged,perPageChanged:q.perPageChanged,enableSearch:"",enableSelect:"",options:g.options},{default:o(()=>[Ce(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])])]),_:1})])}const un=xl(Rs,[["render",cn]]),mn=f=>(st("data-v-07ea49b7"),f=f(),nt(),f),pn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vn={class:"md:col-span-2"},bn={class:"form-group relative"},hn={class:"form-group relative"},fn={class:"md:col-span-2"},gn={class:"form-group relative"},_n={key:2,class:"absolute top-full left-0 text-red-500 mt-4"},yn={class:"form-group relative"},xn={class:"text-red-500 text-4xl text-center"},Vn={class:"text-red-500 text-4xl text-center"},Cn={class:"col-span-2 text-right"},kn={class:"buttons-container"},wn={key:1,class:"spinner-overlay"},En=mn(()=>t("div",{class:"spinner"},null,-1)),$n=[En],Mn={__name:"TranfserModalAdd",props:{id:String},emits:["guardadoExitoso"],setup(f,{emit:c}){const I=_l(),w=fe(),g=Be().headers(),S=c,P=r({description:"",totalAcumlado:""}),O=r(!1),A=f,B=r([]),K=[{value:1,label:"Efectivo"},{value:2,label:"Visa"},{value:3,label:"Cheque"},{value:4,label:"Depósito a cuenta"}],le=r(null),R=r(null),ue=r(!1),z=r(!1),ye=r(!1),k=()=>{O.value||(O.value=!0,V.post("https://thtsystemv2.tech/public/api/v1/transfers-moneyboxes/transfer-caja-principal",{amount:P.value.description,paymentmethod_id:R.value,accountbank_id:le.value},{...g}).then(F=>{q(),w.success(F.data.message),setTimeout(()=>{S("guardadoExitoso",F.data),location.reload(!0)},2500)}).catch(F=>{F.response&&(F.response.status===400||F.response.status===500)?(q(),w.error(F.response.data.message)):console.error("Error al realizar la transferencia:",F)}))},q=()=>{I.closeModalTransfer()};M(R,(F,te)=>{console.log("Valor seleccionado:",F),F==="4"?ue.value=!0:ue.value=!1,["1","2","3"].includes(F)?(ye.value=!0,F!==null&&V.post("https://thtsystemv2.tech/public/api/v1/transfers-moneyboxes/calculate-totals",{moneybox_id:A.id,paymentmethod_id:R.value},{...g}).then(N=>{P.value.totalAcumlado=N.data.total}).catch(N=>{console.error("Error al obtener el total del dinero en caja:",N)})):ye.value=!1}),M(le,(F,te)=>{z.value=F!==null,F!==null&&V.post("https://thtsystemv2.tech/public/api/v1/transfers-moneyboxes/calculate-totals-for-account",{moneybox_id:A.id,accountbank_id:le.value},{...g}).then(N=>{P.value.totalAcumlado=N.data.total}).catch(N=>{console.error("Error al obtener el total del dinero en caja:",N)})});const E=r(""),oe=r(null);M(()=>P.value.description,(F,te)=>{E.value=F});const he=()=>{if(!isNaN(E.value)&&!isNaN(P.value.totalAcumlado)){const te=(parseFloat(P.value.totalAcumlado)-parseFloat(E.value)).toFixed(2);P.value.totalAcumlado=te}};M(()=>E.value,(F,te)=>{clearTimeout(oe.value),oe.value=setTimeout(()=>{he()},500)});const xe=async()=>{try{const F=await V.get("https://thtsystemv2.tech/public/api/v1/accountbanks/list",{...g});console.log(F),B.value=F.data.data.map(te=>({value:te.id,label:te.name}))}catch(F){console.error("Error al obtener los métodos de pago:",F),w.error("Error al obtener los métodos de pago")}};return wl(()=>{xe()}),(F,te)=>(_(),x("div",null,[e(l(_e),{activeModal:l(I).addmodalTrasnfer,onClose:l(I).closeModalTransfer,title:"Transferir a Caja Principal",class:"max-w-xs mx-auto",centered:""},{default:o(()=>[t("form",{onSubmit:T(k,["prevent"]),class:"space-y-4"},[t("div",pn,[t("div",vn,[t("div",bn,[e(l(s),{label:"¿De donde se descontara el dinero?",name:"d2"},{default:o(()=>[e(l(C),{id:"payment-type",options:K,modelValue:R.value,"onUpdate:modelValue":te[0]||(te[0]=N=>R.value=N),class:"pago-select"},null,8,["modelValue"])]),_:1})])]),t("div",null,[t("div",hn,[t("div",fn,[t("div",gn,[ue.value?(_(),Ee(l(s),{key:0,label:"Seleccionar cuenta bancaria",name:"account"},{default:o(()=>[e(l(C),{id:"bank-account",options:B.value,modelValue:le.value,"onUpdate:modelValue":te[1]||(te[1]=N=>le.value=N),class:"account-select"},null,8,["options","modelValue"])]),_:1})):U("",!0)])]),z.value?(_(),Ee(l(s),{key:0,label:"Monto de transferencia",name:"d2",class:"mt-3"},{default:o(()=>[e(l(Le),{type:"text",appendIcon:"heroicons-outline:cash",placeholder:"Ingresar Monto",modelValue:P.value.description,"onUpdate:modelValue":te[2]||(te[2]=N=>P.value.description=N),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})):U("",!0),ye.value?(_(),Ee(l(s),{key:1,label:"Monto de transferencia",name:"d2",class:"mt-3"},{default:o(()=>[e(l(Le),{type:"text",appendIcon:"heroicons-outline:cash",placeholder:"Ingresar Monto",modelValue:P.value.description,"onUpdate:modelValue":te[3]||(te[3]=N=>P.value.description=N),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})):U("",!0),P.value.description?U("",!0):(_(),x("span",_n," El valor monto a transferir es obligatorio "))])]),t("div",null,[t("div",yn,[z.value?(_(),Ee(l(s),{key:0,label:"Total de dinero en la",name:"d3",class:"mt-3 text-center"},{default:o(()=>[t("span",xn,J(P.value.totalAcumlado),1)]),_:1})):U("",!0),ye.value?(_(),Ee(l(s),{key:1,label:"Total de dinero en la",name:"d3",class:"mt-3 text-center"},{default:o(()=>[t("span",Vn,J(P.value.totalAcumlado),1)]),_:1})):U("",!0)])]),t("div",Cn,[t("div",kn,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(q,["prevent"])}),O.value?U("",!0):(_(),Ee(l(j),{key:0,text:"Transferir",btnClass:"btn-dark",disabled:O.value},null,8,["disabled"])),O.value?(_(),x("div",wn,$n)):U("",!0)])])])],32)]),_:1},8,["activeModal","onClose"])]))}},In=xl(Mn,[["__scopeId","data-v-07ea49b7"]]),Sn={class:"row"},Un={class:"col-lg-12"},Tn={class:"row"},Dn={class:"form-group col-lg-6 relative"},Pn={key:0,class:"absolute top-full left-0 text-red-500 mt-4"},Nn={class:"form-group col-lg-12 form__footerBtn mt-12"},Rn={class:"text-right"},jn={__name:"CityTouristicAddModal",emits:["guardadoExitoso"],setup(f,{emit:c}){const I=_l(),w=fe(),g=Be().headers(),S=c,P=r({description:""}),O=()=>{V.post("https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/create",{amount_opening:P.value.description,balance:P.value.description},{...g}).then(B=>{A(),w.success(B.data.message),S("guardadoExitoso",B.data)}).catch(B=>{console.error("Error al guardar los datos:",B)})},A=()=>{I.closeModal()};return(B,K)=>(_(),x("div",null,[e(l(_e),{activeModal:l(I).addmodal,onClose:l(I).closeModal,title:"APERTURA DE CAJA",sizeClass:"max-w-2xl",centered:""},{default:o(()=>[t("form",{onSubmit:T(O,["prevent"]),class:"space-y-4"},[t("div",Sn,[t("div",Un,[t("div",Tn,[t("div",Dn,[e(l(s),{label:"Monto Inicial",name:"d2"},{default:o(()=>[e(l(Le),{type:"text",appendIcon:"heroicons-outline:cash",placeholder:"Ingresar Monto",name:"object_description",modelValue:P.value.description,"onUpdate:modelValue":K[0]||(K[0]=le=>P.value.description=le),modelModifiers:{trim:!0}},null,8,["modelValue"]),P.value.description?U("",!0):(_(),x("span",Pn," Este valor es obligatorio "))]),_:1})])])]),t("div",Nn,[t("div",Rn,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(A,["prevent"])}),e(l(j),{text:"Guardar",btnClass:"btn-dark"})])])])],32)]),_:1},8,["activeModal","onClose"])]))}};Be().headers();const An={components:{Button:j,Modal:_e,Textinput:$,InputGroup:Le,FromGroup:s,Alert:rt},props:{activeModal:Boolean,id:String,monto:String},data(){return{object:{description:""}}},methods:{closeEditModal(){this.$emit("close")},async openBox(){try{localStorage.removeItem("idValue");const f=await V.post(`https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/update-closed/${this.id}`,{amount_closing:this.monto,balance:this.monto},{...Be().headers()});window.location.reload()}catch(f){console.error("Error al actualizar la MoneyBox:",f)}},cancel(){_l().closeModal()}},watch:{id(f,c){}}},On={class:"space-y-4"},qn={class:"row"},Fn={class:"col-lg-12"},Bn={class:"row"},Ln={class:"form-group col-lg-6 relative"},Gn={class:"text-3xl font-bold"},zn={class:"form-group col-lg-12 form__footerBtn mt-8"},Hn={class:"text-right"},Yn=t("span",null,"Confirmar Cierre",-1),Jn=[Yn],Zn=t("span",null,"Cancelar",-1),Qn=[Zn];function Wn(f,c,I,w,g,S){const P=D("Alert"),O=D("Modal");return _(),x("div",null,[e(O,{activeModal:I.activeModal,onClose:S.closeEditModal,title:"CIERE DE CAJA",sizeClass:"max-w-2xl",centered:""},{default:o(()=>[t("form",On,[t("div",qn,[t("div",Fn,[t("div",Bn,[t("div",Ln,[e(P,{type:"warning"},{default:o(()=>[t("div",Gn," ¿Estás seguro(a)? Está por cerrar la caja con S/ "+J(I.monto)+", antes le recomendamos realizar su arqueo !! ",1)]),_:1})])])]),t("div",zn,[t("div",Hn,[t("button",{class:"invocie-btn mr-3 inline-flex btn whitespace-nowrap space-x-1 cursor-pointer bg-red-700 dark:bg-red-700 btn-md h-min text-sm font-normal text-white rtl:space-x-reverse",onClick:c[0]||(c[0]=T(A=>S.openBox(),["prevent"]))},Jn),t("button",{onClick:c[1]||(c[1]=T(A=>S.closeEditModal(),["prevent"])),class:"invocie-btn mr-3 inline-flex btn whitespace-nowrap space-x-1 cursor-pointer bg-green-900 dark:bg-green-700 btn-md h-min text-sm font-normal text-white rtl:space-x-reverse"},Qn)])])])])]),_:1},8,["activeModal","onClose"])])}const Kn=xl(An,[["render",Wn]]),Xn={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},ed={key:0,class:"text-red-500"},ld={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},td={key:0,class:"text-red-500"},od={class:"grid lg:grid-cols-1 gap-4 grid-cols-1"},ad={key:0,class:"flex items-center"},sd={key:1,class:"flex items-center"},nd={key:2,class:"flex items-center"},dd={name:"client_form",id:"client_form",autocomplete:"off",class:"mx-auto space-y-4"},rd={class:"grid grid-cols-3 lg:grid-cols-3 gap-4"},id={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},cd={class:"lg:col-span-3"},ud=t("div",{class:"lg:hidden"},null,-1),md={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},pd={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},vd={class:"lg:col-span-3"},bd=t("div",{class:"lg:hidden"},null,-1),hd={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},fd={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},gd={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},_d=t("div",{class:"lg:col-span-1"},null,-1),yd={class:"lg:col-span-3 flex justify-end"},xd={name:"providerForm",id:"providerForm",autocomplete:"off",class:"space-y-4"},Vd={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Cd={class:"md:col-span-1 lg:col-span-2"},kd={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},wd={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ed={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},$d=t("div",{class:"lg:col-span-3"},null,-1),Md={class:"lg:col-span-1 flex justify-end"},Id={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},Sd={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ud={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Td={class:"flex items-center"},Dd={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Pd={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Nd=t("div",{class:"lg:col-span-3"},null,-1),Rd={class:"lg:col-span-1 flex justify-end"},jd={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},Ad={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Od=t("div",{class:"lg:col-span-3"},null,-1),qd={class:"lg:col-span-1 flex justify-end"},Fd={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Bd=t("label",{for:"payment-type",class:"block text-sm font-medium text-gray-700 flex items-center"},[Ce(" Método de pago "),t("span",{class:"text-red-500 ml-1"},"*")],-1),Ld={class:"flex items-center"},Gd={key:0,class:"text-red-500"},zd={class:"form-group col-lg-12 form__footerBtn mt-4"},Hd={class:"text-right"},Yd={__name:"ClientAddModal",setup(f){const c=Be().headers();let I=_l();const w=fe(),g=r(!1),S=r(!1),P=r(!1),O=r(!1),A=r([]),B=r([]),K=r([]),le=()=>{I.closeModal2()},R=r({receptor_module:"",receptor_fullname:"",receptor_document:"",is_paycredit:"",available_edit:"",user_id:"",branchoffice_id:"",concept_id:"",paymentmethod_id:"",currency_id:"",voucher_id:"",client_id:"",provider_id:"",employee_id:"",accountbank_id:"",date_movement:"",amount:"",text_amount:"",gloss:"",reference_operation:"",nro_voucher:"",serie:"",correlative:"",billing_external_id:"",billing_hash:"",motive_cancelled:"",billing_cancelled:"",date_repayment:"",repaymentmovement_id:"",dischargedocument_id:"",is_voucher_external:"",voucher_external:"",nro_voucher_external:"",booking_id:"",commision_id:"",observation:"",is_visible:""}),ue=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/ubigeo/departments",c);A.value=y.data.data.map(u=>({value:u.id,label:u.name}))}catch(y){console.error("Error fetching departments:",y)}},z=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/clients/list",c);$e.value=y.data.data.map(u=>({value:u.id,label:u.fullname}))}catch(y){console.error("Error fetching departments:",y)}},ye=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/moneys/income-concepts",c);Ie.value=y.data.data.map(u=>({value:u.id,label:u.description}))}catch(y){console.error("Error fetching departments:",y)}},k=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/banks/list",c);ne.value=y.data.data.map(u=>({value:u.id,label:u.description}))}catch(y){console.error("Error fetching departments:",y)}},q=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/accountbanks/list",c);Je.value=y.data.data.map(u=>({value:u.id,label:u.name}))}catch(y){console.error("Error fetching departments:",y)}},E=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/providers/list",c);xe.value=y.data.data.map(u=>({value:u.id,label:u.fullname}))}catch(y){console.error("Error fetching departments:",y)}},oe=async()=>{try{const y=await V.get("https://thtsystemv2.tech/public/api/v1/employees/list",c);F.value=y.data.data.map(u=>({value:u.id,label:u.fullname}))}catch(y){console.error("Error fetching departments:",y)}},he=[{value:501,label:"SOL"},{value:502,label:"DÓLAR"},{value:503,label:"EURO"}],xe=r([]),F=r([]),te=r({description:""}),N=r({branchoffice_id:"",bank_id:"",typeaccount_id:"",currency_id:"",name:"",number_account:"",cci_account:"",balance:"",headline:"",description:""}),$e=r([]),ce=[{value:2,label:"Caja General"}],Ze=[{value:500,label:"Oficina Principal"}],cl=[{value:504,label:"CUENTA SIMPLE"},{value:505,label:"CUENTA CORRIENTE"},{value:506,label:"TARJETA DE CRÉDITO"}],Ge=r(null),me=r(null),Ne=r(null),Se=r(null),Ue=r(null),Re=r(null),ke=r(he[0].value),Te=r(cl[0].value),Me=r(Ze[0].value),de=r(ce[0].value),ze=()=>{},el=()=>{g.value=!g.value},ll=()=>{g.value=!1},rl=()=>{S.value=!1},He=()=>{P.value=!1},Ye=()=>{O.value=!1},Qe=()=>{S.value=!S.value},tl=()=>{P.value=!P.value},ul=Yl(()=>$e.value.slice(0,6)),Oe=()=>{const y=document.querySelector(".cajonci-select select");if(y){const m=y.selectedIndex,i=y.options[m].text;R.value.branchoffice_id=m,R.value.branchbox=i}const u=document.querySelector(".pago-select select");if(y){const m=u.selectedIndex,i=u.options[m].text;R.value.paymentmethod_id=m,R.value.paymethod=i}const Y=Ge.value;R.value.client_id=Y;const a=me.value;R.value.provider_id=a;const d=Ne.value;R.value.employee_id=d;const G=Se.value;R.value.concept_id=G;const b=Ue.value;R.value.accountbank_id=b,console.log(R.value),V.post("https://thtsystemv2.tech/public/api/v1/moneys-akemy/create",R.value,{...c}).then(m=>{le(),w.success(m.data.message)}).catch(m=>{if(console.error("Error al guardar los datos:",m),m.response&&m.response.data&&m.response.data.message){le();const i=m.response.data.message;w.error(i)}else w.error("Ha ocurrido un error al guardar los datos. Por favor, inténtalo de nuevo.")})};r(null);const ml=()=>{O.value=!O.value},ae=r({typedocument_id:"",document:"",department_id:"",province_id:"",district_id:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:""}),We=r("cash"),ne=r([]),ol=y=>!!R.value[y],fl=y=>ol(y),Je=r([]),pl=[{value:1,label:"Natural"},{value:2,label:"Jurídico"}],re=[{value:1,label:"DNI"},{value:2,label:"RUC"},{value:3,label:"PASAPORTE"}],al=[{id:1,label:"Soltero"},{id:2,label:"Casado"},{id:2,label:"Viudo"},{id:2,label:"Divorciado"}],vl=[{id:1,label:"Masculino"},{id:2,label:"Femenino"}],ee=r({typedocument_id:"",department_id:"",province_id:"",district_id:"",type_client:"",fullname:"",document:"",tradename:"",address:"",email:"",telephone:"",cellphone:"",date_birthday:"",sex:"",status:"",typeDocument:""}),gl=r(pl[0].value),Q=r(re[0].value);let De=r(null),W=r(null),pe=r(null),we=r(null),L=r(null),sl="";const qe=[{value:"clients",label:"Clientes"},{value:"providers",label:"Proveedores"},{value:"employees",label:"Empleados"}],Ve=r(qe[0].value),Ie=r([]),be=[{value:"cash",label:"Efectivo"},{value:"visa",label:"Visa"},{value:"check",label:"Cheque"},{value:"account_deposit",label:"Depósito a cuenta"}],Ke=async()=>{try{const y=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/provinces/${ee.value.department_id}`,c);K.value=y.data.data.map(u=>({value:u.id,label:u.name}))}catch(y){console.error("Error fetching provinces:",y)}},nl=async()=>{try{const y=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/districts/${ee.value.province_id}`,c);B.value=y.data.data.map(u=>({value:u.id,label:u.name}))}catch(y){console.error("Error fetching provinces:",y)}},X=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getRucData",{ruc:ae.value.document}).then(y=>{ae.value.fullname=y.data.data.nombre_o_razon_social,ae.value.address=y.data.data.direccion}).catch(y=>{console.error("Error al obtener datos del RUC:",y)})},bl=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getDniData",{dni:ee.value.document}).then(y=>{ee.value.fullname=y.data.data.nombre_completo}).catch(y=>{console.error("Error al obtener datos del DNI:",y)})},Pe=()=>{V.post("https://thtsystemv2.tech/public/api/v1/banks/create",te.value,{...c}).then(y=>{Ye(),k(),w.success(y.data.message)}).catch(y=>{console.error("Error al guardar los datos:",y)})},je=()=>{V.post("https://thtsystemv2.tech/public/api/v1/providers/create",ae.value,{...c}).then(y=>{rl(),E(),w.success(y.data.message)}).catch(y=>{console.error("Error al guardar los datos:",y)})},Fe=()=>{const y=document.querySelector(".typecliente-select select");if(y){const Y=y.selectedIndex,a=Y.toString();y.options[Y].text,ee.value.type_client=a}const u=document.querySelector(".typedocument-select select");if(y){const Y=u.selectedIndex,a=u.options[Y].text;ee.value.typedocument_id=Y,ee.value.typeDocument=a}V.post("https://thtsystemv2.tech/public/api/v1/clients/create",ee.value,{...c}).then(Y=>{ll(),z(),w.success(Y.data.message)}).catch(Y=>{console.error("Error al guardar los datos:",Y)})},Ae=()=>{const y=document.querySelector(".oficinaprincipal-select select");if(y){const d=y.selectedIndex;y.options[d].text,N.value.branchoffice_id=d}const u=document.querySelector(".typeaccount-select select");if(y){const d=u.selectedIndex;u.options[d].text,N.value.typeaccount_id=d}const Y=document.querySelector(".banck-select select");if(y){const d=Y.selectedIndex;Y.options[d].text,N.value.bank_id=d}const a=document.querySelector(".money-select select");if(y){const d=a.selectedIndex;a.options[d].text,N.value.currency_id=d}V.post("https://thtsystemv2.tech/public/api/v1/accountbanks/create",N.value,{...c}).then(d=>{He(),q(),w.success(d.data.message)}).catch(d=>{console.error("Error al guardar los datos:",d)})};M(()=>Ge.value,(y,u)=>{}),M(()=>de.value,(y,u)=>{}),M(()=>Se.value,(y,u)=>{}),M(()=>ke.value,(y,u)=>{}),M(()=>me.value,(y,u)=>{}),M(()=>We.value,(y,u)=>{}),M(()=>Ue.value,(y,u)=>{}),M(()=>Te.value,(y,u)=>{}),M(()=>Re.value,(y,u)=>{}),M(()=>Ne.value,(y,u)=>{}),M(()=>Me.value,(y,u)=>{}),M(Ve,(y,u)=>{const Y=document.querySelector(".emisor-select select");if(Y){const a=Y.selectedIndex;Y.options[a].text}}),M(()=>pe.value,(y,u)=>{if(document.querySelector(".district-select select")){const a=y.toString().padStart(6,"0");ee.value.district_id=a,ae.value.district_id=a}}),M(()=>W.value,(y,u)=>{if(document.querySelector(".province-select select")){const a=y.toString().padStart(4,"0");ee.value.province_id=a,ae.value.province_id=a}}),M(()=>De.value,(y,u)=>{if(document.querySelector(".department-select select")){const a=y.toString().padStart(2,"0");ee.value.department_id=a,ae.value.department_id=a}});const Xe=r("N° DNI"),dl=r("RENIEC");return M(()=>Q.value,y=>{const u=document.querySelector(".typedocument-select select");if(u){const Y=u.selectedIndex,a=u.options[Y],d=u.options[Y].text;ee.value.typedocument_id=Y,ee.value.typeDocument=d,Xe.value=`N° ${a.textContent}`,dl.value=y==="1"?"RENIEC":y==="2"?"SUNAT":"Validar"}}),M(()=>L.value,(y,u)=>{const Y=document.querySelector(".sexo-select select");if(Y){const a=Y.selectedIndex,d=Y.options[a].text;ee.value.sex=d}}),M(()=>we.value,(y,u)=>{const Y=document.querySelector(".state-select select");if(Y){const a=Y.selectedIndex,d=Y.options[a].text;ee.value.status=d}}),wl(async()=>{try{await ye(),await q(),await E(),await k(),await z(),await oe(),await ue()}catch(y){console.error("Error al realizar llamadas a la API:",y)}}),(y,u)=>{const Y=D("flat-pickr");return _(),x("div",null,[e(l(_e),{activeModal:l(I).addmodal2,onClose:l(I).closeModal2,title:"Registrar Nuevo Ingreso Caja - Sra Akemy",centered:""},{default:o(()=>[t("form",{onSubmit:T(ze,["prevent"]),class:"space-y-4"},[t("div",Xn,[e(l(s),{name:"d1",error:l(sl)},{default:o(()=>[e(l(C),{label:"Caja aperturada",options:ce,modelValue:de.value,"onUpdate:modelValue":u[0]||(u[0]=a=>de.value=a),disabled:"",class:"cajonci-select"},null,8,["modelValue"])]),_:1},8,["error"]),e(l(s),{label:"Descripción ingreso",name:"d2"},{default:o(()=>[e(l($),{type:"text",placeholder:"Descripción ingreso",modelValue:R.value.gloss,"onUpdate:modelValue":u[1]||(u[1]=a=>R.value.gloss=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),fl("gloss")?U("",!0):(_(),x("span",ed,"Por favor ingrese descripción"))]),_:1})]),t("div",ld,[e(l(s),{name:"d3"},{default:o(()=>[e(l(C),{label:"Emisor (opcional)",options:qe,modelValue:Ve.value,"onUpdate:modelValue":u[2]||(u[2]=a=>Ve.value=a),class:"emisor-select"},null,8,["modelValue"])]),_:1}),e(l(s),{name:"d4"},{default:o(()=>[e(l(C),{label:"Concepto ingreso",options:Ie.value,modelValue:Se.value,"onUpdate:modelValue":u[3]||(u[3]=a=>Se.value=a),class:"concept-select",placeholder:"Seleccione ingreso"},null,8,["options","modelValue"]),Se.value?U("",!0):(_(),x("span",td,"Por favor selecciona un concepto"))]),_:1})]),t("div",od,[Ve.value==="clients"?(_(),x("div",ad,[e(l(s),{label:"Clientes",class:"flex-1"},{default:o(()=>[e(l(C),{options:ul.value,modelValue:Ge.value,"onUpdate:modelValue":u[4]||(u[4]=a=>Ge.value=a),class:"client-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:el,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):Ve.value==="providers"?(_(),x("div",sd,[e(l(s),{label:"Proveedores",class:"flex-1"},{default:o(()=>[e(l(C),{options:xe.value,modelValue:me.value,"onUpdate:modelValue":u[5]||(u[5]=a=>me.value=a),class:"provider-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:Qe,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):Ve.value==="employees"?(_(),x("div",nd,[e(l(s),{label:"Empleados",class:"flex-1"},{default:o(()=>[e(l(C),{options:F.value,modelValue:Ne.value,"onUpdate:modelValue":u[6]||(u[6]=a=>Ne.value=a),class:"employee-select"},null,8,["options","modelValue"])]),_:1})])):U("",!0)]),e(l(s),{label:"Fecha del movimiento",name:"d1"},{default:o(()=>[e(Y,{modelValue:R.value.date_movement,"onUpdate:modelValue":u[7]||(u[7]=a=>R.value.date_movement=a),class:"form-control",id:"d1",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1}),e(l(_e),{title:"Registrar nuevo Cliente",label:"Modal title",activeModal:g.value,onClose:u[22]||(u[22]=a=>g.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",dd,[t("div",rd,[t("div",null,[e(l(s),{label:"Tipo de cliente"},{default:o(()=>[e(l(C),{options:pl,modelValue:gl.value,"onUpdate:modelValue":u[8]||(u[8]=a=>gl.value=a),class:"typecliente-select",placeholder:"Selccione Cliente"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo documento"},{default:o(()=>[e(l(C),{options:re,modelValue:Q.value,"onUpdate:modelValue":u[9]||(u[9]=a=>Q.value=a),class:"typedocument-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° Documento"},{default:o(()=>[e(l(Le),{type:"text",placeholder:Xe.value,modelValue:ee.value.document,"onUpdate:modelValue":u[10]||(u[10]=a=>ee.value.document=a)},{append:o(()=>[e(l(j),{text:dl.value,btnClass:"btn-outline-dark",onClick:T(bl,["prevent"])},null,8,["text"])]),_:1},8,["placeholder","modelValue"])]),_:1})])]),t("div",id,[t("div",cd,[e(l(s),{label:"Nombre ó Razón Social"},{default:o(()=>[e(l($),{type:"text",id:"client_fullname",modelValue:ee.value.fullname,"onUpdate:modelValue":u[11]||(u[11]=a=>ee.value.fullname=a),modelModifiers:{trim:!0},placeholder:"Ingrese Nombre ó Razón Social "},null,8,["modelValue"])]),_:1})]),ud]),t("div",md,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:A.value,label:"Departamento",modelValue:l(De),"onUpdate:modelValue":u[12]||(u[12]=a=>se(De)?De.value=a:De=a),class:"department-select",onChange:Ke,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:K.value,label:"Provincias",modelValue:l(W),"onUpdate:modelValue":u[13]||(u[13]=a=>se(W)?W.value=a:W=a),class:"province-select",onChange:nl,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:B.value,label:"Distritos",modelValue:l(pe),"onUpdate:modelValue":u[14]||(u[14]=a=>se(pe)?pe.value=a:pe=a),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",pd,[t("div",vd,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{type:"text",modelValue:ee.value.address,"onUpdate:modelValue":u[15]||(u[15]=a=>ee.value.address=a),modelModifiers:{trim:!0},placeholder:"Ingrese Direción"},null,8,["modelValue"])]),_:1})]),bd]),t("div",hd,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{type:"text",modelValue:ee.value.cellphone,"onUpdate:modelValue":u[16]||(u[16]=a=>ee.value.cellphone=a),modelModifiers:{trim:!0},placeholder:"Ingrese N° de celular"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono fijo"},{default:o(()=>[e(l($),{type:"text",modelValue:ee.value.telephone,"onUpdate:modelValue":u[17]||(u[17]=a=>ee.value.telephone=a),modelModifiers:{trim:!0},placeholder:"Ingrese N° de telefono fijo"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{type:"email",modelValue:ee.value.email,"onUpdate:modelValue":u[18]||(u[18]=a=>ee.value.email=a),modelModifiers:{trim:!0},placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1})])]),t("div",fd,[t("div",null,[e(l(s),{label:"Fecha de nacimiento"},{default:o(()=>[e(Y,{modelValue:ee.value.date_birthday,"onUpdate:modelValue":u[19]||(u[19]=a=>ee.value.date_birthday=a),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:al,label:"Estado",modelValue:l(we),"onUpdate:modelValue":u[20]||(u[20]=a=>se(we)?we.value=a:we=a),class:"state-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:vl,label:"Sexo",modelValue:l(L),"onUpdate:modelValue":u[21]||(u[21]=a=>se(L)?L.value=a:L=a),class:"sexo-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})])]),t("div",gd,[_d,t("div",yd,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(ll,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Fe,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar nuevo Proveedor",label:"Modal title",activeModal:S.value,onClose:u[33]||(u[33]=a=>S.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",xd,[t("div",Vd,[t("div",null,[e(l(s),{label:"N° RUC"},{default:o(()=>[e(l(Le),{type:"text",placeholder:"RUC",modelValue:ae.value.document,"onUpdate:modelValue":u[23]||(u[23]=a=>ae.value.document=a),modelModifiers:{trim:!0}},{append:o(()=>[e(l(j),{text:"SUNAT",btnClass:"btn-outline-dark ",onClick:T(X,["prevent"])})]),_:1},8,["modelValue"])]),_:1})]),t("div",Cd,[e(l(s),{label:"Razón social del proveedor"},{default:o(()=>[e(l($),{modelValue:ae.value.fullname,"onUpdate:modelValue":u[24]||(u[24]=a=>ae.value.fullname=a),modelModifiers:{trim:!0},placeholder:"Razón social del proveedor",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre comercial"},{default:o(()=>[e(l($),{modelValue:ae.value.tradename,"onUpdate:modelValue":u[25]||(u[25]=a=>ae.value.tradename=a),modelModifiers:{trim:!0},placeholder:"Nombre comercial",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",kd,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:A.value,label:"Departamento",modelValue:l(De),"onUpdate:modelValue":u[26]||(u[26]=a=>se(De)?De.value=a:De=a),class:"department-select",onChange:Ke,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:K.value,label:"Provincias",modelValue:l(W),"onUpdate:modelValue":u[27]||(u[27]=a=>se(W)?W.value=a:W=a),class:"province-select",onChange:nl,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:B.value,label:"Distritos",modelValue:l(pe),"onUpdate:modelValue":u[28]||(u[28]=a=>se(pe)?pe.value=a:pe=a),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{modelValue:ae.value.address,"onUpdate:modelValue":u[29]||(u[29]=a=>ae.value.address=a),modelModifiers:{trim:!0},placeholder:"Dirección",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",wd,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{modelValue:ae.value.cellphone,"onUpdate:modelValue":u[30]||(u[30]=a=>ae.value.cellphone=a),modelModifiers:{trim:!0},placeholder:"Celular","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono"},{default:o(()=>[e(l($),{modelValue:ae.value.telephone,"onUpdate:modelValue":u[31]||(u[31]=a=>ae.value.telephone=a),modelModifiers:{trim:!0},placeholder:"Teléfono","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{modelValue:ae.value.email,"onUpdate:modelValue":u[32]||(u[32]=a=>ae.value.email=a),modelModifiers:{trim:!0},placeholder:"Correo electrónico",type:"email",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",Ed,[$d,t("div",Md,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(rl,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(je,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar cuenta bancaria",label:"Modal title",activeModal:P.value,onClose:u[45]||(u[45]=a=>P.value=!1)},{default:o(()=>[t("form",Id,[t("div",Sd,[t("div",null,[e(l(s),{label:"Sucursal",class:"block"},{default:o(()=>[e(l(C),{modelValue:Me.value,"onUpdate:modelValue":u[34]||(u[34]=a=>Me.value=a),options:Ze,required:"",class:"oficinaprincipal-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo de cuenta",class:"block"},{default:o(()=>[e(l(C),{modelValue:Te.value,"onUpdate:modelValue":u[35]||(u[35]=a=>Te.value=a),options:cl,required:"",class:"typeaccount-select"},null,8,["modelValue"])]),_:1})])]),t("div",Ud,[t("div",Td,[e(l(s),{label:"Banco",class:"flex-1"},{default:o(()=>[e(l(C),{options:ne.value,modelValue:Re.value,"onUpdate:modelValue":u[36]||(u[36]=a=>Re.value=a),class:"banck-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:T(ml,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),t("div",null,[e(l(s),{label:"Moneda",class:"block"},{default:o(()=>[e(l(C),{modelValue:ke.value,"onUpdate:modelValue":u[37]||(u[37]=a=>ke.value=a),options:he,required:"",class:"money-select"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:N.value.name,"onUpdate:modelValue":u[38]||(u[38]=a=>N.value.name=a),modelModifiers:{trim:!0},placeholder:"Nombre cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",Dd,[t("div",null,[e(l(s),{label:"N° de cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:N.value.number_account,"onUpdate:modelValue":u[39]||(u[39]=a=>N.value.number_account=a),modelModifiers:{trim:!0},placeholder:"N° de cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° CCI (Código interbancario)",class:"block"},{default:o(()=>[e(l($),{modelValue:N.value.cci_account,"onUpdate:modelValue":u[40]||(u[40]=a=>N.value.cci_account=a),modelModifiers:{trim:!0},placeholder:"N° CCI",required:""},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Titular cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:N.value.headline,"onUpdate:modelValue":u[41]||(u[41]=a=>N.value.headline=a),modelModifiers:{trim:!0},placeholder:"Titular cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Descripción",class:"block"},{default:o(()=>[e(l(Ul),{modelValue:N.value.description,"onUpdate:modelValue":u[42]||(u[42]=a=>N.value.description=a),modelModifiers:{trim:!0},placeholder:"Descripción"},null,8,["modelValue"])]),_:1})]),t("div",Pd,[Nd,t("div",Rd,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(He,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Ae,["prevent"])})])])]),e(l(_e),{title:"Registrar banco",label:"Modal title",activeModal:O.value,onClose:u[44]||(u[44]=a=>O.value=!1)},{default:o(()=>[t("form",jd,[e(l($),{label:"Nombre",name:"pn",type:"text",placeholder:"Ingresar nombre ",modelValue:te.value.description,"onUpdate:modelValue":u[43]||(u[43]=a=>te.value.description=a)},null,8,["modelValue"]),t("div",Ad,[Od,t("div",qd,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(Ye,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Pe,["prevent"])})])])])]),_:1},8,["activeModal"])]),_:1},8,["activeModal"]),t("div",Fd,[e(l(s),{name:"d5",class:"mt-1"},{default:o(()=>[Bd,e(l(C),{id:"payment-type",options:be,modelValue:We.value,"onUpdate:modelValue":u[46]||(u[46]=a=>We.value=a),class:"pago-select mt-2"},null,8,["modelValue"])]),_:1}),We.value==="account_deposit"?(_(),x(ge,{key:0},[t("div",Ld,[e(l(s),{label:"Cuenta destino",class:"flex-1"},{default:o(()=>[e(l(C),{options:Je.value,modelValue:Ue.value,"onUpdate:modelValue":u[47]||(u[47]=a=>Ue.value=a),class:"cuentadestino-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:tl,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),e(l(s),{label:"N° de Operación"},{default:o(()=>[e(l($),{type:"text",modelValue:R.value.reference_operation,"onUpdate:modelValue":u[48]||(u[48]=a=>R.value.reference_operation=a),modelModifiers:{trim:!0},placeholder:"Ingrese N° de Operación"},null,8,["modelValue"])]),_:1})],64)):U("",!0),e(l(s),{label:"Monto",name:"d6"},{default:o(()=>[e(l($),{type:"text",placeholder:"Monto",modelValue:R.value.amount,"onUpdate:modelValue":u[49]||(u[49]=a=>R.value.amount=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),fl("amount")?U("",!0):(_(),x("span",Gd,"Por favor ingrese monto"))]),_:1})]),t("div",zd,[t("div",Hd,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:le}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:Oe})])])],32)]),_:1},8,["activeModal","onClose"])])}}},Jd={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Zd={key:0,class:"text-red-500"},Qd={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},Wd={key:0,class:"text-red-500"},Kd={class:"grid lg:grid-cols-1 gap-4 grid-cols-1"},Xd={key:1,class:"flex items-center"},er={key:2,class:"grid grid-cols-2 gap-4"},lr={key:4,class:"flex items-center"},tr={key:5,class:"flex items-center"},or={key:6,class:"flex items-center"},ar={key:7,class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},sr={name:"client_form",id:"client_form",autocomplete:"off",class:"mx-auto space-y-4"},nr={class:"grid grid-cols-3 lg:grid-cols-3 gap-4"},dr={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},rr={class:"lg:col-span-3"},ir=t("div",{class:"lg:hidden"},null,-1),cr={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ur={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},mr={class:"lg:col-span-3"},pr=t("div",{class:"lg:hidden"},null,-1),vr={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},br={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},hr={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},fr=t("div",{class:"lg:col-span-1"},null,-1),gr={class:"lg:col-span-3 flex justify-end"},_r={name:"providerForm",id:"providerForm",autocomplete:"off",class:"space-y-4"},yr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},xr={class:"md:col-span-1 lg:col-span-2"},Vr={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Cr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},kr={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},wr=t("div",{class:"lg:col-span-3"},null,-1),Er={class:"lg:col-span-1 flex justify-end"},$r={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},Mr={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ir={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Sr={class:"flex items-center"},Ur={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Tr={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},Dr=t("div",{class:"lg:col-span-3"},null,-1),Pr={class:"lg:col-span-1 flex justify-end"},Nr={name:"banks_form",id:"banks_form",autocomplete:"off",class:"space-y-4"},Rr={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mt-4"},jr=t("div",{class:"lg:col-span-3"},null,-1),Ar={class:"lg:col-span-1 flex justify-end"},Or={class:"grid lg:grid-cols-2 gap-4 grid-cols-1"},qr=t("label",{for:"payment-type",class:"block text-sm font-medium text-gray-700 flex items-center"},[Ce(" Método de pago "),t("span",{class:"text-red-500 ml-1"},"*")],-1),Fr={class:"flex items-center"},Br={class:"text-red-500 text-4xl font-bold text-center"},Lr={key:0,class:"text-red-500"},Gr={class:"form-group col-lg-12 form__footerBtn mt-4"},zr={class:"text-right"},Hr={__name:"ClientAddModal-Egreso-A",props:{id:Number},setup(f){const c=Be().headers();let I=_l();const w=fe(),g=r(!1),S=f,P=r(!1),O=r(!1),A=r(!1),B=r(!1),K=r(""),le=r(!1),R=r([]),ue=r([]),z=r([]);r(null);const ye=()=>{I.closeModal3()},k=r({receptor_module:"",receptor_fullname:"",receptor_document:"",is_paycredit:"",available_edit:"",user_id:"",branchoffice_id:"",moneybox_id:"",concept_id:"",paymentmethod_id:"",currency_id:"",voucher_id:"",client_id:"",provider_id:"",employee_id:"",accountbank_id:"",date_movement:"",amount:"",text_amount:"",gloss:"",reference_operation:"",nro_voucher:"",serie:"",date_commision:"",correlative:"",billing_external_id:"",billing_hash:"",motive_cancelled:"",collaborator_id:"",total_hotel:"",total_tour:"",billing_cancelled:"",date_repayment:"",repaymentmovement_id:"",dischargedocument_id:"",is_voucher_external:"",voucher_external:"",nro_voucher_external:"",booking_id:"",commision_id:"",observation:"",is_visible:""}),q=r([]),E=r(null),oe=r(""),he=r([]),xe=async h=>{try{const n=await V.get("https://thtsystemv2.tech/public/api/v1/collaborators/list",c);he.value=n.data.data.map(p=>({value:p.id,label:p.fullname})),fe().success("Coolaboradores listados correctamente",{timeout:1500})}catch{}},F=async h=>{try{if(h){const n=String(h),H={};n.startsWith("R")?H.code=n:n.length===6&&!isNaN(n)?H.reference_voucher=n:H.client_fullname=n;const p=await V.get("https://thtsystemv2.tech/public/api/v1/bookings/filter",{params:H,...c});q.value=p.data.bookings.map(ve=>({value:ve.id,label:ve.details}))}}catch(n){console.error("Error fetching bookings:",n)}};M(oe,h=>{F(h)});const te=h=>{oe.value=h},N=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/ubigeo/departments",c);R.value=h.data.data.map(n=>({value:n.id,label:n.name}))}catch(h){console.error("Error fetching departments:",h)}},$e=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/clients/list",c);ze.value=h.data.data.map(n=>({value:n.id,label:n.fullname}))}catch(h){console.error("Error fetching departments:",h)}},ce=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/moneys/expense-concepts",c);b.value=h.data.data.map(n=>({value:n.id,label:n.description}))}catch(h){console.error("Error fetching departments:",h)}},Ze=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/banks/list",c);L.value=h.data.data.map(n=>({value:n.id,label:n.description}))}catch(h){console.error("Error fetching departments:",h)}},cl=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/typevouchers/list",c);Te.value=h.data.data.map(n=>({value:n.id,label:n.description}))}catch(h){console.error("Error fetching departments:",h)}},Ge=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/accountbanks/list",c);Ve.value=h.data.data.map(n=>({value:n.id,label:n.name}))}catch(h){console.error("Error fetching departments:",h)}},me=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/providers/list",c);Re.value=h.data.data.map(n=>({value:n.id,label:n.fullname}))}catch(h){console.error("Error fetching departments:",h)}},Ne=h=>{h&&console.log("ID del booking seleccionado:",h.value)},Se=async()=>{try{const h=await V.get("https://thtsystemv2.tech/public/api/v1/employees/list",c);ke.value=h.data.data.map(n=>({value:n.id,label:n.fullname}))}catch(h){console.error("Error fetching departments:",h)}},Ue=[{value:501,label:"SOL"},{value:502,label:"DÓLAR"},{value:503,label:"EURO"}],Re=r([]),ke=r([]),Te=r([]),Me=r({description:""}),de=r({branchoffice_id:"",bank_id:"",typeaccount_id:"",currency_id:"",name:"",number_account:"",cci_account:"",balance:"",headline:"",description:""}),ze=r([]),el=[{value:2,label:"Caja General"}],ll=[{value:500,label:"Oficina Principal"}],rl=[{value:504,label:"CUENTA SIMPLE"},{value:505,label:"CUENTA CORRIENTE"},{value:506,label:"TARJETA DE CRÉDITO"}],He=r(null),Ye=r(null),Qe=r(null),tl=r(null),ul=r(null),Oe=r(null),ml=r(null),ae=r(Ue[0].value),We=r(rl[0].value),ne=r(ll[0].value),ol=r(el[0].value),fl=()=>{},Je=r(!1),pl=()=>{g.value=!1},re=()=>{P.value=!1},al=()=>{O.value=!1},vl=()=>{A.value=!1},ee=()=>{P.value=!P.value},gl=()=>{O.value=!O.value},Q=()=>{var Bl,Ll;const h=document.querySelector(".cajonci-select select"),n=document.querySelector(".pago-select select");if(h){const hl=n.selectedIndex;n.options[hl].text,k.value.paymentmethod_id=hl}const H=He.value;k.value.client_id=H;const p=Ye.value;k.value.provider_id=p;const ve=Qe.value;k.value.employee_id=ve;const tt=tl.value;k.value.concept_id=tt;const ot=ul.value;k.value.accountbank_id=ot,k.value.voucher_external=ml.value,k.value.is_voucher_external=Je.value,Je.value||(k.value.nro_voucher_external=null,k.value.voucher_external=null),k.value.booking_id=((Bl=k.value.booking_id)==null?void 0:Bl.value)!==void 0?k.value.booking_id.value:null,k.value.collaborator_id=((Ll=k.value.collaborator_id)==null?void 0:Ll.value)!==void 0?k.value.collaborator_id.value:null,console.log(k.value),V.post("https://thtsystemv2.tech/public/api/v1/moneys-akemy/create-expense",k.value,{...c}).then(hl=>{ye(),w.success(hl.data.message)}).catch(hl=>{if(console.error("Error al guardar los datos:",hl),hl.response&&hl.response.data&&hl.response.data.message){ye();const at=hl.response.data.message;w.error(at)}else w.error("Ha ocurrido un error al guardar los datos. Por favor, inténtalo de nuevo.")})},De=()=>{A.value=!A.value},W=r({typedocument_id:"",document:"",department_id:"",province_id:"",district_id:"",fullname:"",tradename:"",address:"",cellphone:"",telephone:"",email:""}),pe=r("cash");M(E,h=>{h&&console.log("ID del booking seleccionado:",h.value)});const we=async()=>{try{const h=await V.get(`https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/total-dolares/${S.id}`,c);K.value=h.data.total_dolares}catch(h){console.error("Error al obtener el total en dólares:",h)}},L=r([]),sl=h=>!!k.value[h],qe=h=>sl(h),Ve=r([]),Ie=[{value:1,label:"Natural"},{value:2,label:"Jurídico"}],be=[{value:1,label:"DNI"},{value:2,label:"RUC"},{value:3,label:"PASAPORTE"}],Ke=[{id:1,label:"Soltero"},{id:2,label:"Casado"},{id:2,label:"Viudo"},{id:2,label:"Divorciado"}],nl=[{id:1,label:"Masculino"},{id:2,label:"Femenino"}],X=r({typedocument_id:"",department_id:"",province_id:"",district_id:"",type_client:"",fullname:"",document:"",tradename:"",address:"",email:"",telephone:"",cellphone:"",date_birthday:"",sex:"",status:"",typeDocument:""}),bl=r(Ie[0].value),Pe=r(be[0].value);let je=r(null),Fe=r(null),Ae=r(null),Xe=r(null),dl=r(null);const Y=((h,n)=>{let H;return(...p)=>{clearTimeout(H),H=setTimeout(()=>{h(...p)},n)}})(()=>{const h=parseFloat(k.value.amount)||0,n=K.value-h;K.value=n>=0?n:0},2500);let a="";const d=[{value:"clients",label:"Clientes"},{value:"providers",label:"Proveedores"},{value:"employees",label:"Empleados"}],G=r(d[0].value),b=r([]),m=[{value:"cash",label:"Efectivo"},{value:"visa",label:"Visa"},{value:"check",label:"Cheque"},{value:"account_deposit",label:"Depósito a cuenta"},{value:"dolar",label:"Dolares"}],i=async()=>{try{const h=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/provinces/${X.value.department_id}`,c);z.value=h.data.data.map(n=>({value:n.id,label:n.name}))}catch(h){console.error("Error fetching provinces:",h)}},Z=async()=>{try{const h=await V.get(`https://thtsystemv2.tech/public/api/v1/ubigeo/districts/${X.value.province_id}`,c);ue.value=h.data.data.map(n=>({value:n.id,label:n.name}))}catch(h){console.error("Error fetching provinces:",h)}},v=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getRucData",{ruc:W.value.document}).then(h=>{W.value.fullname=h.data.data.nombre_o_razon_social,W.value.address=h.data.data.direccion}).catch(h=>{console.error("Error al obtener datos del RUC:",h)})},ie=()=>{V.post("https://thtsystemv2.tech/public/api/v1/getDniData",{dni:X.value.document}).then(h=>{X.value.fullname=h.data.data.nombre_completo}).catch(h=>{console.error("Error al obtener datos del DNI:",h)})},Dl=Yl(()=>ze.value.slice(0,6)),Pl=()=>{V.post("https://thtsystemv2.tech/public/api/v1/banks/create",Me.value,{...c}).then(h=>{vl(),Ze(),w.success(h.data.message)}).catch(h=>{console.error("Error al guardar los datos:",h)})},il=()=>{V.post("https://thtsystemv2.tech/public/api/v1/providers/create",W.value,{...c}).then(h=>{re(),me(),w.success(h.data.message)}).catch(h=>{console.error("Error al guardar los datos:",h)})},Cl=()=>{const h=document.querySelector(".typecliente-select select");if(h){const H=h.selectedIndex,p=H.toString();h.options[H].text,X.value.type_client=p}const n=document.querySelector(".typedocument-select select");if(h){const H=n.selectedIndex,p=n.options[H].text;X.value.typedocument_id=H,X.value.typeDocument=p}V.post("https://thtsystemv2.tech/public/api/v1/clients/create",X.value,{...c}).then(H=>{pl(),$e(),w.success(H.data.message)}).catch(H=>{console.error("Error al guardar los datos:",H)})},lt=()=>{const h=document.querySelector(".oficinaprincipal-select select");if(h){const ve=h.selectedIndex;h.options[ve].text,de.value.branchoffice_id=ve}const n=document.querySelector(".typeaccount-select select");if(h){const ve=n.selectedIndex;n.options[ve].text,de.value.typeaccount_id=ve}const H=document.querySelector(".banck-select select");if(h){const ve=H.selectedIndex;H.options[ve].text,de.value.bank_id=ve}const p=document.querySelector(".money-select select");if(h){const ve=p.selectedIndex;p.options[ve].text,de.value.currency_id=ve}V.post("https://thtsystemv2.tech/public/api/v1/accountbanks/create",de.value,{...c}).then(ve=>{al(),Ge(),w.success(ve.data.message)}).catch(ve=>{console.error("Error al guardar los datos:",ve)})};M(()=>He.value,(h,n)=>{}),M(()=>ol.value,(h,n)=>{}),M(()=>tl.value,(h,n)=>{h==="8"?(B.value=!0,console.log("El id seleccionado es 6")):B.value=!1}),M(()=>ae.value,(h,n)=>{}),M(()=>Ye.value,(h,n)=>{}),M(()=>pe.value,(h,n)=>{h==="dolar"?(console.log(S.id),le.value=!0,we()):le.value=!1}),M(()=>ul.value,(h,n)=>{}),M(()=>We.value,(h,n)=>{}),M(()=>Oe.value,(h,n)=>{}),M(()=>Qe.value,(h,n)=>{}),M(()=>ne.value,(h,n)=>{}),M(G,(h,n)=>{const H=document.querySelector(".emisor-select select");if(H){const p=H.selectedIndex;H.options[p].text}}),M(()=>Ae.value,(h,n)=>{if(document.querySelector(".district-select select")){const p=h.toString().padStart(6,"0");X.value.district_id=p,W.value.district_id=p}}),M(()=>Fe.value,(h,n)=>{if(document.querySelector(".province-select select")){const p=h.toString().padStart(4,"0");X.value.province_id=p,W.value.province_id=p}}),M(()=>je.value,(h,n)=>{if(document.querySelector(".department-select select")){const p=h.toString().padStart(2,"0");X.value.department_id=p,W.value.department_id=p}});const ql=r("N° DNI"),Fl=r("RENIEC");return M(()=>Pe.value,h=>{const n=document.querySelector(".typedocument-select select");if(n){const H=n.selectedIndex,p=n.options[H],ve=n.options[H].text;X.value.typedocument_id=H,X.value.typeDocument=ve,ql.value=`N° ${p.textContent}`,Fl.value=h==="1"?"RENIEC":h==="2"?"SUNAT":"Validar"}}),M(()=>dl.value,(h,n)=>{const H=document.querySelector(".sexo-select select");if(H){const p=H.selectedIndex,ve=H.options[p].text;X.value.sex=ve}}),M(()=>Xe.value,(h,n)=>{const H=document.querySelector(".state-select select");if(H){const p=H.selectedIndex,ve=H.options[p].text;X.value.status=ve}}),wl(async()=>{try{await ce(),await Ge(),await me(),await Ze(),await $e(),await Se(),await N(),await cl(),await xe()}catch(h){console.error("Error al realizar llamadas a la API:",h)}}),(h,n)=>{const H=D("flat-pickr");return _(),x("div",null,[e(l(_e),{activeModal:l(I).addmodal3,onClose:l(I).closeModal3,title:"Registrar Nuevo Egreso - Caja General",centered:"",sizeClass:"max-w-2xl"},{default:o(()=>[t("form",{onSubmit:T(fl,["prevent"]),class:"space-y-4"},[t("div",Jd,[e(l(s),{name:"d1",error:l(a)},{default:o(()=>[e(l(C),{label:"Caja aperturada",options:el,modelValue:ol.value,"onUpdate:modelValue":n[0]||(n[0]=p=>ol.value=p),disabled:"",class:"cajonci-select"},null,8,["modelValue"])]),_:1},8,["error"]),e(l(s),{label:"Descripción egreso",name:"d2"},{default:o(()=>[e(l($),{type:"text",placeholder:"Descripción egreso",modelValue:k.value.gloss,"onUpdate:modelValue":n[1]||(n[1]=p=>k.value.gloss=p),modelModifiers:{trim:!0}},null,8,["modelValue"]),qe("gloss")?U("",!0):(_(),x("span",Zd,"Por favor ingrese descripción"))]),_:1})]),t("div",Qd,[e(l(s),{name:"d3"},{default:o(()=>[e(l(C),{label:"Receptor (opcional)",options:d,modelValue:G.value,"onUpdate:modelValue":n[2]||(n[2]=p=>G.value=p),class:"emisor-select"},null,8,["modelValue"])]),_:1}),e(l(s),{name:"d4"},{default:o(()=>[e(l(C),{label:"Concepto egreso",options:b.value,modelValue:tl.value,"onUpdate:modelValue":n[3]||(n[3]=p=>tl.value=p),class:"concept-select",placeholder:"Seleccione concepto"},null,8,["options","modelValue"]),tl.value?U("",!0):(_(),x("span",Wd,"Por favor selecciona un concepto"))]),_:1})]),t("div",Kd,[B.value?(_(),Ee(l(s),{key:0,label:"Busqueda de Reservas",class:"flex-1"},{default:o(()=>[e(Gl,null,{default:o(()=>[e(l(zl),{options:q.value,modelValue:k.value.booking_id,"onUpdate:modelValue":n[4]||(n[4]=p=>k.value.booking_id=p),placeholder:"Ingrese Códido o proforma de reserva",onSearch:te,onInput:Ne},null,8,["options","modelValue"])]),_:1})]),_:1})):U("",!0),B.value?(_(),x("div",Xd,[B.value?(_(),Ee(l(s),{key:0,label:"Colaborador",class:"flex-1"},{default:o(()=>[e(Gl,null,{default:o(()=>[e(l(zl),{options:he.value,modelValue:k.value.collaborator_id,"onUpdate:modelValue":n[5]||(n[5]=p=>k.value.collaborator_id=p)},null,8,["options","modelValue"])]),_:1})]),_:1})):U("",!0),B.value?(_(),x("button",{key:1,onClick:n[6]||(n[6]=T((...p)=>h.openModalColaborador&&h.openModalColaborador(...p),["prevent"])),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")):U("",!0)])):U("",!0),B.value?(_(),x("div",er,[B.value?(_(),Ee(l(s),{key:0,label:"Total Hotel",class:"flex-1"},{default:o(()=>[e(l($),{type:"text",modelValue:k.value.total_hotel,"onUpdate:modelValue":n[7]||(n[7]=p=>k.value.total_hotel=p),placeholder:"Ingrese Total Hotel",class:"form-input"},null,8,["modelValue"])]),_:1})):U("",!0),B.value?(_(),Ee(l(s),{key:1,label:"Total Tours",class:"flex-1"},{default:o(()=>[e(l($),{type:"text",modelValue:k.value.total_tour,"onUpdate:modelValue":n[8]||(n[8]=p=>k.value.total_tour=p),placeholder:"Ingrese Total Tours",class:"form-input"},null,8,["modelValue"])]),_:1})):U("",!0)])):U("",!0),B.value?(_(),Ee(l(s),{key:3,label:"Observación",class:"flex-1"},{default:o(()=>[e(l($),{type:"text",modelValue:k.value.observation,"onUpdate:modelValue":n[9]||(n[9]=p=>k.value.observation=p),placeholder:"Ingrese Observación",class:"form-input"},null,8,["modelValue"])]),_:1})):U("",!0),G.value==="clients"?(_(),x("div",lr,[e(l(s),{label:"Clientes",class:"flex-1"},{default:o(()=>[e(l(C),{options:Dl.value,modelValue:He.value,"onUpdate:modelValue":n[10]||(n[10]=p=>He.value=p),placeholder:"Seleccionar Cliente",class:"client-select"},null,8,["options","modelValue"])]),_:1})])):G.value==="providers"?(_(),x("div",tr,[e(l(s),{label:"Proveedores",class:"flex-1"},{default:o(()=>[e(l(C),{options:Re.value,modelValue:Ye.value,"onUpdate:modelValue":n[11]||(n[11]=p=>Ye.value=p),class:"provider-select"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:ee,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")])):G.value==="employees"?(_(),x("div",or,[e(l(s),{label:"Empleados",class:"flex-1"},{default:o(()=>[e(l(C),{options:ke.value,modelValue:Qe.value,"onUpdate:modelValue":n[12]||(n[12]=p=>Qe.value=p),class:"employee-select"},null,8,["options","modelValue"])]),_:1})])):U("",!0),e(l(s),{label:"Fecha del movimiento",name:"d1"},{default:o(()=>[e(H,{modelValue:k.value.date_movement,"onUpdate:modelValue":n[13]||(n[13]=p=>k.value.date_movement=p),class:"form-control",id:"d1",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1}),e(l(Ml),{label:"Incluye Comprobante",modelValue:Je.value,"onUpdate:modelValue":n[14]||(n[14]=p=>Je.value=p)},null,8,["modelValue"]),Je.value?(_(),x("div",ar,[e(l(s),{label:"Tipo de Comprobante"},{default:o(()=>[e(l(C),{options:Te.value,modelValue:ml.value,"onUpdate:modelValue":n[15]||(n[15]=p=>ml.value=p)},null,8,["options","modelValue"])]),_:1}),e(l(s),{label:"N° de Comprobante"},{default:o(()=>[e(l($),{type:"text",modelValue:k.value.nro_voucher_external,"onUpdate:modelValue":n[16]||(n[16]=p=>k.value.nro_voucher_external=p),placeholder:"Ingrese N° de Comprobante"},null,8,["modelValue"])]),_:1})])):U("",!0)]),e(l(_e),{title:"Registrar nuevo Cliente",label:"Modal title",activeModal:g.value,onClose:n[31]||(n[31]=p=>g.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",sr,[t("div",nr,[t("div",null,[e(l(s),{label:"Tipo de cliente"},{default:o(()=>[e(l(C),{options:Ie,modelValue:bl.value,"onUpdate:modelValue":n[17]||(n[17]=p=>bl.value=p),class:"typecliente-select",placeholder:"Selccione Cliente"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo documento"},{default:o(()=>[e(l(C),{options:be,modelValue:Pe.value,"onUpdate:modelValue":n[18]||(n[18]=p=>Pe.value=p),class:"typedocument-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° Documento"},{default:o(()=>[e(l(Le),{type:"text",placeholder:ql.value,modelValue:X.value.document,"onUpdate:modelValue":n[19]||(n[19]=p=>X.value.document=p)},{append:o(()=>[e(l(j),{text:Fl.value,btnClass:"btn-outline-dark",onClick:T(ie,["prevent"])},null,8,["text"])]),_:1},8,["placeholder","modelValue"])]),_:1})])]),t("div",dr,[t("div",rr,[e(l(s),{label:"Nombre ó Razón Social"},{default:o(()=>[e(l($),{type:"text",id:"client_fullname",modelValue:X.value.fullname,"onUpdate:modelValue":n[20]||(n[20]=p=>X.value.fullname=p),modelModifiers:{trim:!0},placeholder:"Ingrese Nombre ó Razón Social "},null,8,["modelValue"])]),_:1})]),ir]),t("div",cr,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:R.value,label:"Departamento",modelValue:l(je),"onUpdate:modelValue":n[21]||(n[21]=p=>se(je)?je.value=p:je=p),class:"department-select",onChange:i,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:z.value,label:"Provincias",modelValue:l(Fe),"onUpdate:modelValue":n[22]||(n[22]=p=>se(Fe)?Fe.value=p:Fe=p),class:"province-select",onChange:Z,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:ue.value,label:"Distritos",modelValue:l(Ae),"onUpdate:modelValue":n[23]||(n[23]=p=>se(Ae)?Ae.value=p:Ae=p),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",ur,[t("div",mr,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{type:"text",modelValue:X.value.address,"onUpdate:modelValue":n[24]||(n[24]=p=>X.value.address=p),modelModifiers:{trim:!0},placeholder:"Ingrese Direción"},null,8,["modelValue"])]),_:1})]),pr]),t("div",vr,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{type:"text",modelValue:X.value.cellphone,"onUpdate:modelValue":n[25]||(n[25]=p=>X.value.cellphone=p),modelModifiers:{trim:!0},placeholder:"Ingrese N° de celular"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono fijo"},{default:o(()=>[e(l($),{type:"text",modelValue:X.value.telephone,"onUpdate:modelValue":n[26]||(n[26]=p=>X.value.telephone=p),modelModifiers:{trim:!0},placeholder:"Ingrese N° de telefono fijo"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{type:"email",modelValue:X.value.email,"onUpdate:modelValue":n[27]||(n[27]=p=>X.value.email=p),modelModifiers:{trim:!0},placeholder:"Ingrese correo electrónico"},null,8,["modelValue"])]),_:1})])]),t("div",br,[t("div",null,[e(l(s),{label:"Fecha de nacimiento"},{default:o(()=>[e(H,{modelValue:X.value.date_birthday,"onUpdate:modelValue":n[28]||(n[28]=p=>X.value.date_birthday=p),class:"form-control",id:"date_birthday",placeholder:"yyyy, dd M",config:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:Ke,label:"Estado",modelValue:l(Xe),"onUpdate:modelValue":n[29]||(n[29]=p=>se(Xe)?Xe.value=p:Xe=p),class:"state-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:nl,label:"Sexo",modelValue:l(dl),"onUpdate:modelValue":n[30]||(n[30]=p=>se(dl)?dl.value=p:dl=p),class:"sexo-select",placeholder:"Seleccione"},null,8,["modelValue"])]),_:1})])]),t("div",hr,[fr,t("div",gr,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(pl,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Cl,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar nuevo Proveedor",label:"Modal title",activeModal:P.value,onClose:n[42]||(n[42]=p=>P.value=!1),sizeClass:"max-w-4xl"},{default:o(()=>[t("form",_r,[t("div",yr,[t("div",null,[e(l(s),{label:"N° RUC"},{default:o(()=>[e(l(Le),{type:"text",placeholder:"RUC",modelValue:W.value.document,"onUpdate:modelValue":n[32]||(n[32]=p=>W.value.document=p),modelModifiers:{trim:!0}},{append:o(()=>[e(l(j),{text:"SUNAT",btnClass:"btn-outline-dark ",onClick:T(v,["prevent"])})]),_:1},8,["modelValue"])]),_:1})]),t("div",xr,[e(l(s),{label:"Razón social del proveedor"},{default:o(()=>[e(l($),{modelValue:W.value.fullname,"onUpdate:modelValue":n[33]||(n[33]=p=>W.value.fullname=p),modelModifiers:{trim:!0},placeholder:"Razón social del proveedor",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre comercial"},{default:o(()=>[e(l($),{modelValue:W.value.tradename,"onUpdate:modelValue":n[34]||(n[34]=p=>W.value.tradename=p),modelModifiers:{trim:!0},placeholder:"Nombre comercial",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",Vr,[t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:R.value,label:"Departamento",modelValue:l(je),"onUpdate:modelValue":n[35]||(n[35]=p=>se(je)?je.value=p:je=p),class:"department-select",onChange:i,placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:z.value,label:"Provincias",modelValue:l(Fe),"onUpdate:modelValue":n[36]||(n[36]=p=>se(Fe)?Fe.value=p:Fe=p),class:"province-select",onChange:Z,placeholder:""},null,8,["options","modelValue"])]),_:1})]),t("div",null,[e(l(s),null,{default:o(()=>[e(l(C),{options:ue.value,label:"Distritos",modelValue:l(Ae),"onUpdate:modelValue":n[37]||(n[37]=p=>se(Ae)?Ae.value=p:Ae=p),class:"district-select",placeholder:""},null,8,["options","modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Dirección"},{default:o(()=>[e(l($),{modelValue:W.value.address,"onUpdate:modelValue":n[38]||(n[38]=p=>W.value.address=p),modelModifiers:{trim:!0},placeholder:"Dirección",required:"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",Cr,[t("div",null,[e(l(s),{label:"Celular"},{default:o(()=>[e(l($),{modelValue:W.value.cellphone,"onUpdate:modelValue":n[39]||(n[39]=p=>W.value.cellphone=p),modelModifiers:{trim:!0},placeholder:"Celular","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Teléfono"},{default:o(()=>[e(l($),{modelValue:W.value.telephone,"onUpdate:modelValue":n[40]||(n[40]=p=>W.value.telephone=p),modelModifiers:{trim:!0},placeholder:"Teléfono","allow-only-numbers":"",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Correo electrónico"},{default:o(()=>[e(l($),{modelValue:W.value.email,"onUpdate:modelValue":n[41]||(n[41]=p=>W.value.email=p),modelModifiers:{trim:!0},placeholder:"Correo electrónico",type:"email",class:"w-full"},null,8,["modelValue"])]),_:1})])]),t("div",kr,[wr,t("div",Er,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(re,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(il,["prevent"])})])])])]),_:1},8,["activeModal"]),e(l(_e),{title:"Registrar cuenta bancaria",label:"Modal title",activeModal:O.value,onClose:n[54]||(n[54]=p=>O.value=!1)},{default:o(()=>[t("form",$r,[t("div",Mr,[t("div",null,[e(l(s),{label:"Sucursal",class:"block"},{default:o(()=>[e(l(C),{modelValue:ne.value,"onUpdate:modelValue":n[43]||(n[43]=p=>ne.value=p),options:ll,required:"",class:"oficinaprincipal-select"},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Tipo de cuenta",class:"block"},{default:o(()=>[e(l(C),{modelValue:We.value,"onUpdate:modelValue":n[44]||(n[44]=p=>We.value=p),options:rl,required:"",class:"typeaccount-select"},null,8,["modelValue"])]),_:1})])]),t("div",Ir,[t("div",Sr,[e(l(s),{label:"Banco",class:"flex-1"},{default:o(()=>[e(l(C),{options:L.value,modelValue:Oe.value,"onUpdate:modelValue":n[45]||(n[45]=p=>Oe.value=p),class:"banck-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:T(De,["prevent"]),class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),t("div",null,[e(l(s),{label:"Moneda",class:"block"},{default:o(()=>[e(l(C),{modelValue:ae.value,"onUpdate:modelValue":n[46]||(n[46]=p=>ae.value=p),options:Ue,required:"",class:"money-select"},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Nombre cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:de.value.name,"onUpdate:modelValue":n[47]||(n[47]=p=>de.value.name=p),modelModifiers:{trim:!0},placeholder:"Nombre cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",Ur,[t("div",null,[e(l(s),{label:"N° de cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:de.value.number_account,"onUpdate:modelValue":n[48]||(n[48]=p=>de.value.number_account=p),modelModifiers:{trim:!0},placeholder:"N° de cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"N° CCI (Código interbancario)",class:"block"},{default:o(()=>[e(l($),{modelValue:de.value.cci_account,"onUpdate:modelValue":n[49]||(n[49]=p=>de.value.cci_account=p),modelModifiers:{trim:!0},placeholder:"N° CCI",required:""},null,8,["modelValue"])]),_:1})])]),t("div",null,[e(l(s),{label:"Titular cuenta",class:"block"},{default:o(()=>[e(l($),{modelValue:de.value.headline,"onUpdate:modelValue":n[50]||(n[50]=p=>de.value.headline=p),modelModifiers:{trim:!0},placeholder:"Titular cuenta",required:""},null,8,["modelValue"])]),_:1})]),t("div",null,[e(l(s),{label:"Descripción",class:"block"},{default:o(()=>[e(l(Ul),{modelValue:de.value.description,"onUpdate:modelValue":n[51]||(n[51]=p=>de.value.description=p),modelModifiers:{trim:!0},placeholder:"Descripción"},null,8,["modelValue"])]),_:1})]),t("div",Tr,[Dr,t("div",Pr,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(al,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(lt,["prevent"])})])])]),e(l(_e),{title:"Registrar banco",label:"Modal title",activeModal:A.value,onClose:n[53]||(n[53]=p=>A.value=!1)},{default:o(()=>[t("form",Nr,[e(l($),{label:"Nombre",name:"pn",type:"text",placeholder:"Ingresar nombre ",modelValue:Me.value.description,"onUpdate:modelValue":n[52]||(n[52]=p=>Me.value.description=p)},null,8,["modelValue"]),t("div",Rr,[jr,t("div",Ar,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:T(vl,["prevent"])}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:T(Pl,["prevent"])})])])])]),_:1},8,["activeModal"])]),_:1},8,["activeModal"]),t("div",Or,[e(l(s),{name:"d5",class:"mt-1"},{default:o(()=>[qr,e(l(C),{id:"payment-type",options:m,modelValue:pe.value,"onUpdate:modelValue":n[55]||(n[55]=p=>pe.value=p),class:"pago-select mt-2"},null,8,["modelValue"])]),_:1}),pe.value==="account_deposit"?(_(),x(ge,{key:0},[t("div",Fr,[e(l(s),{label:"Cuenta Origen",class:"flex-1"},{default:o(()=>[e(l(C),{options:Ve.value,modelValue:ul.value,"onUpdate:modelValue":n[56]||(n[56]=p=>ul.value=p),class:"cuentadestino-select",placeholder:"Seleccione"},null,8,["options","modelValue"])]),_:1}),t("button",{onClick:gl,class:"ml-2 mt-7 p-2 btn-outline-dark"},"+")]),e(l(s),{label:"N° de Operación"},{default:o(()=>[e(l($),{type:"text",placeholder:"Ingrese N° de Operación",modelValue:k.value.reference_operation,"onUpdate:modelValue":n[57]||(n[57]=p=>k.value.reference_operation=p),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})],64)):U("",!0),le.value?(_(),Ee(l(s),{key:1,label:"Total en Dólares",class:"text-center"},{default:o(()=>[t("div",Br,J(K.value)+" USD ",1)]),_:1})):U("",!0),e(l(s),{label:"Monto",name:"d6"},{default:o(()=>[e(l($),{type:"text",placeholder:"Monto",modelValue:k.value.amount,"onUpdate:modelValue":n[58]||(n[58]=p=>k.value.amount=p),modelModifiers:{trim:!0},onInput:l(Y)},null,8,["modelValue","onInput"]),qe("amount")?U("",!0):(_(),x("span",Lr,"Por favor ingrese monto"))]),_:1})]),t("div",Gr,[t("div",zr,[e(l(j),{text:"Cancelar",btnClass:"btn-light mr-2",onClick:ye}),e(l(j),{type:"submit",text:"Guardar Cambios",btnClass:"btn-dark",onClick:Q})])])],32)]),_:1},8,["activeModal","onClose"])])}}},jl=Be().headers(),$l=_l(),Yr={components:{Card:kl,Icon:El,Breadcrumb:dt,ListIngresoEgreso:un,Switch:pt,CajaHistorialA:Ns,ClientAddModal:Yd,ClientEditModal:Xl,ClientEditModalEgresoA:et,ClientAddModalEgresoA:Hr,TransferirCajaModal:In,ListEgreso:_s,List:Bo,ModalCierreCaja:Kn,VueTailwindDatePicker:Tl,CityTouristicAddModal:jn,Swiper:it,SwiperSlide:ct,Select:C,Button:j,Textinput:$},data(){return{id:"",summary_paymethods:[],moneybox:{},selected:2,activeIndex:null,monto:"2,447.700",cajaInicial:"",authStore:Be(),applyForEntireMonth:!0,applyForHistory:!1,applyForIncomes:!1,applyForExpenses:!1,idBoxed:"1",showModalCierre:!1,cards:[{bg:"from-[#1EABEC] to-primary-500 ",cardNo:"****  ****  **** 3945"}],statistics:[{title:"Sales",count:"354",bg:"bg-warning-500",text:"text-primary-500",percent:"25.67% ",icon:"heroicons:arrow-trending-up",img:Zl,percentClass:"text-primary-500"},{title:"Revenue ",count:"$86,954",bg:"bg-info-500",text:"text-primary-500",percent:"8.67%",icon:"heroicons:arrow-trending-up",img:Ql,percentClass:"text-primary-500"},{title:"Conversion",count:"15%",bg:"bg-primary-500",text:"text-danger-500",percent:"1.67%  ",icon:"heroicons:arrow-trending-down",img:Wl,percentClass:"text-danger-500"},{title:"Leads",count:"654",bg:"bg-success-500",text:"text-primary-500",percent:"11.67%  ",icon:"heroicons:arrow-trending-up",img:Kl,percentClass:"text-primary-500"}],boxesOptions:[{value:2,label:"Caja General"}]}},setup(){return{modules:[ut]}},props:{activeModal:Boolean},methods:{openBox(){$l.openProject()},handleSwitchChange(){this.applyForEntireMonth=!this.applyForHistory},handleIngresosSwitchChange(){this.applyForEntireMonth=!this.applyForIncomes},handleExpensesSwitchChange(){this.applyForEntireMonth=!this.applyForExpenses},handleVerDocumento(){V.get(`https://thtsystemv2.tech/public/api/v1/list-box-cuadre-akemy/${this.id}`).then(f=>{}).catch(f=>{console.error("Error al obtener la URL del PDF:",f),window.open(f.config.url,"_blank")})},openBoxClosed(){this.id=this.moneybox[0].id,this.monto=this.monto,this.showModalCierre=!0},transferirCajaGeneral(){$l.openTransfer()},async fetchSummaryPaymethods(f){try{const c=await V.get(`https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/list/${f}`,jl);this.moneybox=[c.data.moneybox],this.id=this.moneybox[0].id,this.monto=this.moneybox[0].balance,this.cajaInicial=c.data.penultimate_amount_closing,this.summary_paymethods=c.data.summary_paymethods}catch(c){console.error("Error fetching summary_paymethods:",c)}},async fetchSummaryPaymethodsInit(){try{const f=await V.get("https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/list",jl);this.summary_paymethods=f.data.summary_paymethods,f.data.moneybox===!1?this.moneybox=[{date_opening:f.data.date}]:this.moneybox=[f.data.moneybox]}catch(f){console.error("Error fetching summary_paymethods:",f)}},handleGuardadoExitosoTransferCajaPrincipal(){location.reload(!0)},handleGuardadoExitoso(f){const c=f.data.moneybox_id;this.id=c,this.fetchSummaryPaymethods(this.id)},openProject(){$l.openProject2()},openEgreso(){$l.openProject3()},boldUpperCase(f){return f.toUpperCase()}},mounted(){V.get("https://thtsystemv2.tech/public/api/v1/moneyboxes-akemy/last-id-with-socia-owner",jl).then(f=>{const{last_id:c,has_null_date_closing:I}=f.data;this.id=c,I?this.fetchSummaryPaymethods(this.id):(this.id=null,this.fetchSummaryPaymethodsInit())}).catch(f=>{console.error("Error al obtener el último ID:",f),this.id=null,this.fetchSummaryPaymethodsInit()})},watch:{id(f,c){}},computed:{authenticatedUser(){return Be().user}}},Jr={class:"flex justify-between flex-wrap items-center"},Zr={class:"flex sm:space-x-4 space-x-2 sm:justify-end items-center md:mb-6 mb-4 rtl:space-x-reverse"},Qr=t("span",{class:"input-group-prepend w-full bg-gray-200 bg-opacity-25 px-2 py-1 rounded-lg font-bold text-slate-600 dark:text-slate-300"}," Caja seleccionada ",-1),Wr={class:"space-y-5 card-auto"},Kr={class:"grid grid-cols-12 gap-5"},Xr={class:"text-lg flex uppercase text-slate-500 dark:text-slate-300 mb-1 leading-[12px] items-center font-bold"},ei={key:0},li={class:"max-w-[90%] mx-auto mt-2"},ti={class:"h-[150px] bg-gradient-to-r relative rounded-md z-[1] p-4 text-white from-teal-500 to-orange-300"},oi=t("div",{class:"font-bold text-lg mb-2"},"Caja abierta",-1),ai={class:"text-center mt-4"},si={class:"font-bold text-4xl"},ni=t("div",{class:"overlay absolute left-0 top-0 h-full w-full -z-[1]"},[t("img",{src:mt,alt:"",class:"h-full w-full object-cover"})],-1),di={class:"flex justify-center mt-6"},ri={class:"font-bold mr-5 text-slate-600 dark:text-slate-300"},ii={class:"text-lg"},ci=t("span",{class:"ml-2"},"Arquero",-1),ui={class:"text-lg"},mi=t("span",{class:"ml-2"},"Cerrar Caja",-1),pi={class:"text-lg"},vi=t("span",{class:"ml-2"},"Transferir a Caja Principal",-1),bi={class:"text-lg flex uppercase text-slate-500 dark:text-slate-300 mb-1 leading-[12px] items-center font-bold"},hi={key:0},fi={class:"flex justify-center items-center mt-6"},gi={class:"text-8xl"},_i=t("div",{class:"text-center text-slate-500 dark:text-slate-300 mt-4 font-bold"}," Aún no tiene abierto la caja para la fecha actual ",-1),yi={class:"flex justify-center mt-6"},xi={class:"text-lg"},Vi=t("span",null,"Abrir Caja",-1),Ci={class:"lg:col-span-6 col-span-12"},ki={class:"grid xl:grid-cols-4 lg:grid-cols-2 col-span-1 gap-3"},wi={class:"block mb-6 text-sm text-slate-900 dark:text-white font-bold"},Ei={class:"block mb- text-2xl text-slate-900 dark:text-white font-bold mb-14"},$i={class:"flex space-x-2 rtl:space-x-reverse"},Mi={class:"flex-1 text-sm"},Ii=t("span",{class:"block mb-1 text-slate-600 dark:text-slate-300"},"N° transacciones",-1),Si={class:"mt-3 flex justify-start items-start"},Ui={class:"mr-5"},Ti={class:"mr-5"},Di={class:"mr-5"},Pi={class:"mt-3 flex justify-between items-start"},Ni={class:"w-full"};function Ri(f,c,I,w,g,S){const P=D("Select"),O=D("Button"),A=D("Icon"),B=D("swiper-slide"),K=D("swiper"),le=D("Card"),R=D("CityTouristicAddModal"),ue=D("TransferirCajaModal"),z=D("ClientAddModal"),ye=D("ClientEditModal"),k=D("ClientAddModalEgresoA"),q=D("ClientEditModalEgresoA"),E=D("ModalCierreCaja"),oe=D("Switch"),he=D("ListIngresoEgreso"),xe=D("CajaHistorialA"),F=D("List"),te=D("ListEgreso");return _(),x("div",null,[t("div",Jr,[t("div",Zr,[Qr,e(P,{options:g.boxesOptions,modelValue:g.selected,"onUpdate:modelValue":c[0]||(c[0]=N=>g.selected=N),class:"w-full rounded-lg shadow-md px-4 py-2 bg-white",placeholder:"Caja Seleccionada"},null,8,["options","modelValue"]),e(O,{icon:"heroicons-outline:plus",text:"Agregar Ingreso",btnClass:"btn-dark dark:bg-slate-800 h-min text-sm font-normal",iconClass:"text-lg",onClick:S.openProject},null,8,["onClick"]),e(O,{icon:"heroicons-outline:plus",text:"Agregar Egreso",btnClass:"btn-dark dark:bg-slate-800 h-min text-sm font-normal",iconClass:"text-lg",onClick:S.openEgreso},null,8,["onClick"])]),t("div",Wr,[t("div",Kr,[g.id?(_(!0),x(ge,{key:0},yl(g.moneybox,(N,$e)=>(_(),x("div",{class:"lg:col-span-6 col-span-12 space-y-5",key:$e},[e(le,{title:N.date_opening},{header:o(()=>[t("span",Xr,[S.authenticatedUser?(_(),x("span",ei,J(S.boldUpperCase(S.authenticatedUser.name)),1)):U("",!0),e(A,{icon:"heroicons-solid:user"})])]),default:o(()=>[t("div",li,[e(K,{effect:"cards",grabCursor:!0,modules:w.modules,class:"mySwiper"},{default:o(()=>[e(B,null,{default:o(()=>[t("div",ti,[oi,t("div",ai,[t("div",si," S/. "+J(g.monto),1)]),ni])]),_:1}),e(B)]),_:1},8,["modules"])]),t("div",di,[t("span",ri,"Caja inicial S/ "+J(g.cajaInicial),1),t("button",{class:"inline-flex items-center justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-teal-500 hover:bg-teal-600 mr-5",onClick:c[1]||(c[1]=T(ce=>S.handleVerDocumento(),["prevent"]))},[t("span",ii,[e(A,{icon:"heroicons:arrow-down-tray"})]),ci]),t("button",{class:"inline-flex items-center justify-center py-2 px-2 border border-transparent text-sm font-medium rounded-md text-white bg-orange-500 hover:bg-orange-600 mr-5",onClick:c[2]||(c[2]=T(ce=>S.openBoxClosed(),["prevent"]))},[t("span",ui,[e(A,{icon:"heroicons:lock-closed"})]),mi]),t("button",{class:"inline-flex items-center justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-500 hover:bg-blue-600",onClick:c[3]||(c[3]=T(ce=>S.transferirCajaGeneral(),["prevent"]))},[t("span",pi,[e(A,{icon:"heroicons:currency-dollar"})]),vi])])]),_:2},1032,["title"])]))),128)):(_(!0),x(ge,{key:1},yl(g.moneybox,(N,$e)=>(_(),x("div",{class:"lg:col-span-6 col-span-12 space-y-5",key:$e},[e(le,{title:N.date_opening},{header:o(()=>[t("span",bi,[S.authenticatedUser?(_(),x("span",hi,J(S.boldUpperCase(S.authenticatedUser.name)),1)):U("",!0),e(A,{icon:"heroicons-solid:user"})])]),default:o(()=>[t("div",fi,[t("span",gi,[e(A,{icon:"heroicons-solid:cube"})])]),_i,t("div",yi,[t("button",{class:"invocie-btn inline-flex btn btn-sm whitespace-nowrap space-x-1 cursor-pointer bg-green-900 dark:bg-green-700 btn-md h-min text-sm font-normal text-white rtl:space-x-reverse",onClick:c[4]||(c[4]=T(ce=>S.openBox(),["prevent"]))},[t("span",xi,[e(A,{icon:"heroicons:lock-open"})]),Vi])])]),_:2},1032,["title"])]))),128)),t("div",Ci,[e(le,{title:"Especificaciones"},{default:o(()=>[t("div",ki,[(_(!0),x(ge,null,yl(g.summary_paymethods,(N,$e)=>(_(),x("div",{key:$e,class:Vl([N.bg,"rounded-md p-4 bg-opacity-[0.15] dark:bg-opacity-25 relative z-[1]"])},[(_(!0),x(ge,null,yl(g.statistics,(ce,Ze)=>(_(),x("div",{class:"overlay absolute left-0 top-0 w-full h-full z-[-1]",key:Ze}))),128)),t("span",wi,J(N.title),1),t("span",Ei,J(N.title==="Dolares"?"USD":"S/.")+" "+J(N.count),1),t("div",$i,[t("div",{class:Vl(["flex-none text-xl",N.text])},[e(A,{icon:N.icon},null,8,["icon"])],2),t("div",Mi,[t("span",{class:Vl(["block mb-[2px]",N.percentClass])},J(N.percent),3),Ii])])],2))),128))])]),_:1})])])]),e(R,{onGuardadoExitoso:S.handleGuardadoExitoso},null,8,["onGuardadoExitoso"]),e(ue,{id:g.id,onGuardadoExitoso:S.handleGuardadoExitosoTransferCajaPrincipal},null,8,["id","onGuardadoExitoso"]),e(z),e(ye),e(k,{id:g.id},null,8,["id"]),e(q),e(E,{activeModal:g.showModalCierre,id:g.id,monto:g.monto,onClose:c[5]||(c[5]=N=>g.showModalCierre=!1)},null,8,["activeModal","id","monto"])]),t("div",Si,[t("div",Ui,[e(oe,{label:"Ver Historial",modelValue:g.applyForHistory,"onUpdate:modelValue":c[6]||(c[6]=N=>g.applyForHistory=N),class:"mr-2",onChange:S.handleSwitchChange},null,8,["modelValue","onChange"])]),t("div",Ti,[e(oe,{label:"Ver Ingresos",modelValue:g.applyForIncomes,"onUpdate:modelValue":c[7]||(c[7]=N=>g.applyForIncomes=N),class:"mr-2",onChange:S.handleIngresosSwitchChange},null,8,["modelValue","onChange"])]),t("div",Di,[e(oe,{label:"Ver Egresos",modelValue:g.applyForExpenses,"onUpdate:modelValue":c[8]||(c[8]=N=>g.applyForExpenses=N),class:"mr-2",onChange:S.handleExpensesSwitchChange},null,8,["modelValue","onChange"])])]),t("div",Pi,[t("div",Ni,[g.applyForEntireMonth&&!g.applyForHistory?(_(),Ee(he,{key:0,class:"mt-5"})):U("",!0),g.applyForHistory?(_(),Ee(xe,{key:1,class:"mt-5"})):U("",!0),g.applyForIncomes?(_(),Ee(F,{key:2,class:"mt-5"})):U("",!0),g.applyForExpenses?(_(),Ee(te,{key:3,class:"mt-5"})):U("",!0)])])])}const kc=xl(Yr,[["render",Ri]]);export{kc as default};
